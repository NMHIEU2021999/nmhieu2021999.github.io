
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.1.6">
    
    
      
        <title>Contents - Online Library</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6910b76c.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.196e0c26.min.css">
        
      
    
    
    
      
        
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
      
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#contents" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href=".." title="Online Library" class="md-header-nav__button md-logo" aria-label="Online Library">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Online Library
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Contents
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Online Library" class="md-nav__button md-logo" aria-label="Online Library">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Online Library
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." class="md-nav__link">
      Welcome to test
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../hello/" class="md-nav__link">
      Hello Again
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
    <a href="./" class="md-nav__link md-nav__link--active">
      Contents
    </a>
    
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <p>3GPP TS 23.009 V16.0.0 (2020-07)</p>
<p><em>Technical Specification</em></p>
<p><strong>3rd Generation Partnership Project;</strong></p>
<p><strong>Technical Specification Group Core Network and Terminals;</strong></p>
<p><strong>Handover procedures</strong></p>
<p><strong>(Release 16)</strong></p>
<p><code></code><img alt="3GPP-logo_web" src="../23009-g00.001.png" /></p>
<p>The present document has been developed within the 3rd Generation Partnership Project (3GPP TM) and may be further elaborated for the purposes of 3GPP.
The present document has not been subject to any approval process by the 3GPP Organisational Partners and shall not be implemented.
This Specification is provided for future development work within 3GPP only. The Organisational Partners accept no liability for any use of this Specification.
Specifications and reports for implementation of the 3GPP TM system should be obtained via the 3GPP Organisational Partners' Publications Offices.</p>
<p><code></code><strong>PAGE 305</strong></p>
<p><code></code><strong>STYLEREF ZA 3GPP TS 23.009 V16.0.0 (2020-07)</strong></p>
<p><code></code><strong>STYLEREF ZGSM Release 16</strong></p>
<p>Keywords</p>
<p>GSM, UMTS, handover</p>
<p><strong><em>3GPP</em></strong></p>
<p>Postal address</p>
<p>3GPP support office address</p>
<p>650 Route des Lucioles - Sophia Antipolis</p>
<p>Valbonne - FRANCE</p>
<p>Tel.: +33 4 92 94 42 00 Fax: +33 4 93 65 47 16</p>
<p>Internet</p>
<p>http://www.3gpp.org</p>
<p><strong><em>Copyright Notification</em></strong></p>
<p>No part may be reproduced except as authorized by written permission.
The copyright and the foregoing restriction extend to reproduction in all media.</p>
<p>© 2020, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA, TTC).</p>
<p>All rights reserved.</p>
<p>UMTS™ is a Trade Mark of ETSI registered for the benefit of its members</p>
<p>3GPP™ is a Trade Mark of ETSI registered for the benefit of its Members and of the 3GPP Organizational Partners
LTE™ is a Trade Mark of ETSI registered for the benefit of its Members and of the 3GPP Organizational Partners</p>
<p>GSM® and the GSM logo are registered and owned by the GSM Association</p>
<h1 id="contents">Contents</h1>
<p><code></code>TOC \o "1-9" Foreword     PAGEREF _Toc517459865 \h 6</p>
<p>1   Scope    PAGEREF _Toc517459866 \h 7</p>
<p>2   References   PAGEREF _Toc517459867 \h 9</p>
<p>3   Abbreviations and definitions    PAGEREF _Toc517459868 \h 10</p>
<p>3.1 Abbreviations    PAGEREF _Toc517459869 \h 10</p>
<p>3.2 Definitions  PAGEREF _Toc517459870 \h 11</p>
<p>4   Role, functional composition of MSCs and interfaces for handover     PAGEREF _Toc517459871 \h 12</p>
<p>4.1 MSC-A    PAGEREF _Toc517459872 \h 12</p>
<p>4.1.1   Role of MSC-A    PAGEREF _Toc517459873 \h 12</p>
<p>4.1.2   Functional composition of MSCA and its interfaces for handover  PAGEREF _Toc517459874 \h 14</p>
<p>4.2 MSCB    PAGEREF _Toc517459875 \h 16</p>
<p>4.2.1   Role of MSCB    PAGEREF _Toc517459876 \h 16</p>
<p>4.2.2   Functional composition of MSCB and its interfaces for handover  PAGEREF _Toc517459877 \h 17</p>
<p>4.3 3G_MSCA    PAGEREF _Toc517459878 \h 18</p>
<p>4.3.1   Role of 3G_MSCA    PAGEREF _Toc517459879 \h 19</p>
<p>4.3.2   Functional composition of 3G_MSCA and its interfaces for handover/relocation   PAGEREF _Toc517459880 \h 21</p>
<p>4.4 3G_MSCB    PAGEREF _Toc517459881 \h 23</p>
<p>4.4.1   Role of 3G_MSCB    PAGEREF _Toc517459882 \h 23</p>
<p>4.4.2   Functional composition of 3G_MSCB and its interfaces for handover/relocation   PAGEREF _Toc517459883 \h 26</p>
<p>4.5 MSC server enhanced for SRVCC features   PAGEREF _Toc517459884 \h 27</p>
<p>4.5.1   Role of SRVCC MSC    PAGEREF _Toc517459885 \h 27</p>
<p>4.5.2   Functional composition of SRVCC MSC and its interfaces for handover/relocation   PAGEREF _Toc517459886 \h 28</p>
<p>4.5.3   Role of vSRVCC MSC   PAGEREF _Toc517459887 \h 28</p>
<p>4.5.4   Functional composition of vSRVCC MSC and its interfaces for handover/relocation  PAGEREF _Toc517459888 \h 28</p>
<p>5   Handover initiation conditions   PAGEREF _Toc517459889 \h 28</p>
<p>6   General description of the procedures for intra - MSC handovers  PAGEREF _Toc517459890 \h 29</p>
<p>6.1 Procedure for Intra-MSC Handovers    PAGEREF _Toc517459891 \h 29</p>
<p>6.2 Procedure for Intra-3G_MSC Handovers    PAGEREF _Toc517459892 \h 31</p>
<p>6.2.1   Intra-3G_MSC Handover from UMTS to GSM  PAGEREF _Toc517459893 \h 31</p>
<p>6.2.1.1 With no bearer or one bearer     PAGEREF _Toc517459894 \h 32</p>
<p>6.2.1.2 With multiple bearers (Optional functionality)   PAGEREF _Toc517459895 \h 33</p>
<p>6.2.2   Intra-3G_MSC GSM to UMTS Handover   PAGEREF _Toc517459896 \h 33</p>
<p>6.2.3   Procedure for Intra-3G_MSC SRNS Relocation  PAGEREF _Toc517459897 \h 35</p>
<p>6.2.3.1 With no bearer or one bearer     PAGEREF _Toc517459898 \h 37</p>
<p>6.2.3.1.1   SRNS Relocation  PAGEREF _Toc517459899 \h 37</p>
<p>6.2.3.1.2   Enhanced SRNS Relocation     PAGEREF _Toc517459900 \h 38</p>
<p>6.2.3.2 With multiple bearers (Optional functionality)   PAGEREF _Toc517459901 \h 39</p>
<p>6.3 Internal Handover with MSC Support for Intra-BSS handover with AoIP  PAGEREF _Toc517459902 \h 40</p>
<p>6.3.1   General Description of Internal Handover with MSC Support    PAGEREF _Toc517459903 \h 40</p>
<p>6.3.2   BSS-initiated Internal Handover with MSC Support     PAGEREF _Toc517459904 \h 40</p>
<p>6.3.3   MSC-initiated BSS Internal Handover with MSC Support     PAGEREF _Toc517459905 \h 42</p>
<p>7   General description of the procedures for inter - MSC handovers  PAGEREF _Toc517459906 \h 42</p>
<p>7.1 Basic handover procedure requiring a circuit connection between MSCA and MSCB  PAGEREF _Toc517459907 \h 43</p>
<p>7.2 Basic handover procedure not requiring the establishment of a circuit connection between MSCA and MSCB     PAGEREF _Toc517459908 \h 45</p>
<p>7.3 Procedure for subsequent handover requiring a circuit connection     PAGEREF _Toc517459909 \h 46</p>
<p>7.3.1   Description of subsequent handover procedure i): MSCB to MSCA  PAGEREF _Toc517459910 \h 47</p>
<p>7.3.2   Description of the subsequent handover procedure ii): MSCB to MSCB'    PAGEREF _Toc517459911 \h 48</p>
<p>7.4 Procedure for subsequent handover not requiring a circuit connection     PAGEREF _Toc517459912 \h 49</p>
<p>7.4.1   Description of the subsequent handover procedure without circuit connection i): MSCB to MSCA   PAGEREF _Toc517459913 \h 50</p>
<p>7.4.2   Description of the subsequent handover procedure without circuit connection ii): MSCB to MSCB'     PAGEREF _Toc517459914 \h 50</p>
<p>8   General Description of the procedures for inter - 3G_MSC handovers  PAGEREF _Toc517459915 \h 51</p>
<p>8.1 Handover UMTS to GSM     PAGEREF _Toc517459916 \h 51</p>
<p>8.1.1   Basic Handover procedure requiring a circuit connection between 3G_MSC -A and MSCB     PAGEREF _Toc517459917 \h 52</p>
<p>8.1.1.1 With one circuit connection  PAGEREF _Toc517459918 \h 53</p>
<p>8.1.1.2 With multiple circuit connections (Optional functionality)   PAGEREF _Toc517459919 \h 55</p>
<p>8.1.2   Basic UMTS to GSM Handover procedure not requiring the establishment of a circuit connection between 3G_MSCA and MSCB     PAGEREF _Toc517459920 \h 55</p>
<p>8.1.3   Procedure for subsequent UMTS to GSM handover requiring a circuit connection     PAGEREF _Toc517459921 \h 56</p>
<p>8.1.3.1 Description of subsequent UMTS to GSM handover procedure i): 3G_MSCB to MSCA  PAGEREF _Toc517459922 \h 57</p>
<p>8.1.3.1.1   With one circuit connection  PAGEREF _Toc517459923 \h 57</p>
<p>8.1.3.1.2   With multiple circuit connections (Optional functionality)   PAGEREF _Toc517459924 \h 57</p>
<p>8.1.3.2 Description of subsequent UMTS to GSM handover procedure ii): 3G_MSCB to MSCB'    PAGEREF _Toc517459925 \h 58</p>
<p>8.1.3.2.1   With one circuit connection  PAGEREF _Toc517459926 \h 58</p>
<p>8.1.3.2.2   With multiple circuit connections (Optional functionality)   PAGEREF _Toc517459927 \h 58</p>
<p>8.1.4   Procedure for subsequent UMTS to GSM handover not requiring a circuit connection     PAGEREF _Toc517459928 \h 60</p>
<p>8.1.4.1 Description of subsequent UMTS to GSM handover procedure i): 3G_MSCB to MSCA  PAGEREF _Toc517459929 \h 61</p>
<p>8.1.4.2 Description of the subsequent UMTS to GSM handover procedure without circuit connection ii): 3G_MSCB to MSCB'     PAGEREF _Toc517459930 \h 61</p>
<p>8.2 Handover GSM to UMTS     PAGEREF _Toc517459931 \h 62</p>
<p>8.2.1   Basic Handover procedure requiring a circuit connection between MSCA and 3G_MSCB  PAGEREF _Toc517459932 \h 63</p>
<p>8.2.2   Basic GSM to UMTS Handover procedure not requiring the establishment of a circuit connection between MSCA and 3G_MSCB     PAGEREF _Toc517459933 \h 66</p>
<p>8.2.3   Procedure for subsequent GSM to UMTS handover requiring a circuit connection     PAGEREF _Toc517459934 \h 66</p>
<p>8.2.3.1 Description of subsequent GSM to UMTS handover procedure i): MSCB to 3G_MSCA  PAGEREF _Toc517459935 \h 67</p>
<p>8.2.3.2 Description of subsequent GSM to UMTS handover procedure ii): MSCB to 3G_MSCB'    PAGEREF _Toc517459936 \h 68</p>
<p>8.2.4   Procedure for subsequent GSM to UMTS handover not requiring a circuit connection     PAGEREF _Toc517459937 \h 69</p>
<p>8.2.4.1 Description of subsequent GSM to UMTS handover procedure without circuit connection i): MSCB to 3G_MSCA   PAGEREF _Toc517459938 \h 70</p>
<p>8.2.4.2 Description of subsequent GSM to UMTS handover procedure without circuit connection ii): MSCB to 3G_MSCB'     PAGEREF _Toc517459939 \h 70</p>
<p>8.3 SRNS Relocation  PAGEREF _Toc517459940 \h 71</p>
<p>8.3.1   Basic relocation procedure requiring a circuit connection between 3G_MSCA and 3G_MSCB    PAGEREF _Toc517459941 \h 72</p>
<p>8.3.1.1 With one circuit connection  PAGEREF _Toc517459942 \h 73</p>
<p>8.3.1.2 With multiple circuit connections (Optional functionality)   PAGEREF _Toc517459943 \h 75</p>
<p>8.3.1.2.1   3G_MSC-B does not support multiple bearers  PAGEREF _Toc517459944 \h 75</p>
<p>8.3.1.2.2   3G_MSC-B supports multiple bearers  PAGEREF _Toc517459945 \h 75</p>
<p>8.3.2   Basic relocation procedure not requiring the establishment of a circuit connection between 3G_MSCA and 3G_MSCB   PAGEREF _Toc517459946 \h 76</p>
<p>8.3.3   Procedure for subsequent relocation requiring a circuit connection   PAGEREF _Toc517459947 \h 77</p>
<p>8.3.3.1 Description of subsequent relocation procedure i): 3G_MSCB to 3G_MSCA    PAGEREF _Toc517459948 \h 78</p>
<p>8.3.3.1.1   With one circuit connection  PAGEREF _Toc517459949 \h 78</p>
<p>8.3.3.1.2   With multiple circuit connections (Optional functionality)   PAGEREF _Toc517459950 \h 79</p>
<p>8.3.3.2 Description of subsequent relocation procedure ii): 3G_MSCB to 3G_MSCB'  PAGEREF _Toc517459951 \h 79</p>
<p>8.3.3.2.1   With one circuit connection  PAGEREF _Toc517459952 \h 79</p>
<p>8.3.3.2.2   With multiple circuit connections (Optional functionality)   PAGEREF _Toc517459953 \h 80</p>
<p>8.3.4   Procedure for subsequent relocation not requiring a circuit connection   PAGEREF _Toc517459954 \h 82</p>
<p>8.3.4.1 Description of subsequent relocation procedure i): 3G_MSCB to 3G_MSCA    PAGEREF _Toc517459955 \h 83</p>
<p>8.3.4.2 Description of subsequent relocation procedure ii): 3G_MSCB to 3G_MSCB''     PAGEREF _Toc517459956 \h 83</p>
<p>9   Detailed procedures in MSCA     PAGEREF _Toc517459957 \h 84</p>
<p>9.1 BSS/MSC and MS/MSC procedures in MSCA (functional unit 1)   PAGEREF _Toc517459958 \h 84</p>
<p>9.2 Call control procedures MSCA (functional unit 2)    PAGEREF _Toc517459959 \h 85</p>
<p>9.3 Handover control procedures MSCA (functional unit 3)    PAGEREF _Toc517459960 \h 86</p>
<p>9.3A    BSS Internal Handover with MSC Support control procedures    PAGEREF _Toc517459961 \h 87</p>
<p>9.4 MAP procedures in MSCA (functional unit 4)  PAGEREF _Toc517459962 \h 88</p>
<p>9.5 Interworking between Handover control procedures and MAP procedures in MSCA     PAGEREF _Toc517459963 \h 88</p>
<p>9.6 Compatibility with GSM Phase 1   PAGEREF _Toc517459964 \h 88</p>
<p>10  Detailed procedures in MSCB     PAGEREF _Toc517459965 \h 89</p>
<p>10.1    BSS/MSC (MS/BSS) procedures MSCB (functional unit 1)    PAGEREF _Toc517459966 \h 89</p>
<p>10.2    Call control procedures MSCB (functional unit 2)    PAGEREF _Toc517459967 \h 89</p>
<p>10.3    Handover control procedures MSCB (functional unit 3)    PAGEREF _Toc517459968 \h 90</p>
<p>10.4    MAP procedures MSCB (functional unit 4)     PAGEREF _Toc517459969 \h 90</p>
<p>10.5    Interworking between Handover control procedures and MAP procedures in MSCB     PAGEREF _Toc517459970 \h 91</p>
<p>10.6    Compatibility with GSM Phase 1   PAGEREF _Toc517459971 \h 91</p>
<p>11  Detailed procedures in 3G_MSCA     PAGEREF _Toc517459972 \h 91</p>
<p>11.1    RNC/BSC/3G_MSC and UE/MS/3G_MSC procedures in 3G_MSCA (functional unit 1)    PAGEREF _Toc517459973 \h 91</p>
<p>11.2    Call control procedures 3G_MSCA (functional unit 2)    PAGEREF _Toc517459974 \h 91</p>
<p>11.3    Handover/Relocation control procedures 3G_MSCA (functional unit 3)     PAGEREF _Toc517459975 \h 93</p>
<p>11.4    MAP procedures in 3G_MSCA (functional unit 4)  PAGEREF _Toc517459976 \h 95</p>
<p>11.5    Interworking between Handover/Relocation control procedures and MAP procedures in 3G_MSCA  PAGEREF _Toc517459977 \h 95</p>
<p>11.6    Compatibility with GSM Phase 1   PAGEREF _Toc517459978 \h 96</p>
<p>11.7    Protocol interworking    PAGEREF _Toc517459979 \h 96</p>
<p>12  Detailed procedures in 3G_MSCB     PAGEREF _Toc517459980 \h 96</p>
<p>12.1    RNC/BSC/3G_MSC (UE/MS/RNC/BSC) procedures in 3G_MSCB (functional unit 1)  PAGEREF _Toc517459981 \h 96</p>
<p>12.2    Call control procedures 3G_MSCB (functional unit 2)    PAGEREF _Toc517459982 \h 96</p>
<p>12.3    Handover/Relocation control procedures in 3G_MSCB (functional unit 3)  PAGEREF _Toc517459983 \h 97</p>
<p>12.4    MAP procedures in 3G_MSCB (functional unit 4)  PAGEREF _Toc517459984 \h 99</p>
<p>12.5    Interworking between Handover/Relocation control procedures and MAP procedures in 3G_MSCB  PAGEREF _Toc517459985 \h 99</p>
<p>12.6    Compatibility with GSM Phase 1   PAGEREF _Toc517459986 \h 99</p>
<p>12.7    Protocol interworking    PAGEREF _Toc517459987 \h 99</p>
<p>12.8    Interactions between handover/relocation control procedures and other RANAP procedures   PAGEREF _Toc517459988 \h 100</p>
<p>12.8.1   Interactions between handover/relocation control procedures and the security mode procedure     PAGEREF _Toc517459989 \h 100</p>
<p>12.8.1.1      Intra-3G_MSC-B handover/relocation    PAGEREF _Toc517459990 \h 100</p>
<p>12.8.1.2     Subsequent Inter-MSC handover/relocation    PAGEREF _Toc517459991 \h 102</p>
<p>12.8.2   Interactions between handover/relocation control procedures and the RAB assignment procedure    PAGEREF _Toc517459992 \h 104</p>
<p>12.8.2.1      Intra-3G_MSC-B handover/relocation    PAGEREF _Toc517459993 \h 104</p>
<p>12.8.2.2     Subsequent Inter-MSC handover/relocation    PAGEREF _Toc517459994 \h 106</p>
<p>12.8.3   Interactions between directed retry handover procedures and the RAB assignment procedure    PAGEREF _Toc517459995 \h 108</p>
<p>12.8.3.1     Intra-3G_MSC-B directed retry handover     PAGEREF _Toc517459996 \h 108</p>
<p>12.8.3.2     Subsequent Inter-MSC directed retry handover    PAGEREF _Toc517459997 \h 109</p>
<p>13  Subsequent channel assignment using a circuit connection between MSCA and MSCB     PAGEREF _Toc517459998 \h 111</p>
<p>13.1    GSM handover     PAGEREF _Toc517459999 \h 111</p>
<p>13.2    UMTS to GSM handover     PAGEREF _Toc517460000 \h 112</p>
<p>13.3    GSM to UMTS handover     PAGEREF _Toc517460001 \h 114</p>
<p>13.4    SRNS Relocation  PAGEREF _Toc517460002 \h 115</p>
<p>13.4.1  Without circuit connection   PAGEREF _Toc517460003 \h 115</p>
<p>13.4.2  With circuit connection (Optional functionality)     PAGEREF _Toc517460004 \h 116</p>
<p>14  Directed retry handover  PAGEREF _Toc517460005 \h 117</p>
<p>14.1    GSM handover     PAGEREF _Toc517460006 \h 117</p>
<p>14.2    GSM to UMTS handover     PAGEREF _Toc517460007 \h 118</p>
<p>14.3    UMTS to GSM handover     PAGEREF _Toc517460008 \h 120</p>
<p>15  SDL diagrams     PAGEREF _Toc517460009 \h 121</p>
<p><strong>Annex A (informative):    Change history   PAGEREF _Toc517460010 \h 298</strong></p>
<h1 id="foreword">Foreword</h1>
<p>This Technical Specification (TS) has been produced by the 3rd Generation Partnership Project (3GPP).</p>
<p>The present document provides a mechanism giving reliable transfer of signalling messages within the 3GPP system.</p>
<p>The contents of the present document are subject to continuing work within the TSG and may change following formal TSG approval. Should the TSG modify the contents of the present document, it will be re-released by the TSG with an identifying change of release date and an increase in version number as follows:</p>
<p>Version x.y.z</p>
<p>where:</p>
<p>x   the first digit:</p>
<p>1   presented to TSG for information;</p>
<p>2   presented to TSG for approval;</p>
<p>3   or greater indicates TSG approved document under change control.</p>
<p>y   the second digit is incremented for all changes of substance, i.e. technical enhancements, corrections, updates, etc.</p>
<p>z   the third digit is incremented when editorial only changes have been incorporated in the document.</p>
<h1 id="1-scope">1 Scope</h1>
<p>The present document contains a detailed description of the handover procedures to be used in PLMNs. The purpose of the handover procedures, as described in the present document, are to ensure that the connection to the Mobile Station (MS) or User Equipment (UE) is maintained as it moves from one cell or radio network to another. The document defines the circuit switched handover functionality based on the service requirements in 3GPP TS 22.129 [9]. For the circuit switched handover functionality related to SRVCC and vSRVCC, it is based on the service requirements in 3GPP TS 23.216 [26].</p>
<p>The present document considers the following five handover cases:</p>
<p>i)  handover between Base Station Subsystems (BSS) connected to the same MSC, this is termed an Intra-MSC handover;</p>
<p>ii) handover between Radio Network Subsystems (RNS) connected to the same 3G_MSC, this is termed an Intra-3G_MSC handover/relocation. This case also includes inter-system handover between RNS and BSS if the 3G_MSC supports the A-interface. In the context of this specification the term RNS refers also to a BSS when serving a mobile station in Iu mode. Furthermore, this case includes Intra-3G_MSC enhanced SRNS relocation between two RNSs;</p>
<p>iii)    handover between Base Station Subsystems connected to different MSCs, this is termed an Inter-MSC handover. This category can be sub-divided into three further procedures:</p>
<p>a)  the Basic Inter-MSC Handover procedure, where the MS is handed over from a controlling MSC (MSCA) to another MSC (MSCB);</p>
<p>b)  the Subsequent Inter-MSC Handover procedure, where the MS is handed over from MSCB to a third MSC (MSCB');</p>
<p>c)  the Subsequent Inter-MSC handback, where the MS is handed back from MSCB to MSCA.</p>
<p>iv) handover between Radio Network Subsystems connected to different 3G_MSCs, this is termed an Inter-3G_MSC handover/relocation. In the context of this specification the term RNS also refers to a BSS when serving a mobile station in Iu mode. This category can be divided into three further sub-procedures:</p>
<p>a)  the Inter-3G_MSC Handover procedure from UMTS to GSM, where the UE/MS is handed over from a controlling 3G_MSC (3G_MSCA) to an MSC (MSCB);</p>
<p>b)  the Inter-3G_MSC Handover procedure from GSM to UMTS, where the UE/MS is handed over from a controlling MSC (MSCA) to a 3G_MSC (3G_MSCB);</p>
<p>c)  the Inter-3G_MSC Relocation procedure, where the UE is relocated from 3G_MSCA to 3G_MSCB. This procedure can also be combined with a hard change of radio resources (Hard Handover with switch in the core network).</p>
<p>The MSC in items a) and b) this category can optionally be a 3G_MSC supporting the A-interface. The three sub-procedures also cover subsequent handover/relocation to a third MSCB' or 3G_MSCB' and subsequent handover/relocation back to MSCA or 3G_MSCA.</p>
<p>v)  handover within one BSS connected via AoIP, supported by the same MSC, this is termed "BSS Internal Handover with MSC Support". It is in fact a kind of external handover from MSC perspective and therefore a subset of i) but described in detail in separate subclause 6.3 for clarity. The MSC in this category can be any of MSC-A, MSC-B, 3G_MSC-A or 3G_MSC-B.</p>
<p>In both cases i) and iii) the same procedures as defined in the 3GPP TS 48.008 [5] and the 3GPP TS 24.008 [10] shall be used on the Ainterface and on the Radio Interface, respectively.</p>
<p>In case ii) the same procedures as defined in the 3GPP TS 25.413 [11] and the 3GPP TS 24.008 [10] shall be used on the Iuinterface. If the 3G_MSC in case ii) also supports the A-interface, the 3GPP TS 48.008 [5] and the 3GPP TS 24.008 [10] shall be used on the Ainterface.</p>
<p>In case iii) the handover procedures shall transport the A-interface messages between MSCA and MSCB described in the Mobile Application Part (MAP), 3GPP TS 29.002 [12].</p>
<p>In case iv) the handover procedures shall transport the A-interface messages between 3G_MSC and MSC described in the Mobile Application Part (MAP), 3GPP TS 29.002 [12].</p>
<p>In case iv) the relocation procedure shall transport the Iu-interface messages between 3G_MSCA and 3G_MSCB described in the Mobile Application Part (MAP), 3GPP TS 29.002 [12].</p>
<p>The interworking between the 3GPP TS 29.002 [12] protocol and the 3GPP TS 48.008 [5] protocol is described in the 3GPP TS 29.010 [8].</p>
<p>Multicall supplementary service is not applicable in GERAN Iu mode and relocation of Multicalls is therefore only possible within UTRAN.</p>
<p>Enhanced SRNS relocation is possible only within UTRAN between two RNSs conntected to the same 3G_MSC, i.e. in case ii).</p>
<p>Handovers, which take place on the same MSC are termed Intra-MSC handovers; this includes both Inter-BSS and IntraBSS handovers.</p>
<p>Handovers, which take place on the same 3G_MSC are termed Intra-3G_MSC handovers; this includes Inter-RNS handovers and optionally RNS to BSS and BSS to RNS handovers. </p>
<p>In the context of this specification the term InterSystem handover can also refer to a handover which takes place between a Base Station serving a mobile station in Iu mode and a Base Station serving a mobile in A/Gb mode.</p>
<p>"Flexible Iu interface for handover/relocation" Option (see 3GPP TS 23.221 [19], subclause 4.2.1): Up to release 99 an RNS can be connected only to one 3G_MSC. From release 4 onwards, as a network option, an RNS can have Iu interfaces to more than one MSC. Such an additional Iu interface may be selected by an MSC during an intra-PLMN relocation or intra-PLMN BSS to RNS handover procedure. This allows the MSC to use an Intra-3G_MSC handover procedure according to case ii) instead of an Inter-3G_MSC handover procedure according to case iv). The decision whether to use the Intra-3G_MSC handover procedure is implementation and configuration dependent. In a network implementing this option, a global title based on the Global RNC-Id may optionally be used for the addressing of the Iu interface messages. </p>
<p>"Intra Domain Connection of RAN Nodes to Multiple CN Nodes" Option (see 3GPP TS 23.236 [18]): when applied, a BSS or an RNS can be connected to more than one MSC.</p>
<p>The present document also covers the requirements for handover in ongoing GSM voice group calls, directed retry and handover without a circuit connection between (U)MSCs. The present document does not consider the case of handovers between radio channels on the same BSS (Intra-BSS handover) or the handover of packet radio services except for case v), the "BSS Internal Handover with MSC Support" for Intra-BSS handover in AoIP, involving the MSC as described in subclause 6.3. The Inter-RNS handover case that results in a relocation is covered by the present document, but not other Inter-RNS or Intra-RNS handover cases.</p>
<p>For voice broadcast calls in GSM, the speaker uses normal point-to-point handover procedures, whilst the listeners use idle mode cell reselection procedures, as for the voice group call listeners.</p>
<p>Voice group calls is only applicable to GSM and handover of voice group calls is therefore only possible in GSM.</p>
<p>Inter-MSC hand-over imposes a few limitations on the system. After inter-MSC hand-over:</p>
<p>-  call re-establishment is not supported.</p>
<p>The list of 3GPP TS 48.008 [5] features supported during and after Inter-MSC handover is given in 3GPP TS 49.008 [7].</p>
<p>In the Inter-MSC handover case, the interworking between a Phase 1 BSSMAP protocol possibly used by one MSC and the Phase 2 BSSMAP protocol used in the Phase 2 MAP protocol on the E-interface is performed by this MSC. </p>
<p>This specification assumes TDM based Core Network and therefore PCM, ITU-T G.711 [16] encoded, voice channel for speech calls between MSC-A and MSC-B and toward the other party. For bearer independent CS Core Network architecture implementations see 3GPP TS 23.205 [23] and 3GPP TS 23.231 [24]. For handover including Out-Of-Band transcoder control and transcoder free operation see 3GPP TS 23.153 [25]. For handover with Local Call Local Switch (LCLS) see 3GPP TS 23.284 [29].</p>
<p>NOTE 1: The message primitive names used in the SDL diagrams and message flows in the present document do not represent the actual messages specified in the GSM or 3GPP stage 3 technical specifications. The primitive names are only intended to be indicative of their use in the present document.</p>
<p>The MSC server enhanced for SRVCC and the MSC server enhanced for vSRVCC as specified in 3GPP TS 23.216 [26] follows the procedures defined for 3G_MSC-A in the present specification with the exceptions and additions as specified in subclause 4.5.</p>
<h1 id="2-references">2 References</h1>
<p>The following documents contain provisions which, through reference in this text, constitute provisions of the present document.</p>
<p>-  References are either specific (identified by date of publication, edition number, version number, etc.) or nonspecific.</p>
<p>-  For a specific reference, subsequent revisions do not apply.</p>
<p>-  For a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document <em>in the same Release as the present document</em>.</p>
<p>[1] ITU-T Recommendation Q.118: "Abnormal conditions - Special release arrangements".</p>
<p>[2] Void.</p>
<p>[2a]    3GPP TR 21.905: "3G Vocabulary".</p>
<p>[3] 3GPP TS 43.068: "Voice Group Call Service (VGCS); Stage 2".</p>
<p>[4] 3GPP TS 45.008: "Radio Subsystem Link Control".</p>
<p>[5] 3GPP TS 48.008: "Mobile Switching Centre  Base Station System (MSCBSS) Interface Layer 3 specification".</p>
<p>[6] 3GPP TS 48.058: "Base Station Controler  Base Transceiver Station (BSCBTS) Interface Layer 3 specification".</p>
<p>[7] 3GPP TS 49.008: "Application of the Base Station System Application Part (BSSAP) on the Einterface".</p>
<p>[8] 3GPP TS 29.010: "Information Element Mapping between Mobile Station  Base Station System (MS-BSS) and Base Station System  Mobileservices Switching Centre (BSSMSC); Signalling procedures and the Mobile Application Part (MAP)".</p>
<p>[9] 3GPP TS 22.129: "Handover Requirements between UMTS and GSM or other Radio Systems".</p>
<p>[10]    3GPP TS 24.008: "Mobile Radio Interface Layer 3 specification; Core Network Protocols; Stage 3".</p>
<p>[11]    3GPP TS 25.413: "UTRAN Iu interface RANAP signalling".</p>
<p>[12]    3GPP TS 29.002: "Mobile Application Part (MAP) specification".</p>
<p>[13]    3GPP TS 25.303: "UE functions and inter-layer procedures in connected mode".</p>
<p>[14]    3GPP TS 25.331: "Radio Resource Control (RRC) Protocol Specification".</p>
<p>[15]    3GPP TS 29.108: "Application of the Radio Access Network Application Part (RANAP) on the E-interface".</p>
<p>[16]    ITU-T Recommendation G.711: "Pulse code modulation (PCM) of voice frequencies".</p>
<p>[17]    3GPP TS 23.135: "Multicall supplementary service; Stage 2".</p>
<p>[18]    3GPP TS 23.236: "Intra Domain Connection of RAN Nodes to Multiple CN Nodes".</p>
<p>[19]    3GPP TS 23.221: "Architectural Requirements".</p>
<p>[20]    3GPP TS 25.401: "UTRAN Overall Description".</p>
<p>[21]    3GPP TS 23.195: "Provision of UE Specific Behaviour Information to Network Entities".</p>
<p>[22]    3GPP TS 23.172: "Technical realization of Circuit Switched (CS) multimedia service; UDI/RDI fallback and service modification".</p>
<p>[23]    3GPP TS 23.205: "Bearer-independent circuit-switched core network; Stage 2"</p>
<p>[24]    3GPP TS 23.231: "SIP-I based circuit-switched core network; Stage 2"</p>
<p>[25]    3GPP TS 23.153: "Out of band transcoder control; Stage 2".</p>
<p>[26]    3GPP TS 23.216: "Single Radio Voice Call Continuity (SRVCC)".</p>
<p>[27]    3GPP TS 29.280: "3GPP Sv interface (MME to MSC, and SGSN to MSC) for SRVCC".</p>
<p>[28]    3GPP TS 44.018: "Mobile radio interface layer 3 specification; Radio Resource Control (RRC) protocol".</p>
<p>[29]    3GPP TS 23.284: "Local Call Local Switch; Stage 2".</p>
<p>[30]    3GPP TS 24.237: "IP Multimedia (IM) Core Network (CN) subsystem (IMS) service continuity; Stage 3".</p>
<p>[31]    3GPP TS 23.237: "IP Multimedia Subsystem (IMS) Service Continuity; Stage 2".</p>
<h1 id="3-abbreviations-and-definitions">3 Abbreviations and definitions</h1>
<h1 id="31-abbreviations">3.1   Abbreviations</h1>
<p>For the purpose of the present document, the following abbreviations apply:</p>
<p>3G_MSC A third generation MSC that supports the Iu interface and optionally the A interface</p>
<p>3G_MSCA   The controlling 3G_MSC on which the call was originally established</p>
<p>3G_MSCB   The 3G_MSC to which the UE is handed over in a Basic Handover</p>
<p>3G_MSCB'  The 3G_MSC to which the UE is handed over in a Subsequent Handover</p>
<p>BSC Base Station Controller</p>
<p>BSS Base Station System</p>
<p>BSS-A   The BSS from which the MS is being handed over</p>
<p>BSS-B   The BSS to which the MS is being handed over</p>
<p>BTS Base Transceiver Station </p>
<p>CSG Closed Subscriber Group</p>
<p>CSS CSG Subscriber Server</p>
<p>E-UTRAN Evolved Universal Terrestrial Radio Access Network</p>
<p>GERAN   GSM EDGE Radio Access Network</p>
<p>ISC International Switching Centre</p>
<p>LCLS    Local Call Local Switch</p>
<p>MS  Mobile Station</p>
<p>MSC A second generation Mobile Services Switching Centre that only supports the A interface</p>
<p>MSCA   The controlling MSC on which the call was originally established</p>
<p>MSCB   The MSC to which the MS is handed over in a Basic Handover</p>
<p>MSCB'  The MSC to which the MS is handed over in a Subsequent Handover</p>
<p>MME Mobility Management Entity</p>
<p>RNC Radio Network Controller</p>
<p>RNS Radio Network Subsystem</p>
<p>SBSS    Serving BSS</p>
<p>SNA Shared Network Area</p>
<p>SRNS    Serving RNS</p>
<p>STN-SR  Session Transfer Number for SR-VCC</p>
<p>UE  A User Equipment is a terminal that supports USIM and the UMTS Uu interface</p>
<p>UE/MS   A terminal that supports USIM, SIM, the Uu interface and the Um interface </p>
<p>UESBI   UE Specific Behaviour Information</p>
<p>USIM    UMTS Subscriber Identity Module</p>
<p>Other abbreviations used in the GSM specifications are listed in 3GPP TR 21.905 [2a].</p>
<h1 id="32-definitions">3.2   Definitions</h1>
<p>The following terms are used in this Technical Specification:</p>
<p><strong>A/Gb mode</strong>: mode of operation of the MS when connected to the Core Network via GERAN and the A and/or Gb interfaces. Throughout this specification the term GSM refers to GERAN A/Gb mode<em>.</em></p>
<p><strong>AoIP-Selected codec (Target):</strong> the codec selected by the target BSS, to be used by the UE/MS in GERAN A/Gb mode after the handover to the BSS using A interface over IP.</p>
<p><strong>AoIP-Supported Codecs List (Anchor):</strong> a list of codecs for GERAN A/Gb mode derived by the anchor MSCA/3G_MSC-A based on the codecs supported by the MS and the codecs available at the anchor MSCA/3G_MSC-A for A interface over IP, and provided by MSC-A/3G_MSC-A to MSC-B/3G_MSC-B during Inter-MSC handover/relocation with MAP signalling. Within the list, the codecs are ordered in decreasing order of priority, the first entry in the list being the highest priority codec (preferred codec) and the last entry the lowest priority codec.</p>
<p><strong>AoIP-Available Codecs list (MAP):</strong> a list of codecs for GERAN A/Gb mode available for the target AoIP interface signalled via MAP.</p>
<p><strong>CSG ID list:</strong> for a specific PLMN-ID the list of CSG IDs for which the MS has a valid subscription. The CSG ID list for the registered PLMN can be derived from the CSG subscription data provided by the HLR or the CSS to the anchor MSC. The CSG ID lists for the equivalent PLMNs can be derived from the CSG subscription data provided by the HLR.</p>
<p><strong>Iu mode</strong>: mode of operation of the MS when connected to the Core Network via GERAN or UTRAN and the Iu interface. Throughout this specification the term UMTS refers to UTRAN or* GERAN Iu mode.</p>
<p><strong>Iur interface:</strong> the logical interface between two UTRAN RNSs.</p>
<p><strong>Iur-g interface:</strong> the logical interface between two BSSs or a BSC and an RNC and it is only considered in Iu mode.</p>
<p><strong>Iu Currently used codec:</strong> the codec used by the UE/MS in UTRAN or* GERAN Iu mode before a handover or SRNS relocation.</p>
<p><strong>Iu Selected codec:</strong> the codec to be used by the UE/MS in UTRAN or* GERAN Iu mode after the handover or SRNS relocation. </p>
<p><strong>Iu Supported Codecs List:</strong> a list of codecs supported by the MS and by the core network, provided by MSC-A/3G_MSC-A to 3G_MSC-B during Inter-MSC handover/relocation. The Iu Supported Codecs List may contain separate list of codecs for UTRAN Iu mode and GERAN Iu mode. Within each list, the codecs are ordered in decreasing order of priority, the first entry in the list being the highest priority codec (preferred codec) and the last entry the lowest priority codec.</p>
<p><strong>Default speech codec:</strong> In UTRAN Iu mode the default speech codec is the UMTS AMR or UMTS AMR2 codec, dependent on the capabilities of the UE/MS. For a description of how the network determines the default UMTS speech codec, see 3GPP TS 24.008 [10], subclause 5.2.1.11. If necessary, 3G_MSC-B shall use the Radio Resource Information instead of the GSM Bearer Capability, since the GSM Bearer Capability is not available in MSC-B.</p>
<p>In GERAN Iu mode the default speech codec is the AMR FR codec. </p>
<p><strong>SRVCC MSC:</strong> MSC server enhanced for SRVCC as defined in 3GPP TS 23.216 [26] subclause 5.3.2. </p>
<p><strong>vSRVCC MSC:</strong> MSC server enhanced for vSRVCC as defined in 3GPP TS 23.216 [26] subclause 5.3.2a.</p>
<p><strong>UE Specific Behaviour Information - Iu (UESBI-Iu</strong>): information that is sent from the MSC to the RAN and that can be used to derive specific information about the UE's capabilities.</p>
<p>For the purposes of the present document, the following terms and definitions given in 3GPP TS 23.216 [26] apply:</p>
<p><strong>SRVCC</strong></p>
<p><strong>vSRVCC</strong></p>
<p>For the purposes of the present document, the following terms and definitions given in 3GPP TS 23.237 [31] apply:</p>
<p><strong>SCC AS</strong></p>
<p>For the purposes of the present document, the following terms and definitions given in 3GPP TS 24.008 [10] apply:</p>
<p><strong>CSG cell</strong></p>
<p><strong>CSG ID</strong></p>
<h1 id="4-role-functional-composition-of-mscs-and-interfaces-for-handover">4 Role, functional composition of MSCs and interfaces for handover</h1>
<h1 id="41-msc-a">4.1   MSC-A</h1>
<h1 id="411-role-of-msc-a">4.1.1 Role of MSC-A</h1>
<p>In the Intra-MSC handover case (including "BSS Internal Handover with MSC Support" with AoIP), the MSCA (simply termed MSC) controls the call, the mobility management and the radio resources before, during and after an Intra-MSC handover. When BSSAP procedures have to be performed, they are initiated and driven by MSCA.</p>
<p>If AoIP is supported by MSC-A and BSS, then the BSS or the MSC-A may initiate a "BSS Internal Handover with MSC Support" as described in detail in subclause 6.3.</p>
<p>In the Inter-MSC handover case, MSCA is the MSC which controls the call and the mobility management of the Mobile during the call, before, during and after a basic or subsequent handover. When BSSAP procedures related to dedicated resources have to be performed towards the MS, they are initiated and driven by MSCA. The MSCA - MSCB interface works as a MSC - BSS interface for a subset of BSSMAP procedures. These BSSMAP procedures, described in 3GPP TS 49.008 [7] are only those related to dedicated resources. The DTAP signalling is relayed transparently by MSCB between MSCA and the MS.</p>
<p>During a basic handover, MSCA initiates and controls all the handover procedure, from its initiation (reception of Handover Required from BSS-A on A-interface) until its completion (reception of Handover Complete from MSCB on E-interface).</p>
<p>For handover to an area where "Intra Domain Connection of RAN Nodes to Multiple CN Nodes" is applied, MSC-A can have multiple target CN nodes for each handover target in a pool-area as specified in 3GPP TS 23.236 [18].</p>
<p>During a subsequent handover back to MSCA, MSCA acts as a BSS towards MSCB, which controls the handover procedure until the termination in MSCA of the handover radio resources allocation (sending of the Handover Request Acknowledge to MSCB from MSCA). Then all handover related messages shall terminate at MSCA (e.g. Handover Detect/Complete from BSS-B, Handover Failure from BSS-A).</p>
<p>During a subsequent handover to a third MSC, MSCA works towards MSCB' as described above in the basic handover paragraph and towards MSCB as described above in subsequent handover paragraph.</p>
<p>In the Inter-System, inter-MSC handover case, MSCA is the MSC which controls the call and the mobility management of the Mobile during the call, before, during and after a basic or subsequent handover. When BSSAP procedures related to dedicated resources have to be performed towards the MS, they are initiated and driven by MSCA. The MSCA - 3G_MSCB interface works as a MSC - BSS interface for a subset of BSSMAP procedures. These BSSMAP procedures, described in 3GPP TS 49.008 [7] are only those related to dedicated resources. The DTAP signalling is relayed transparently by 3G_MSCB between MSCA and the MS.</p>
<p>During a basic inter-system handover, MSCA initiates and controls all the handover procedure, from its initiation (reception of Handover Required from BSS-A on A-interface) until its completion (reception of Handover Complete from 3G_MSCB on E-interface).</p>
<p>During a subsequent inter-system handover back to MSCA, MSCA acts as a BSS towards 3G_MSCB, which controls the handover procedure until the termination in MSCA of the handover radio resources allocation (sending of the Handover Request Acknowledge to 3G_MSCB from MSCA). Then all handover related messages shall terminate at MSCA (e.g. Handover Detect/Complete from BSS-B, Handover Failure from BSS-A).</p>
<p>During a subsequent inter-system handover to a third MSC, MSCA works towards 3G_MSCB' as described above in the basic inter-system handover paragraph and towards 3G_MSCB as described above in subsequent inter-system handover paragraph.</p>
<p>If MSC-A supports the "Provision of UE Specific Behaviour Information to Network Entities" (see 3GPP TS 23.195 [21]), it shall send UESBI-Iu to the target MSC during basic and subsequent handover, and basic and subsequent inter-system handover.</p>
<p>MSC-A may support inter-MSC inter-system handover to a CSG cell. If MSC-A supports handover to a CSG cell, the serving BSS is served by MSC-A and provides a CSG ID for the target cell, and the call is not an emergency call, then MSC-A checks the CSG membership of the UE for the target cell using the CSG subscription data provided by the HLR or the CSS before proceeding with the handover procedure. If there is no subscription data for this CSG ID or the CSG subscription for the CSG ID has expired, the MSC-A considers the membership check as failed. If for a specific PLMN-ID an entry with the same CSG ID exists in both CSS subscription data and HLR subscription data, the CSG subscription data from the HLR shall take precedence over the data from CSS. </p>
<p>NOTE 1: If MSC-A does not support CSG membership checking, and a CSG cell is configured as possible handover target, MSC-A will proceed with the handover to the CSG cell. If the CSG cell is not configured as possible handover target, MSC-A will not proceed with the handover.</p>
<p>For handover of an emergency call to a CSG cell, MSC-A shall skip the CSG membership check and proceed with the handover procedure.</p>
<p>For inter-PLMN handover to a CSG cell, if the HLR or the CSS provided a CSG ID list for the target PLMN, MSC-A shall validate the CSG membership of the UE in the target CSG cell using the CSG ID list for the target PLMN.</p>
<p>NOTE 2: Due to certain restrictions in the access stratum, inter-PLMN handover to a CSG cell in a PLMN which is not an equivalent PLMN for the UE is not supported; therefore, the target PLMN will always be an equivalent PLMN.</p>
<p>If the HLR did not provide any CSG ID lists for the equivalent PLMNs, then based on operator's configuration the MSC-A may allow the handover by validating the CSG membership of the UE in the target CSG cell using the CSG ID list of the registered PLMN-ID. Otherwise, MSC-A shall reject the handover due to no CSG subscription information of the target PLMN-ID available.</p>
<p>NOTE 3: If MSC-A uses the CSG ID list of the registered PLMN-ID for membership validation, as the UE is using the CSG ID list of the equivalent PLMN, inter-PLMN handover to a CSG cell of an equivalent PLMN can only occur if the CSG ID of the cell is both in the CSG ID list of the registered PLMN used by MSC-A and in the CSG ID list of the equivalent PLMN used by the UE. If the HLR provided CSG ID lists for the equivalent PLMNs, this restriction does not apply.</p>
<p>For subsequent inter-MSC handover to a third 3G_MSC-B', if MSC-B/3G_MSC-B belongs to a different PLMN than MSC-A, then as an operator option MSC-A may perform an additional CSG membership check for the target cell.</p>
<h1 id="412-functional-composition-of-msc-a-and-its-interfaces-for-handover">4.1.2 Functional composition of MSCA and its interfaces for handover</h1>
<p>In order to simplify the description of the handover procedures the controlling MSC (MSCA) can be considered to be composed of five functional units, as shown in figure 1.</p>
<p>Signalling functions:</p>
<p>\1) BSC/MSC (MS/BSC) Procedures MSCA. This unit is used to control the signalling between the MSC, BSC and MS. Interface A' is the connection to the old BSC and interface A'' is the connection to the new BSC, when an Intra-MSC handover takes place. Interface x represents the interworking connection to the Handover Control Procedures MSCA.</p>
<p>\2) Call Control Procedures MSCA. This unit is used to control the call. Interface B' is used for normal call control procedures. When a Basic handover from MSCA to MSCB is to be performed then interface B'' is employed to provide a signalling and call control connection to MSCB. If a Subsequent handover to MSCB' is to be performed then interface B''' is used. Similarly, when a Basic inter-system handover from MSCA to 3G_MSCB is to be performed, then interface B'' is employed to provide a signalling and call control connection to 3G_MSCB. If a subsequent inter-system handover to 3G_MSCB' is to be performed, then interface B''' is used.</p>
<p>\3) Handover Control Procedures MSCA. This unit provides both the overall control of the handover procedure and interworking between the internal interfaces (x, y and z).</p>
<p>\4) MAP Procedures MSCA. This unit is responsible for controlling the exchange of MAP messages between MSCs during an Inter-MSC handover, or between MSCA and 3G_MSCB during an Inter-system Inter-MSC handover. This unit communicates with the Handover Control Procedures MSCA via interface z.</p>
<p>Switching functions:</p>
<p>\5) Switch and Handover Device MSCA. For all calls, except for ongoing voice group calls (see 3GPP TS 43.068 [3] for a definition) this unit is responsible for connecting the new path into the network via interface B'. In the case of ongoing voice group calls this unit is responsible for maintaining the connection between the down link group call channels and the active uplink. In specific cases it may be unnecessary to take any explicit action in the MSC concerning the handover device. The handover device interconnections are illustrated in figure 2.</p>
<p><img alt="" src="../23009-g00.002.png" /></p>
<p><strong>Figure 1: Functional composition of the controlling MSC (MSC-A) for supporting handover</strong></p>
<p>For MS to MS calls in the same MSC the configuration in figure 2b applies. In this case interface B'' is internal to MSCA and does not connect to another MSC.</p>
<p>The handover device can either be a three-party bridge or a switching facility without three-party connection capabilities. For a three-party bridge configuration the states of the handover device are as shown in table 1. The threeparty configuration exists in the intermediate state. This type of handover device may reduce the interruption time. However, this may require noise reduction if one of the radio channels is unterminated at some time in the intermediate state.</p>
<p>For a handover device consisting of a simple switch there will be no intermediate state.</p>
<p><strong>Table 1: States of the handover device</strong></p>
<table>
<thead>
<tr>
<th align="center"></th>
<th align="center"></th>
<th align="center"></th>
<th align="center"><strong>Resulting</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><strong>Case</strong></td>
<td align="center"><strong>Initial</strong></td>
<td align="center"><strong>Intermediate</strong></td>
<td align="center"><strong>Connection</strong></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><strong>Connection</strong></td>
<td align="center"><strong>Connection</strong></td>
<td align="center"><strong>Successful</strong></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"><strong>Procedure</strong></td>
</tr>
<tr>
<td align="center">Figure 2a)</td>
<td align="center">B' to A'</td>
<td align="center">B' to A' and A''</td>
<td align="center">B' to A''</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">Figure 2b)</td>
<td align="center">B' to A'</td>
<td align="center">B' to A' and B''</td>
<td align="center">B' to B''</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">Figure 2c)</td>
<td align="center">B' to B''</td>
<td align="center">B' to B''and B'''</td>
<td align="center">B' to B'''</td>
</tr>
</tbody>
</table>
<p><img alt="" src="../23009-g00.003.png" /></p>
<p>NOTE:   In a) and b) A' is released after handover;</p>
<p><code></code>In c) B'' is released after handover.</p>
<p><strong>Figure 2: Connections in the handover device (Unit 5)</strong></p>
<h1 id="42-msc-b">4.2   MSCB</h1>
<h1 id="421-role-of-msc-b">4.2.1 Role of MSCB</h1>
<p>In the Intra-MSC-B handover cases (including "BSS Internal Handover with MSC Support" with AoIP), the MSCB keeps the control of the whole Intra-MSC-B handover procedure.</p>
<p>MSC-B notifies MSC-A or 3G_MSC-A of a successful Intra-MSC-B handover completion by using the A-HANDOVER-PERFORMED message.</p>
<p>If AoIP is supported by MSC-B and BSS, then the BSS or the MSC-B may initiate a "BSS Internal Handover with MSC Support" as described in detail in subclause 6.3.</p>
<p>The role of MSCB is also to provide transcoder resources, if AoIP is supported and no transcoder is inserted in the BSS.</p>
<p>In the Inter-MSC handover case, the role of MSCB (MSCB') is only to provide radio resources control within its area. This means that MSCB keeps control of the radio resources connection and release towards BSS-B. MSCB will do some processing on the BSSMAP information received on the E-interface or A-interface whereas it will relay the DTAP information transparently between Ainterface and E-interface. MSCA initiates and drives a subset of BSSMAP procedures towards MSCB, while MSCB controls them towards its BSSs to the extent that MSCB is responsible for the connections of its BSSs. The release of the dedicated resources between MSCB and BSS-B is under the responsibility of MSCB and BSSB, and is not directly controlled by MSCA. When clearing is to be performed due to information received from BSS-B, MSCB shall transfer this clearing indication to MSCA, to clear its connection with BSS-B, to terminate the dialogue with MSCA through the Einterface, and to release its circuit connection with MSCA, if any. In the same way, the release of the connection to its BSS-B, is initiated by MSCB, when the dialogue with MSCA ends normally and a release is received from the circuit connection with MSCA, if any, or when the dialogue with the MSCA ends abnormally.</p>
<p>When a release is received by MSCB for the circuit connection with MSCA then MSCB shall release the circuit connection.</p>
<p>In the Inter-system Inter-MSC handover case, the role of MSCB (MSCB') is only to provide radio resources control within its area. This means that MSCB keeps control of the radio resources connection and release towards BSS-B. MSCB will do some processing on the BSSMAP information received on the E-interface or A-interface whereas it will relay the DTAP information transparently between Ainterface and E-interface. 3G_MSCA initiates and drives a subset of BSSMAP procedures towards MSCB, while MSCB controls them towards its BSSs to the extent that MSCB is responsible for the connections of its BSSs. The release of the dedicated resources between MSCB and BSS-B is under the responsibility of MSCB and BSSB, and is not directly controlled by 3G_MSCA. When clearing is to be performed due to information received from BSS-B, MSCB shall transfer this clearing indication to 3G_MSCA, to clear its connection with BSS-B, to terminate the dialogue with 3G_MSCA through the Einterface, and to release its circuit connection with 3G_MSCA, if any. In the same way, the release of the connection to its BSS-B, is initiated by MSCB, when the dialogue with 3G_MSCA ends normally and a release is received from the circuit connection with MSCA, if any, or when the dialogue with the MSCA ends abnormally.</p>
<p>When a release is received by MSCB for the circuit connection with 3G_MSCA then MSCB shall release the circuit connection.</p>
<p>For subsequent inter-MSC handover to an area where "Intra Domain Connection of RAN Nodes to Multiple CN Nodes" is applied, MSC-B can have multiple target CN nodes for each handover target in a pool-area as specified in 3GPP TS 23.236 [18].</p>
<p>MSC-B may support subsequent inter-MSC inter-system handover to a CSG cell. If MSC-B supports handover to a CSG cell, the serving BSS is served by MSC-B and provides a CSG ID for the target cell, and the call is not an emergency call, then MSC-B checks the CSG membership of the UE for the target cell using the CSG subscription data provided by the anchor MSC-A or 3G_MSC-A during the basic inter-MSC handover before proceeding with the subsequent handover procedure. If there is no subscription data for this CSG ID or the CSG subscription for the CSG ID has expired, MSC-B considers the membership check as failed.</p>
<p>NOTE 1: If MSC-B does not support CSG membership checking, and a CSG cell is configured as possible handover target, MSC-B will proceed with the subsequent handover to the CSG cell. If the CSG cell is not configured as possible handover target, MSC-B will not proceed with the handover.</p>
<p>For subsequent handover of an emergency call to a CSG cell, MSC-B shall skip the CSG membership check and proceed with the handover procedure.</p>
<p>For subsequent inter-PLMN handover to a CSG cell, if the anchor MSC-A or 3G_MSC-A provided a CSG ID list for the target PLMN during the basic inter-MSC handover, MSC-B shall validate the CSG membership of the UE in the target CSG cell using the CSG ID list for the target PLMN. </p>
<p>NOTE 2: Due to certain restrictions in the access stratum, inter-PLMN handover to a CSG cell in a PLMN which is not an equivalent PLMN for the UE is not supported; therefore, the target PLMN will always be an equivalent PLMN.</p>
<p>If the anchor MSC-A or 3G_MSC-A provided only a CSG ID list for the PLMN of MSC-B, then based on operator's configuration the MSC-B may allow the handover by validating the CSG membership of the UE in the target CSG cell using this CSG ID list. Otherwise, MSC-B shall reject the handover due to no CSG subscription information of the target PLMN-ID available.</p>
<p>NOTE 3: If MSC-B uses the CSG ID list of the PLMN of MSC-B for membership validation, as the UE is using the CSG ID list of the equivalent PLMN, inter-PLMN handover to a CSG cell of an equivalent PLMN can only occur if the CSG ID of the cell is both in the CSG ID list of the PLMN of MSC-B which is used by MSC-B and in the CSG ID list of the equivalent PLMN which is used by the UE. If MSC-A or 3G_MSC-A provided a CSG ID list for the target PLMN of the subsequent inter-MSC handover, this restriction does not apply.</p>
<h1 id="422-functional-composition-of-msc-b-and-its-interfaces-for-handover">4.2.2 Functional composition of MSCB and its interfaces for handover</h1>
<p>The functional composition of an MSC acting as MSCB is essentially the same as that of MSCA. However, there are some differences. The functional units are as follows (see figure 3).</p>
<p>Signalling functions:</p>
<p>\1) BSC/MSC (MS/BSC) Procedures MSCB. This unit is used to control the signalling between the MSC, BSC and MS. Interface A'' is the connection to the new BSC, when an Intra-MSC handover takes place. Interface x represents the interworking connection to the Handover Control Procedures MSCB.</p>
<p>\2) Call Control Procedures MSCB. This unit is used for normal call control and signalling to MSCA, or 3G_MSCA in the case of inter-system inter-MSC handover.</p>
<p>\3) Handover Control Procedures MSCB. This unit provides both the overall control of the handover procedure and interworking between the internal interfaces (x, y and z) in MSCB.</p>
<p>\4) MAP Procedures MSCB. This unit is responsible for controlling the exchange of MAP messages between MSCA, or 3G_MSCA,  and MSCB and for signalling to the VLR in MSCB.</p>
<p>Switching functions:</p>
<p>\5) Switch MSCB. For all calls, except ongoing voice group calls (see 3GPP TS 43.068 [3] for a definition) this unit is responsible, with BSS-B, for connecting the circuit from MSCA, or 3G_MSCA, to BSS-B. This unit may also need to act as a handover device for Intra-MSC handovers controlled by MSCB. In the case of ongoing voice group calls this unit is responsible for maintaining the connection between the group member currently assigned the uplink and the distribution device. In specific cases it may be unnecessary to take any explicit action in the MSC concerning the handover device.</p>
<p><img alt="" src="../23009-g00.004.png" /></p>
<p><strong>Figure 3: Functional composition of MSCB for supporting handover</strong></p>
<h1 id="43-3g_msc-a">4.3   3G_MSCA</h1>
<p>For roles and functional composition of the 3G_MSCA working as pure GSM MSC, please see previous clause ("MSCA").</p>
<h1 id="431-role-of-3g_msc-a">4.3.1 Role of 3G_MSCA</h1>
<p>In the Intra-3G_MSC-A handover/relocation case, 3G_MSCA controls the call, the mobility management and the radio resources before, during and after an Intra-3G_MSC-A handover/relocation. When RANAP or BSSMAP procedures have to be performed, they are initiated and driven by 3G_MSCA.</p>
<p>In a network implementing the "Flexible Iu interface for handover/relocation" option, 3G_MSC-A may optionally use a global title based on the Global RNC-Id for the addressing of the Iu interface messages towards the target RNC.</p>
<p>For handover/relocation to an area where "Intra Domain Connection of RAN Nodes to Multiple CN Nodes" is applied, 3G_MSC-A can have multiple target CN nodes for each handover/relocation target in a pool-area as specified in 3GPP TS 23.236 [18].</p>
<p>In the case of intra-3G_MSC-A handover of a speech call, 3G_MSCA controls the transcoder in the core network. The 3G_MSCA determines, if a transcoder is required to be inserted or released in the CN. </p>
<p>If AoIP is supported by 3G_MSC-A and BSS, then the BSS or the 3G_MSC-A may initiate a "BSS Internal Handover with MSC Support" as described in detail in subclause 6.3.</p>
<p>In the case of Inter-3G_MSC relocation, 3G_MSC-A links out the transcoder.</p>
<p>In the Inter-3G_MSC relocation case, 3G_MSCA is the 3G_MSC that controls the call and the mobility management of the UE during the call, before, during and after a basic or subsequent relocation. When RANAP procedures related to dedicated resources have to be performed towards the UE, they are initiated and driven by 3G_MSCA. The 3G_MSCA - 3G_MSCB interface works as a 3G_MSC - RNS interface for the RANAP procedures. The Direct Transfer signalling is relayed transparently by 3G_MSCB between 3G_MSCA and the UE.</p>
<p>During a successful relocation the order to perform location reporting at change of Service Area is not transferred to the target RNS. In the Intra-3G_MSC-A relocation case, the 3G_MSC-A re-issues the Location Reporting Control towards the target RNS. In the Inter-3G_MSC relocation case, 3G_MSC-A keeps the control of the Location Report Control procedure. However, re-issuing the Iu-LOCATION-REPORTING-CONTROL messages due to subsequent Intra-3G_MSC-B relocations is the responsibility of 3G_MSC-B.</p>
<p>During a basic relocation, 3G_MSCA initiates and controls all the relocation procedure, from its initiation (reception of Relocation Required from RNS-A on Iu-interface) until its completion (reception of Relocation Complete from 3G_MSCB on E-interface).</p>
<p>During a subsequent relocation back to 3G_MSCA, 3G_MSCA acts as an RNS towards 3G_MSCB, which controls the relocation procedure until the termination in 3G_MSCA of the handover radio resources allocation (sending of the Relocation Request Acknowledge to 3G_MSCB from 3G_MSCA). Then all relocation related messages shall terminate at 3G_MSCA (e.g. Relocation Detect/Complete from RNS-B, Relocation Cancel from RNS-A).</p>
<p>During a subsequent relocation to a third 3G_MSC-B', 3G_MSCA works towards 3G_MSCB' as described above in the basic relocation paragraph and towards 3G_MSCB as described above in subsequent relocation paragraph.</p>
<p>In the Inter-System, inter-3G_MSC handover case, 3G_MSCA is the 3G_MSC which controls the call and the mobility management of the UE/MS during the call, before, during and after a basic or subsequent inter-system handover. When BSSAP procedures related to dedicated resources have to be performed towards the UE/MS, they are initiated and driven by 3G_MSCA. The 3G_MSCA – MSCB interface works as a 3G_MSC – BSS interface for a subset of BSSMAP procedures. These BSSMAP procedures described in 3GPP TS 49.008 [7] are those related to dedicated resources. The DTAP signalling is relayed transparently by MSCB between 3G_MSCA and the UE/MS.</p>
<p>During a basic inter-system UMTS to GSM handover, 3G_MSCA initiates and controls all the handover procedure, from its initiation (reception of Relocation Required from RNS-A on Iu-interface) until its completion (reception of Handover Complete from MSCB on E-interface).</p>
<p>During a subsequent inter-system UMTS to GSM handover back to 3G_MSCA, 3G_MSCA acts as a BSS towards 3G_MSCB, which controls the handover procedure until the termination in 3G_MSCA of the handover radio resources allocation (sending of the Handover Request Acknowledge to 3G_MSCB from 3G_MSCA). Then all handover related messages shall terminate at 3G_MSCA (e.g. Handover Detect/Complete from BSS-B, Relocation  Cancel from RNS-A).</p>
<p>During a subsequent inter-system UMTS to GSM handover to a third 3G_MSC, 3G_MSCA works towards MSCB' as described above in the basic inter-system handover paragraph and towards 3G_MSCB as described above in subsequent inter-system handover paragraph.</p>
<p>During a basic inter-system GSM to UMTS handover, 3G_MSCA initiates and controls all the handover procedure, from its initiation (reception of Handover Required from BSS-A on A-interface) until its completion (reception of Handover Complete from 3G_MSCB on E-interface).</p>
<p>During a subsequent inter-system GSM to UMTS handover back to 3G_MSCA, 3G_MSCA acts as an RNS towards MSCB, which controls the handover procedure until the termination in 3G_MSCA of the handover radio resources allocation (sending of the Handover Request Acknowledge to MSCB from 3G_MSCA). Then all handover related messages shall terminate at 3G_MSCA (e.g. Relocation Detect/Complete from RNS-B, Handover Failure from BSSA).</p>
<p>During a subsequent inter-system GSM to UMTS handover to a third 3G_MSC, 3G_MSCA works towards 3G_MSCB' as described above in the basic inter-system handover paragraph and towards MSCB as described above in subsequent inter-system handover paragraph.</p>
<p>3G_MSC-A may assign a priority level defined as RAB parameter in 3GPP TS 25.413 [11] for each bearer. In case of relocation of a multicall configuration the 3G_MSC-B or the target RNC shall select the bearers to be handed over according to the priority level, if the target cell is not able to accommodate all bearers. If a selection has to be made between bearers of the same priority level, then the selection criteria are implementation dependent.</p>
<p>For network sharing (see 3GPP TS 25.401 [20], subclause 7.2.3) 3G MSC-A shall send the SNA information to 3G_MSC-B except for emergency calls.</p>
<p>If 3G_MSC-A supports the optional supplementary service Multicall (See 3GPP TS 23.135 [17]) and UE is engaged with multiple bearers the following description applies:</p>
<p>-  In the Intra-3G_MSC relocation case, the 3G-MSC-A tries to relocate all bearers to a new RNS.</p>
<p>-  In the basic relocation case, the 3G-MSC-A tries to relocate all bearers to 3G_MSC-B. If 3G_MSC-A receives an indication that the 3G_MSC-B does not support multiple bearers, then 3G_MSC-A shall be able to select one bearer to be handed over according to 3GPP TS 22.129 [9] and tries again to relocate the selected bearer.</p>
<p>-  In the subsequent relocation to a third 3G_MSC-B' case, the 3G-MSC-A tries to relocate all bearers to 3G_MSC-B'. If 3G_MSC-A receives an indication that the 3G_MSC-B' does not support multiple bearers, then 3G_MSC-A shall be able to select one bearer to be handed over according to 3GPP TS 22.129 [9] and tries again to relocate the selected bearer.</p>
<p>-  In the Intra-3G_MSC inter-system UMTS to GSM handover case and the basic inter-system UMTS to GSM handover case, the 3G_MSC-A shall be able to select one bearer to be handed over according to 3GPP TS 22.129 [9] and tries to handover the selected bearer.</p>
<p>-  In all cases described above, 3G_MSC-A shall release some calls which has been carried by the bearers failed to set up in new RNS or the bearers not to be handed over.</p>
<p>If 3G_MSC-A supports the "Provision of UE Specific Behaviour Information to Network Entities" (see 3GPP TS 23.195 [21]), it shall send UESBI-Iu to the RNS-B during intra-3G_MSC handover/relocation and during subsequent inter-3G_MSC handover/relocation back to 3G_MSC-A. Furthermore, 3G_MSC-A shall send UESBI-Iu to the target MSC during basic and subsequent inter-MSC handover, and basic and subsequent inter-3G_MSC handover/relocation.</p>
<p>For a SCUDIF call (see 3GPP TS 23.172 [22]) 3G_MSC-A may send information of the alternative radio access bearer to the target RNS during the intra-3G_MSC handover/relocation and to the target MSC during basic and subsequent inter-3G_MSC handover/relocation or assignment.</p>
<p>3G_MSC-A may support inter-system handover or SRNS relocation to a CSG cell. If 3G_MSC-A supports handover/relocation to a CSG cell, the serving BSS or RNS is served by 3G_MSC-A and provides a CSG ID for the target cell, and the call is not an emergency call, then 3G_MSC-A checks the CSG membership of the UE for the target cell using the CSG subscription data provided by the HLR or the CSS before proceeding with the handover/relocation procedure. If there is no subscription data for this CSG ID or the CSG subscription for the CSG ID has expired, the 3G_MSC-A considers the membership check as failed. If for a specific PLMN-ID the same CSG ID exists in both CSS subscription data and HLR subscription data, the CSG subscription data from the HLR shall take precedence over the data from CSS.</p>
<p>NOTE 1: If 3G_MSC-A does not support CSG membership checking, and a CSG cell is configured as possible handover target, 3G_MSC-A will proceed with the handover/relocation to the CSG cell; if the CSG cell is not configured as possible handover target, 3G_MSC-A will not proceed with the handover/relocation.</p>
<p>For handover of an emergency call to a CSG cell, 3G_MSC-A shall skip the CSG membership check and proceed with the handover/relocation procedure.</p>
<p>For inter-PLMN handover/relocation to a CSG cell, if the HLR or the CSS provided a CSG ID list for the target PLMN, 3G_MSC-A shall validate the CSG membership of the UE in the target CSG cell using the CSG ID list for the target PLMN.</p>
<p>NOTE 2: Due to certain restrictions in the access stratum, inter-PLMN handover to a CSG cell in a PLMN which is not an equivalent PLMN for the UE is not supported; therefore, the target PLMN will always be an equivalent PLMN.</p>
<p>If the HLR did not provide any CSG ID lists for the equivalent PLMNs, then based on operator's configuration the 3G_MSC-A may allow the handover/relocation by validating the CSG membership of the UE in the target CSG cell using the CSG ID list of the registered PLMN-ID. Otherwise, 3G_MSC-A shall reject the handover/relocation due to no CSG subscription information of the target PLMN-ID available.</p>
<p>NOTE 3: If 3G_MSC-A uses the CSG ID list of the registered PLMN-ID for membership validation, as the UE is using the CSG ID list of the equivalent PLMN, inter-PLMN handover to a CSG cell of an equivalent PLMN can only occur if the CSG ID of the cell is both in the CSG ID list of the registered PLMN used by 3G_MSC-A and in the CSG ID list of the equivalent PLMN used by the UE. If the HLR provided CSG ID lists for the equivalent PLMNs, this restriction does not apply.</p>
<p>For subsequent inter-MSC handover/relocation back to 3G_MSC-A or to a third 3G_MSC-B', if MSC-B/3G_MSC-B belongs to a different PLMN than 3G_MSC-A, then as an operator option MSC-A may perform an additional CSG membership check for the target cell.</p>
<h1 id="432-functional-composition-of-3g_msc-a-and-its-interfaces-for-handoverrelocation">4.3.2 Functional composition of 3G_MSCA and its interfaces for handover/relocation</h1>
<p>In order to simplify the description of the handover/relocation procedures the controlling 3G_MSC (3G_MSCA) can be considered to be composed of five functional units, as shown in figure 4.</p>
<p>Signalling functions:</p>
<p>\1) RNC/BSC/3G_MSC (UE/MS/RNC/BSC) Procedures 3G_MSCA. This unit is used to control the signalling between the 3G_MSC, RNC or BSC and UE/MS. Interface Iu' is the connection to the old RNC and interface Iu'' is the connection to the new RNC, when an Intra-3G_MSC relocation takes place. Interface Iu' is the connection to the old RNC and interface A'' is the connection to the new BSC, when an Intra-3G_MSC UMTS to GSM handover takes place. Interface A' is the connection to the old BSC and interface Iu'' is the connection to the new RNC, when an Intra-3G_MSC GSM to UMTS handover takes place. Interface x represents the interworking connection to the Handover/Relocation Control Procedures 3G_MSCA.</p>
<p>\2) Call Control Procedures 3G_MSCA. This unit is used to control the call. Interface B' is used for normal call control procedures. When a Basic relocation from 3G_MSCA to 3G_MSCB is to be performed then interface B'' is employed to provide a signalling and call control connection to 3G_MSCB. If a Subsequent handover/relocation to 3G_MSCB' is to be performed then interface B''' is used. Similarly, when a Basic inter-system handover from 3G_MSCA to 3G_MSCB is to be performed, then interface B'' is employed to provide a signalling and call control connection to 3G_MSCB. If a Subsequent inter-system handover to 3G_MSCB' is to be performed then interface B''' is used.</p>
<p>\3) Handover/Relocation Control Procedures 3G_MSCA. This unit provides both the overall control of the handover/relocation procedure and interworking between the internal interfaces (x, y and z).</p>
<p>\4) MAP Procedures 3G_MSCA. This unit is responsible for controlling the exchange of MAP messages between 3G_MSCs during an Inter-3G_MSC handover/relocation, or between 3G_MSCA and MSCB during an Inter-system Inter-3G_MSC handover. This unit communicates with the Handover/Relocation Control Procedures 3G_MSCA via interface z.</p>
<p>Switching functions:</p>
<p>\5) Switch and Handover/Relocation Device 3G_MSCA. For all calls this unit is responsible for connecting the new path into the network via interface B'. In specific cases it may be unnecessary to take any explicit action in the 3G_MSC concerning the handover/relocation device. The handover/relocation device interconnections are illustrated in figure 5.</p>
<p><img alt="" src="../23009-g00.005.png" /></p>
<p><strong>Figure 4: Functional composition of the controlling 3G_MSC (3G_MSCA)
for supporting handover/relocation</strong></p>
<p>For UE/MS to UE/MS calls in the same 3G_MSC the configuration in figure 5b applies. In this case interface B'' is internal to 3G_MSCA and does not connect to another 3G_MSC.</p>
<p>The handover/relocation device can be either a three-party bridge or a switching facility without three-party connection capabilities. For a three-party bridge configuration the states of the handover/relocation device are as shown in table 2. The three-party configuration exists in the intermediate state. This type of handover/relocation device may reduce the interruption time. However, this may require noise reduction if one of the radio channels is unterminated at some time in the intermediate state.</p>
<p>For a handover/relocation device consisting of a simple switch there will be no intermediate state.</p>
<p><strong>Table 2: States of the handover/relocation device</strong></p>
<table>
<thead>
<tr>
<th align="center"></th>
<th align="center"></th>
<th align="center"></th>
<th align="center"><strong>Resulting</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><strong>Case</strong></td>
<td align="center"><strong>Initial</strong></td>
<td align="center"><strong>Intermediate</strong></td>
<td align="center"><strong>Connection</strong></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><strong>Connection</strong></td>
<td align="center"><strong>Connection</strong></td>
<td align="center"><strong>Successful</strong></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"><strong>Procedure</strong></td>
</tr>
<tr>
<td align="center">Figure 5a)</td>
<td align="center"><p>B' to Iu' </p><p>B' to Iu' </p><p>B' to A' </p></td>
<td align="center"><p>B' to Iu' and Iu'' </p><p>B' to Iu' and A'' </p><p>B' to A'  and Iu'' </p></td>
<td align="center"><p>B' to Iu'' </p><p>B' to A'' </p><p>B' to Iu'' </p></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">Figure 5b)</td>
<td align="center">B' to Iu'</td>
<td align="center">B' to Iu' and B''</td>
<td align="center">B' to B''</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">Figure 5c)</td>
<td align="center">B' to B''</td>
<td align="center">B' to B''and B'''</td>
<td align="center">B' to B'''</td>
</tr>
</tbody>
</table>
<p><img alt="" src="../23009-g00.006.png" /></p>
<p>NOTE:   In a) and b) Iu' is released after handover/relocation;</p>
<p><code></code>In c) B'' is released after handover/relocation.</p>
<p><strong>Figure 5: Connections in the handover/relocation device (Unit 5)</strong></p>
<h1 id="44-3g_msc-b">4.4   3G_MSCB</h1>
<p>For roles and functional composition of the 3G_MSCB working as pure GSM MSC, please see previous clause ("MSCB").</p>
<h1 id="441-role-of-3g_msc-b">4.4.1 Role of 3G_MSCB</h1>
<p>In the Intra-3G_MSC-B handover/relocation case, the 3G_MSCB keeps the control of the whole Intra-3G_MSC-B handover/relocation procedure. 3G_MSC-B notifies MSC-A or 3G_MSC-A of intra-3G_MSC-B InterSystem handover and intra GSM handovers (including "BSS Internal Handover with MSC Support"), by using the A-HANDOVER-PERFORMED message.</p>
<p>-  If the security algorithms have been changed during an intra-3G_MSC-B SRNS relocation; or</p>
<p>-  if the codec type or codec modes of the Iu Selected codec have been changed during this relocation and the Iu Supported Codecs List was received by 3G_MSC-B before, </p>
<p>then 3G_MSC-B shall indicate the changed parameters, i.e. the selected UMTS algorithm(s) and/or the codec type and codec modes of the Iu Selected codec, to MSC-A or 3G_MSC-A in the MAP-PROCESS-ACCESS-SIGNALLING request.</p>
<p>Encapsulated in the MAP-PROCESS-ACCESS-SIGNALLING request 3G_MSC-B shall send:</p>
<p>-  an A-HANDOVER-PERFORMED message, when encapsulated BSSAP is used on the E interface; or</p>
<p>-  an Iu-LOCATION-REPORT message, when encapsulated RANAP is used on the E interface.</p>
<p>On reception of an order to perform location reporting at change of Service Area from 3G_MSC-A, 3G_MSC-B shall be responsible to re-issue the Iu-LOCATION-REPORTING-CONTROL message after subsequent Intra-3G_MSC-B relocations/handovers. This shall be performed immediately after the successful completion of the Relocation Resource Allocation procedure.</p>
<p>In a network implementing the "Flexible Iu interface for handover/relocation" option, in the Intra-3G_MSC handover/relocation case, 3G_MSC-B may optionally use a global title based on the Global RNC-Id for the addressing of the Iu interface messages towards the target RNC.</p>
<p>If AoIP is supported by 3G_MSC-B and BSS, then the BSS or the 3G_MSC-B may initiate a "BSS Internal Handover with MSC Support" as described in detail in subclause 6.3.</p>
<p>If AoIP is supported and no transcoder is inserted in the BSS, then 3G_MSCB shall provide transcoder resources.</p>
<p>For subsequent inter-MSC handover/relocation to an area where "Intra Domain Connection of RAN Nodes to Multiple CN Nodes" is applied, 3G_MSC-B can have multiple target CN nodes for each handover target in a pool-area as specified in 3GPP TS 23.236 [18].</p>
<p>The role of 3G_MSCB is also to provide transcoder resources. For speech calls in UMTS, 3G_MSC-B shall select an Iu Selected codec from the Iu Supported Codecs List provided by MSC-A/3G_MSC-A in the MAP-PREPARE-HANDOVER request. If the Iu Supported Codecs List was not received or 3G_MSC-B does not support the selection of codec based on the Iu-Supported Codecs List, 3G_MSC-B shall select the appropriate default speech codec.</p>
<p>If an intra-3G_MSC-B intersystem handover to UMTS is performed, the Iu Supported Codecs List was received by 3G_MSC-B during the basic inter MSC handover/relocation procedure and 3G_MSC-B supports the selection of codec based on the Iu-Supported Codecs List, then 3G_MSC-B shall indicate the Iu Selected codec to MSC-A or 3G_MSC-A in MAP-PROCESS-ACCESS-SIGNALLING request. </p>
<p>In the Inter-3G_MSC relocation case, the role of 3G_MSCB (3G_MSCB') is only to provide radio resources control within its area. This means that 3G_MSCB keeps control of the radio resources connection and release towards RNS-B. 3G_MSCB will do some processing on the RANAP information received on the E-interface or the RANAP information received on the Iu-interface whereas it will relay the Direct Transfer information transparently between Iuinterface and E-interface. 3G_MSCA initiates and drives RANAP procedures towards 3G_MSCB, while 3G_MSCB controls them towards its RNSs to the extent that 3G_MSCB is responsible for the connections of its RNSs. The release of the dedicated resources between 3G_MSCB and RNS-B is under the responsibility of 3G_MSCB and RNSB, and is not directly controlled by 3G_MSCA. When clearing is to be performed due to information received from RNS-B, 3G_MSCB shall transfer this clearing indication to 3G_MSCA, to clear its connection with RNS-B, to terminate the dialogue with 3G_MSCA through the Einterface, and to release its circuit connection with 3G_MSCA, if any. In the same way, the release of the connection to its RNS-B, is initiated by 3G_MSCB, when the dialogue with 3G_MSCA ends normally and a release is received from the circuit connection with 3G_MSCA, if any, or when the dialogue with the 3G_MSCA ends abnormally.</p>
<p>When a release is received by 3G_MSCB for the circuit connection with 3G_MSCA then 3G_MSCB shall release the circuit connection.</p>
<p>In the Inter-system UMTS to GSM Inter-3G_MSC handover case, the role of 3G_MSCB (3G_MSCB') is only to provide radio resources control within its area. This means that 3G_MSCB keeps control of the radio resources connection and release towards BSS-B. 3G_MSCB will do some processing on the BSSMAP information received on the E-interface or the BSSMAP information received on the A-interface whereas it will relay the DTAP information transparently between Ainterface and E-interface. 3G_MSCA initiates and drives a subset of BSSMAP procedures towards 3G_MSCB, while 3G_MSCB controls them towards its BSSs to the extent that 3G_MSCB is responsible for the connections of its BSSs. The release of the dedicated resources between 3G_MSCB and BSS-B is under the responsibility of 3G_MSCB and BSSB, and is not directly controlled by 3G_MSCA. When clearing is to be performed due to information received from BSS-B, 3G_MSCB shall transfer this clearing indication to 3G_MSCA, to clear its connection with BSS-B, to terminate the dialogue with 3G_MSCA through the Einterface, and to release its circuit connection with MSCA, if any. In the same way, the release of the connection to its BSS-B, is initiated by 3G_MSCB, when the dialogue with 3G_MSCA ends normally and a release is received from the circuit connection with 3G_MSCA, if any, or when the dialogue with the MSCA ends abnormally.</p>
<p>When a release is received by 3G_MSCB for the circuit connection with 3G_MSCA then 3G_MSCB shall release the circuit connection.</p>
<p>In the Inter-system GSM to UMTS Inter-3G_MSC handover case, the role of 3G_MSCB (3G_MSCB') is only to provide radio resources control within its area. This means that 3G_MSCB keeps control of the radio resources connection and release towards RNS-B. 3G_MSCB will do some processing on the BSSMAP information received on the E-interface or the RANAP information received on the Iu-interface whereas it will relay the Direct Transfer information transparently between Iuinterface and E-interface. MSCA initiates and drives a subset of BSSMAP procedures towards 3G_MSCB, while 3G_MSCB controls them towards its RNSs to the extent that 3G_MSCB is responsible for the connections of its RNSs. The release of the dedicated resources between 3G_MSCB and RNS-B is under the responsibility of 3G_MSCB and RNSB, and is not directly controlled by MSCA. When clearing is to be performed due to information received from RNS-B, 3G_MSCB shall transfer this clearing indication to MSCA, to clear its connection with RNS-B, to terminate the dialogue with MSCA through the Einterface, and to release its circuit connection with MSCA, if any. In the same way, the release of the connection to its RNS-B, is initiated by 3G_MSCB, when the dialogue with MSCA ends normally and a release is received from the circuit connection with MSCA, if any, or when the dialogue with the MSCA ends abnormally.</p>
<p>When a release is received by 3G_MSCB for the circuit connection with MSCA then 3G_MSCB shall release the circuit connection.</p>
<p>At intra-PLMN handover/relocation, 3G_MSC-B shall send Service Handover related information to the BSC/RNC if and only if this Service Handover information is received from 3G_MSC-A. 3G_MSC-B shall not modify Service Handover related information received from a 3G_MSC-A within the same PLMN.</p>
<p>For network sharing (see 3GPP TS 25.401 [20], subclause 7.2.3) when SNA information is received by 3G_MSC-B from 3G_MSC-A, 3G MSC-B shall send the SNA information to the RNS.</p>
<p>If 3G_MSC-B does not support the optional supplementary service Multicall (see 3GPP TS 23.135 [17]) and 3G_MSC-A requests to relocate multiple bearers, 3G_MSC-B shall indicate that it does not support multiple bearers to 3G_MSC-A.</p>
<p>If 3G_MSC-B supports the optional supplementary service Multicall (see 3GPP TS 23.135 [17]) and UE is engaged with multiple bearers the following description applies:</p>
<p>-  In the basic relocation case, the 3G_MSC-B shall be able to allocate a Handover Number for each bearer. The 3G_MSC-B shall also be able to select some bearers to be handed over according to the priority level defined as RAB parameters in 3GPP TS 25.413 [11] so that the number of bearers will fulfill the maximum number of bearers supported by the 3G_MSC-B. If a selection has to be made between bearers of the same priority level, then the selection criteria are implementation dependent.</p>
<p>-  In the Intra-3G_MSC relocation case, the 3G_MSC-B tries to relocate all bearers to a new RNS.</p>
<p>-  In the subsequent relocation back to the 3G_MSC-A or to a third 3G_MSC-B' case, the 3G_MSC-B tries to request to the 3G_MSC-A to relocate all bearers to the 3G_MSC-A or to the 3G_MSC-B'.</p>
<p>-  In the Intra-3G_MSC inter-system UMTS to GSM handover case and the subsequent inter-system UMTS to GSM handover back to the 3G_MSC-A or to a third MSC-B' case, the 3G_MSC-B shall be able to select one bearer to be handed over according to 3GPP TS 22.129 [9] and tries to handover the selected bearer.</p>
<p>If 3G_MSC-B supports the "Provision of UE Specific Behaviour Information to Network Entities" (see 3GPP TS 23.195 [21]), and if it received UESBI-Iu from MSC-A or 3G_MSC-A during the basic inter-MSC handover/relocation, then 3G_MSC-B shall store the UESBI-Iu and forward it to RNS-B during basic inter-MSC handover/relocation and subsequent intra-3G_MSC-B handover/relocation.</p>
<p>If 3G_MSC-B supports SCUDIF calls (see 3GPP TS 23.172 [22]), and if it received information of alternative radio access bearer from 3G_MSC-A during the basic inter-MSC handover/relocation or assignment, then 3G_MSC-B shall store that information and forward it to RNS-B during basic inter-MSC handover/relocation or assignment and subsequent intra-3G_MSC-B handover/relocation.</p>
<p>3G_MSC-B may support subsequent inter-system handover or SRNS relocation to a CSG cell. If 3G_MSC-B supports handover/relocation to a CSG cell, the serving BSS or RNS is served by 3G_MSC-B and provides a CSG ID for the target cell, and the call is not an emergency call, then 3G_MSC-B checks the CSG membership of the UE for the target cell using the CSG subscription data provided by the anchor MSC-A or 3G_MSC-A during the basic inter-MSC handover/relocation before proceeding with the subsequent handover/relocation procedure. If there is no subscription data for this CSG ID or the CSG subscription for the CSG ID has expired, 3G_MSC-B considers the membership check as failed.</p>
<p>NOTE 1: If 3G_MSC-B does not support CSG membership checking, and a CSG cell is configured as possible handover target, 3G_MSC-B will proceed with the subsequent handover to the CSG cell. If the CSG cell is not configured as possible handover target, 3G_MSC-B will not proceed with the handover.</p>
<p>For subsequent handover/relocation of an emergency call to a CSG cell, 3G_MSC-B shall skip the CSG membership check and proceed with the handover/relocation procedure.</p>
<p>For subsequent inter-PLMN handover/relocation to a CSG cell, if the anchor MSC-A or 3G_MSC-A provided a CSG ID list for the target PLMN during the basic inter-MSC handover/relocation, 3G_MSC-B shall validate the CSG membership of the UE in the target CSG cell using the CSG ID list for the target PLMN. </p>
<p>NOTE 2: Due to certain restrictions in the access stratum, inter-PLMN handover to a CSG cell in a PLMN which is not an equivalent PLMN for the UE is not supported; therefore, the target PLMN will always be an equivalent PLMN.</p>
<p>Based on operator's configuration, if the anchor MSC-A or 3G_MSC-A provided only a CSG ID list for the PLMN of 3G_MSC-B, the 3G_MSC-B may allow the handover/relocation by validating the CSG membership of the UE in the target CSG cell using this CSG ID list. Otherwise, 3G_MSC-B shall reject the handover/relocation due to no CSG subscription information of the target PLMN-ID available.</p>
<p>NOTE 3: If 3G_MSC-B uses the CSG ID list of the PLMN of 3G_MSC-B for membership validation, as the UE is using the CSG ID list of the equivalent PLMN, inter-PLMN handover to a CSG cell of an equivalent PLMN can only occur if the CSG ID of the cell is both in the CSG ID list of the PLMN of 3G_MSC-B which is used by 3G_MSC-B and in the CSG ID list of the equivalent PLMN which is used by the UE. If MSC-A or 3G_MSC-A provided a CSG ID list for the target PLMN of the subsequent inter-MSC handover, this restriction does not apply.</p>
<h1 id="442-functional-composition-of-3g_msc-b-and-its-interfaces-for-handoverrelocation">4.4.2 Functional composition of 3G_MSCB and its interfaces for handover/relocation</h1>
<p>The functional composition of a 3G_MSC acting as 3G_MSCB is essentially the same as that of 3G_MSCA. However, there are some differences. The functional units are as follows (see figure 6).</p>
<p>Signalling functions:</p>
<p>\1) RNC/BSC/3G_MSC (UE/MS/RNC/BSC) Procedures 3G_MSCB. This unit is used to control the signalling between the 3G_MSC, RNC, BSC and UE/MS. Interface Iu' is the connection to the old RNC and interface Iu'' is the connection to the new RNC, when an Intra-3G_MSC relocation takes place. Interface Iu' is the connection to the old RNC and interface A'' is the connection to the new BSC, when an Intra-3G_MSC UMTS to GSM handover takes place. Interface A' is the connection to the old BSC and interface Iu'' is the connection to the new RNC, when an Intra-3G_MSC GSM to UMTS handover takes place. Interface x represents the interworking connection to the Handover/Relocation Control Procedures 3G_MSCB.</p>
<p>\2) Call Control Procedures 3G_MSCB. This unit is used for normal call control and signalling to 3G_MSCA or MSCA in the case of inter-system inter-3G_MSC handover.</p>
<p>\3) Handover/Relocation Control Procedures 3G_MSCB. This unit provides both the overall control of the handover/relocation procedure and interworking between the internal interfaces (x, y and z) in 3G_MSCB.</p>
<p>\4) MAP Procedures 3G_MSCB. This unit is responsible for controlling the exchange of MAP messages between 3G_MSCA, or MSCA, and 3G_MSCB and for signalling to the VLR in 3G_MSCB.</p>
<p>Switching functions:</p>
<p>\5) Switch 3G_MSCB. For all calls this unit is responsible, with RNS-B, for connecting the circuit from 3G_MSCA, or MSCA, to RNS-B. This unit may also need to act as a handover/relocation device for Intra-3G_MSC handovers/relocation controlled by 3G_MSCB. In specific cases it may be unnecessary to take any explicit action in the 3G_MSC concerning the handover/relocation device.</p>
<p><img alt="" src="../23009-g00.007.png" /></p>
<p><strong>Figure 6: Functional composition of 3G_MSCB for supporting handover/relocation</strong></p>
<h1 id="45-msc-server-enhanced-for-srvcc-features">4.5   MSC server enhanced for SRVCC features</h1>
<h1 id="451-role-of-srvcc-msc">4.5.1 Role of SRVCC MSC</h1>
<p>SRVCC MSC takes the roles of 3G_MSC-A as defined in subclause 4.3.1 with the following modification for an SRVCC handover:</p>
<p>-  During a SRVCC handover, SRVCC MSC initiates and controls all the Circuit Switch handover procedure, from its initiation (i.e., reception of SRVCC PS to CS Request via the Sv-interface as defined in 3GPP TS 29.280 [27] from MME) until its completion (i.e., reception of Relocation/Handover Complete from 3G_MSC-B or MSC-B on E-interface or from RANAP or BSSMAP procedure if the target access network is connected via the same SRVCC MSC);</p>
<p>-  Call flows on the interaction between Sv signalling and the handover signalling with the target network by SRVCC MSC is defined in 3GPP TS 23.216 [26];</p>
<p>-  SRVCC MSC initiates a normal call setup procedure to SCC AS with STN-SR for session continuity procedure as defined in 3GPP TS 23.216 [26]; and</p>
<p>-  After SRVCC handover is completed, the UE is connected to SCC AS via target CS domain access. The subsequent handover to another BSS/RAN or inter-MSC HO follows the procedures defined for 3G_MSC-A. There is no handover back to E-UTRAN via the Sv interface.</p>
<h1 id="452-functional-composition-of-srvcc-msc-and-its-interfaces-for-handoverrelocation">4.5.2 Functional composition of SRVCC MSC and its interfaces for handover/relocation</h1>
<p>Functional composition of SRVCC MSC and its interfaces for handover/relocation follows the 3G_MSC-A as defined in subclause 4.3.2 with the following modification for an SRVCC handover:</p>
<p>-  Interface Iu'/A' is not used. This is replaced by Sv interface;</p>
<p>-  Interface B' is used for normal call control procedure to SCC AS for SRVCC session continuity procedures as defined in 3GPP TS 23.216 [26]; and</p>
<p>-  During SRVCC procedure, B' is a one-way connection with SCC AS and is not connected to Sv interface. After SRVCC procedure is completed, B' is connected to A''/Iu''.</p>
<h1 id="453-role-of-vsrvcc-msc">4.5.3 Role of vSRVCC MSC</h1>
<p>vSRVCC MSC takes the role of an SRVCC MSC as described in subclause 4.5.1 with the following modifications for a vSRVCC handover:</p>
<p>-  During a vSRVCC handover, vSRVCC MSC initiates and controls all the Circuit Switch handover procedure, from its initiation (i.e., reception of SRVCC PS to CS Request via the Sv-interface as defined in 3GPP TS 29.280 [27] from MME) until its completion (i.e., reception of Relocation/Handover Complete from 3G_MSC-B on E-interface or from RANAP procedure if the target access network is connected via the same vSRVCC MSC);</p>
<p>-  Call flows on the interaction between Sv signalling and the handover signalling with the target network by vSRVCC MSC are defined in 3GPP TS 23.216 [26];</p>
<p>-  vSRVCC MSC performs query to SCC AS to determine whether to perform the SRVCC or vSRVCC procedure, as defined in 3GPP TS 23.216 [26] and 3GPP TS 24.237 [30];</p>
<p>-  vSRVCC MSC initiates a normal call setup procedure to SCC AS with STN-SR for session continuity procedure as defined in 3GPP TS 23.216 [26]; and</p>
<p>-  After vSRVCC handover is completed, the UE is connected to SCC AS via target CS domain access. The subsequent handover to another RAN or inter-MSC HO follows the procedures defined for 3G_MSC-A. There is no handover back to E-UTRAN via the Sv interface.</p>
<h1 id="454-functional-composition-of-vsrvcc-msc-and-its-interfaces-for-handoverrelocation">4.5.4 Functional composition of vSRVCC MSC and its interfaces for handover/relocation</h1>
<p>Functional composition of vSRVCC MSC and its interfaces for handover/relocation follows an SRVCC MSC for an SRVCC handover as specified in subclause 4.5.2. In addition, the following modifications to subclause 4.5.2 are required for a vSRVCC handover:</p>
<p>-  Interface B' is used for performing query to SCC AS to determine whether to perform the SRVCC or vSRVCC procedure, as defined in 3GPP TS 23.216 [26] and 3GPP TS 24.237 [30];</p>
<p>-  Interface B' is used for normal call control procedure to SCC AS for vSRVCC session continuity procedures as defined in 3GPP TS 23.216 [26]; and</p>
<p>-  During vSRVCC procedure, B' is a one-way connection with SCC AS and is not connected to Sv interface. After vSRVCC procedure is completed, B' is connected to Iu''.</p>
<h1 id="5-handover-initiation-conditions">5 Handover initiation conditions</h1>
<p>Handover may be initiated by the network based on RF criteria as measured by the MS or the Network (signal level, Connection quality, power level propagation delay) as well as traffic criteria (e.g. current traffic loading per cell, interference levels, maintenance requests, etc.).</p>
<p>In order to determine if a handover is required, due to RF criteria, it is typically the MS that shall take radio measurements from neighbouring cells. These measurements are reported to the serving cell on an event driven or regular basis. When a network determines a need for executing a handover the procedures given in 3GPP TS 48.008 [5], 3GPP TS 25.303 [13], 3GPP TS 25.331 [14] are followed.</p>
<p>The decision process used to determine when to perform soft handover or hard handover will typically differ. Depending on the support for soft or hard handover the Intra-MSC and Inter-MSC handover may differ.</p>
<p>In the case of an ongoing GSM voice group call (see 3GPP TS 43.068 [3]) the criteria described above shall only apply to the mobile station currently assigned the uplink and other users with a dedicated connection, no actions shall be taken for the listening users.</p>
<h1 id="6-general-description-of-the-procedures-for-intra-msc-handovers">6 General description of the procedures for intra - MSC handovers</h1>
<p>This clause gives a brief overview of the procedures that shall be followed when performing Intra-MSC handovers. Detailed explanation of these procedures can be found in 3GPP TS 48.008 [5] and 3GPP TS 24.008 [10].</p>
<p>There are three types of GSM handover that involve a single BSS and a single MSC. These are "Internal Handover", "BSS Internal Handover with MSC Support"  and" External Handover".</p>
<p><code></code>An "Internal Handover" takes place between channels on a cell or cells controlled by a single BSS, without reference to the MSC, although the MSC maybe informed of its occurrence after completion. This typical case can be used by the BSS e.g. if the A-Interface User Plane is not to be modified. This "Internal Handover" may take place with AoTDM or with AoIP and is not considered in the present document.</p>
<p>A "BSS Internal Handover with MSC Support" shall only be used if AoIP is supported by both MSC and BSS and if the A-Interface User Plane has to be modified. In that case the BSS or the MSC may initiate a "BSS Internal Handover with MSC Support" procedure as described in detail in subclause 6.3 in this document.</p>
<p>NOTE:   From Core Network perspective this "BSS Internal Handover with MSC Support" is an "External Handover", because the MSC is actively involved, although it is called "Internal Handover" in 3GPP TS 48.008, because the call stays within one BSS.</p>
<p>Handovers between channels on the same cell or between cells on the same BSS which are controlled by the MSC (as defined prior to the introduction of AoIP) are termed "External Handovers" and use identical procedures to those for Inter-BSS-Intra-MSC handovers.  "External Handovers" are also specified with AoIP User Plane transport, for example the handover from speech to data services.Handovers from a BSS to an RNS controlled by the same 3G_MSC are intra-3G_MSC GSM to UMTS handovers. Handovers from an RNS to a BSS controlled by the same 3G_MSC are intra-3G_MSC UMTS to GSM handovers.</p>
<p>There are two types of handover in UMTS: soft handover and hard handover. The first one is fully performed within UTRAN, without involving the core network. The second one may be also performed within UTRAN or GERAN, or between GERAN and UTRAN, or the core network may be involved if the Iur or Iur-g interface between RNSs does not exist. This case of hard handover involving the core network is covered in the present document, together with SRNS relocation with Iur or Iur-g interface.</p>
<h1 id="61-procedure-for-intra-msc-handovers">6.1   Procedure for Intra-MSC Handovers</h1>
<p>The procedure for a successful External Intra-MSC handover is shown in figure 7. It is assumed that selection of a candidate MS has already taken place within the BSS based upon the criteria presented in clause 5. The exact algorithm, in the BSS, for determining a candidate MS is not addressed in the present document. The procedures discussed do not make use of the Mobile Application Part (MAP), represented by signalling function 4 in figure 2 and figure 3. The procedure described in this clause covers case i).</p>
<p><img alt="" src="../23009-g00.008.png" /></p>
<p><strong>Figure 7: Basic External Intra-MSC Handover Procedure</strong></p>
<p>The successful operation of the procedure is as follows. When the BSS (BSS-A), currently supporting the MS, determines that the MS requires to be handed over it will send an AHANDOVER-REQUIRED message to the MSC (MSCA). The A-HANDOVER-REQUIRED message shall contain a list of cells, or a single cell, to which the MS can be handed over. The list of cells shall be given in order of preference based upon operator determined criteria (These criteria are not addressed within the present document and are operator dependent). When the MSCA receives the A-HANDOVER-REQUIRED message it shall begin the process of handing over the MS to a new BSS (BSS-B). (NOTE: BSS-A and BSS-B maybe the same BSS). The MSCA shall generate an A-HANDOVER-REQUEST message to the selected BSS (BSS-B). When BSS-B receives the AHANDOVER-REQUEST message it shall take the necessary action to allow the MS to access the radio resource of BSS-B, this is detailed in 3GPP TS 48.058 [6] and in 3GPP TS 45.008 [4]. The switching of the radio resource through the necessary terrestrial resources is detailed in 3GPP TS 24.008 [10] and 3GPP TS 48.008 [5].</p>
<p>Once resource allocation has been completed by BSS-B it shall return an A-HANDOVER-REQUEST-ACK. to MSCA. When this message is received by MSCA it shall begin the process of instructing the MS to tune to a new dedicated radio resource. An A-HANDOVER-COMMAND will be sent by the MSCA to BSS-A. On receipt of the A-HANDOVER-COMMAND message BSS-A will send the radio interface message RI-HANDOVER-COMMAND, containing a Handover Reference number previously allocated by BSS-B, to the MS. The MS will then access the new radio resource using the Handover Reference number contained in the RI-HANDOVER-ACCESS message. The number will be checked by BSS-B to ensure it is as expected and the correct MS has been captured. If this is the correct MS then the BSS-B shall send an A-HANDOVER-DETECT to MSCA. When the MS is successfully communicating with the BSS-B a RI-HANDOVER-COMPLETE message will be sent by the MS to BSS-B. The BSS-B will then send an A-HANDOVER-COMPLETE message to MSCA.</p>
<p>NOTE:   The A-HANDOVER-REQUEST-ACK from BSS-B contains the complete Radio Interface message that shall be sent by BSS-A to the MS in the RI-HANDOVER-COMMAND, MSCA transparently passes this radio interface message onto BSSA.</p>
<p>After MSCA has received the A-HANDOVER-COMPLETE message from BSS-B it shall begin to release the resources allocated on BSS-A. In figure 7 the resource is released by using the ACLEAR-COMMAND sequence.</p>
<p>In the case of ongoing GSM voice group calls the clearing of resources on BSS-A shall not be used if the resources are still be used on the down link.</p>
<p>If a failure occurs during the handover attempt, for example A-HANDOVER-FAILURE returned from BSS-A or BSS-B, then MSCA will terminate the handover to BSS-B. Under these conditions MSCA may optionally take one of a number of actions:</p>
<p>i)  retry the handover to the same cell;</p>
<p>ii) select the next cell from the list contained in the A-HANDOVER-REQUIRED message and attempt a handover to the new cell;</p>
<p>iii)    await the next A-HANDOVER-REQUIRED message;</p>
<p>iv) send an A-HANDOVER-REQUIRED-REJECT to BSS-A, if an A-HANDOVER-COMMAND has not already been sent.</p>
<p>The exact action taken is dependent on whether the failure occurs before or after the A-HANDOVER-COMMAND has been sent.</p>
<p>In all cases the existing connection to the MS shall not be cleared except in the case of expiry of the timer for receipt of A-HANDOVER-COMPLETE.</p>
<p>During the period that the MS is not in communication with the network MSCA shall queue all appropriate messages. All messages shall be delivered to the MS once communication is resumed . In the case of an Intra-MSC handover on MSCB then the messages shall be queued by MSCB.</p>
<p>In the case of ongoing GSM voice group calls if a failure occurs when handing over a user on a dedicated channel then the procedures described above may optionally be applied.</p>
<p>For the case of subsequent Inter-BSS Intra-MSC-B or Inter-BSS Intra-3G_MSC-B handover the following applies:</p>
<p>If handover to an A over IP capable BSS-B is performed, MSC-B/3G_MSC-B includes a Codec List (MSC preferred) in the A-HANDOVER-REQUEST message to BSS-B. MSC-B/3G_MSC-B may select the codecs for the Codec List (MSC preferred) from the channel type information and the AoIP-Supported Codecs List (Anchor), if this list was provided by MSC-A/3G_MSC-A in the MAP-PREPARE-HANDOVER request. For a detailed description of the handling of these codec lists by MSC-A/3G_MSC-A and MSC-B/3G_MSC-B see 3GPP TS 23.153 [25]. If the AoIP-Supported Codecs List (Anchor) was not provided or MSCB/3G_MSC-B does not support the selection of codecs from the AoIP-Supported Codecs List (Anchor), then MSCB/3G_MSC-B shall create the Codec List (MSC preferred) using the channel type information received from MSCA/3G_MSC-A in the A-HANDOVER-REQUEST message included in the MAP-PREPARE-HANDOVER request. </p>
<p>After successful completion of the Intra-MSC-B handover or Intra-3G_MSC-B handover, if MSC-B/3G_MSC-B received the AoIP-Supported Codecs List (Anchor), MSC-B/3G_MSC-B may send the new AoIP-Selected Codec (Target) and AoIP-Available Codecs List (MAP) to MSC-A/3G_MSC-A in the MAP-PROCESS-ACCESS-SIGNALLING request transporting the AHANDOVER-PERFORMED message, if the following conditions are fulfilled: MSC-B/3G_MSC-B created a Codec List (MSC preferred) from the AoIP-Supported Codecs List (Anchor) received from MSC-A/3G_MSC-A, the target BSS-B uses A interface over IP and BSS-B does not insert a transcoder.</p>
<h1 id="62-procedure-for-intra-3g_msc-handovers">6.2   Procedure for Intra-3G_MSC Handovers</h1>
<h1 id="621-intra-3g_msc-handover-from-umts-to-gsm">6.2.1 Intra-3G_MSC Handover from UMTS to GSM</h1>
<p>The procedure for a successful  Intra-3G_MSC handover from UMTS to GSM is shown in figure 8. It is assumed that selection of a candidate UE/MS has already taken place within the RNS based upon the criteria presented in clause 5. The exact algorithm, in the RNS, for determining a candidate UE/MS is not addressed in the present document. The procedures discussed do not make use of the Mobile Application Part (MAP), represented by signalling function 4 in figures 4 and 6. The procedure described in this clause covers case ii).</p>
<p><img alt="" src="../23009-g00.009.png" /></p>
<p><strong>Figure 8: Basic Intra-3G_MSC  Handover from UMTS to GSM Procedure</strong></p>
<h1 id="6211-with-no-bearer-or-one-bearer">6.2.1.1   With no bearer or one bearer</h1>
<p>The successful operation of the procedure is as follows. When the RNS (RNS-A), currently supporting the UE/MS, determines that the UE/MS requires to be handed over to GSM it will send an IU-RELOCATION-REQUIRED message to the 3G_MSC (3G_MSCA). The IU-RELOCATION-REQUIRED message shall contain a single cell, to which the UE/MS can be handed over. When the 3G_MSCA receives the IU-RELOCATION-REQUIRED message it shall begin the process of handing over the UE/MS to a BSS (BSS-B). The 3G_MSCA shall generate an A-HANDOVER-REQUEST message to the selected BSS (BSS-B). When BSS-B receives the AHANDOVER-REQUEST message it shall take the necessary action to allow the UE/MS to access the radio resource of BSS-B, this is detailed in 3GPP TS 48.058 [6] and in 3GPP TS 45.008 [4]. The switching of the radio resource through the necessary terrestrial resources is detailed in 3GPP TS 24.008 [10] and 3GPP TS 08.08 [5].</p>
<p>Once resource allocation has been completed by BSS-B it shall return an A-HANDOVER-REQUEST-ACK. to 3G_MSCA. When this message is received by 3G_MSCA it shall begin the process of instructing the UE/MS to tune to a new dedicated radio resource. An IU-RELOCATION-COMMAND will be sent by the 3G_MSCA to RNS-A. On receipt of the IU-RELOCATION-COMMAND message RNS-A will send the radio resource control message RRC-HANDOVER-COMMAND, containing a Handover Reference number previously allocated by BSS-B, to the UE/MS. The UE/MS will then access the new radio resource using the Handover Reference number contained in the RI-HANDOVER-ACCESS message. The number will be checked by BSS-B to ensure it is as expected and the correct UE/MS has been captured. If this is the correct UE/MS then the BSS-B shall send an A-HANDOVER-DETECT to 3G_MSCA. When the UE/MS is successfully communicating with the BSS-B a RI-HANDOVER-COMPLETE message will be sent by the UE/MS to BSS-B. The BSS-B will then send an A-HANDOVER-COMPLETE message to 3G_MSCA.</p>
<p>NOTE:   The A-HANDOVER-REQUEST-ACK from BSS-B contains the complete radio resource control message that shall be sent by RNS-A to the UE/MS in the RRC-HANDOVER-COMMAND, 3G_MSCA transparently passes this radio interface message onto RNSA.</p>
<p>After 3G_MSCA has received the A-HANDOVER-COMPLETE message from BSS-B it shall begin to release the resources allocated on RNS-A. In figure 8 the resource is released by using the IU-RELEASE-COMMAND sequence.</p>
<p>If a failure occurs during the handover attempt, for example A-HANDOVER-FAILURE returned from BSS-B, then 3G_MSCA will terminate the handover to BSS-B and send an IU-RELOCATION-PREPARATION-FAILURE message to RNS-A.</p>
<p>If RNS-A has decided to cancel the handover, it sends IU-RELOCATION-CANCEL message to 3G_MSCA. The 3G_MSCA will then terminate the handover towards BSS-B (if initiated) and send IU-RELOCATION-CANCEL- ACKNOWLEDGE message to RNS-A.</p>
<p>In all cases the existing connection to the UE/MS shall not be cleared except in the case of expiry of the timer for receipt of A-HANDOVER-COMPLETE.</p>
<p>During the period that the UE/MS is not in communication with the network 3G_MSCA shall queue all appropriate messages. All messages shall be delivered to the UE/MS once communication is resumed. In the case of an Intra-3G_MSC handover from UMTS to GSM on 3G_MSCB then the messages shall be queued by 3G_MSCB.</p>
<p>For the case of subsequent Inter-system UMTS to GSM Intra-3G_MSC-B handover the following applies:</p>
<p>If handover to an A over IP capable BSS-B is performed, 3G_MSC-B includes a Codec List (MSC preferred) in the A-HANDOVER-REQUEST message to BSS-B. 3G_MSC-B may select the codecs for the Codec List (MSC preferred) from the channel type information and the AoIP-Supported Codecs List (Anchor), if this list was provided by MSC-A/3G_MSC-A in the MAP-PREPARE-HANDOVER request. For a detailed description of the handling of these codec lists by MSC-A/3G_MSC-A and 3G_MSC-B see 3GPP TS 23.153 [25]. If the AoIP-Supported Codecs List (Anchor) was not provided or 3G_MSC-B does not support the selection of codecs from the AoIP-Supported Codecs List(Anchor), then 3G_MSC-B shall create the Codec List (MSC preferred) using the channel type information received from MSC-A/3G_MSC-A in the AHANDOVER-REQUEST message included in the MAP-PREPARE-HANDOVER request.</p>
<p>After successful completion of the Inter-system UMTS to GSM Intra-3G_MSC-B handover, if 3G_MSC-B received the AoIP-Supported Codecs List (Anchor), MSC-B/3G_MSC-B may send the new AoIP-Selected Codec (Target) and AoIP-Available Codecs List (MAP) to MSC-A/3G_MSC-A in the MAP-PROCESS-ACCESS-SIGNALLING request transporting the AHANDOVER-PERFORMED message, if the following conditions are fulfilled: 3G_MSC-B created a Codec List (MSC preferred) from the AoIP-Supported Codecs List (Anchor), the target BSS-B uses A interface over IP and BSS-B does not insert a transcoder.</p>
<h1 id="6212-with-multiple-bearers-optional-functionality">6.2.1.2   With multiple bearers (Optional functionality)</h1>
<p>If 3G_MSC-A supports the optional supplementary service Multicall (See 3GPP TS 23.135 [17]), 3G_MSC-A shall have the following functionality additionally to the description in subclause 6.2.1.1.</p>
<p>Upon receipt of the IU-RELOCATION-REQUIRED from RNS-A 3G_MSC-A shall select one bearer to be handed over if the UE is engaged with multiple bearers. After that, 3G_MSC-A generates an A-HO-REQUEST message for the selected bearer to BSS-B.</p>
<p>When an A-HO-REQUEST-ACK is received from BSS-B, 3G_MSC-A sends IU-RELOCATION-COMMAND, which indicates the bearers not to be handed over as bearers to be released, to RNS-A.</p>
<p>After 3G_MSC-A receives A-HO-COMPLETE message from BSS-B, 3G_MSC-A shall release calls via BSS-B, which has been carried by the bearers not to be handed over, and then sends IU-RELEASE-COMMAND to RNS-A.</p>
<h1 id="622-intra-3g_msc-gsm-to-umts-handover">6.2.2 Intra-3G_MSC GSM to UMTS Handover</h1>
<p>The procedure for a successful Intra-3G_MSC handover is shown in figure 9. It is assumed that selection of a candidate UE/MS has already taken place within the BSC based upon the criteria presented in clause 5. The exact algorithm, in the BSC, for determining a candidate UE/MS is not addressed in the present document. The procedures discussed do not make use of the Mobile Application Part (MAP), represented by signalling function 4 in figures 4 and 6. The procedure described in this clause covers case ii).</p>
<p>In case of subsequent handover the following applies. If 3G_MSC-B supports location reporting at change of Service Area and if encapsulated BSSAP signalling is used on the E-interface, 3G_MSC-B shall always initiate the Location Reporting Control procedure at change of Service Area towards the target RNS since no request for Location Reporting can be received from MSC-A. In that case, the Location Reporting Control procedure shall be initiated by 3G_MSC-B after the Relocation Resource Allocation procedure has been executed successfully.</p>
<p>The change of Service Area shall be reported to MSC-A within an A-HANDOVER-PERFORMED message.</p>
<p>In the case of ongoing voice group calls, the handover does not take place since voice group calls are not supported in UMTS.</p>
<p><img alt="" src="../23009-g00.010.png" /></p>
<p><strong>Figure 9: Basic External Intra-3G_MSC GSM to UMTS Handover Procedure</strong></p>
<p>The successful operation of the procedure is as follows. When the BSS (BSS-A), currently supporting the UE, determines that the UE requires to be handed over to UMTS it will send an AHANDOVER-REQUIRED message to the 3G_MSC (3G_MSCA). The A-HANDOVER-REQUIRED message shall contain a single cell, to which the UE can be handed over. When the 3G_MSCA receives the A-HANDOVER-REQUIRED message it shall begin the process of handing over the UE to a new RNS (RNS-B). The 3G_MSCA shall generate an Iu-RELOCATION-REQUEST message to the selected RNS (RNS-B). For handover of a speech call to UTRAN Iu mode, 3G_MSC-A shall include a NAS Synch Indicator in the Iu-RELOCATION-REQUEST message.</p>
<p>If 3G_MSC-A supports inter-system handover to a CSG cell and BSS-A includes a CSG ID for the target cell in the A-HANDOVER-REQUIRED message, then 3G_MSC-A shall check the CSG membership of the UE for the target cell as described in subclause 4.3.1 before generating the Iu-RELOCATION-REQUEST message. If the UE fails the CSG membership check and the target cell is a CSG cell, 3G_MSC-A shall send an A-HANDOVER-REQUIRED-REJECT to BSS-A.</p>
<p>When RNS-B receives the Iu-RELOCATION-REQUEST message it shall take the necessary action to allow the UE to access the radio resource of RNS-B, this is detailed in the 3GPP TS 25.300 series and the 3GPP TS 25.200 series of 3GPP Technical Specifications. The switching of the radio resource through the necessary terrestrial resources is detailed in the 3GPP TS 25.430 series and 3GPP TS 25.413 [11].</p>
<p>Once resource allocation has been completed by RNS-B, it shall return an Iu-RELOCATION-REQUEST-ACK. to 3G_MSCA. When this message is received by 3G_MSCA it shall begin the process of instructing the UE to tune to a new dedicated radio resource. An A-HANDOVER-COMMAND will be sent by the 3G_MSCA to BSS-A. On receipt of the A-HANDOVER-COMMAND message BSS-A will send the radio interface message RI-HANDOVER-COMMAND. The UE will then access the new radio resource. On detection of the UE, the RNS-B shall send an Iu-RELOCATION-DETECT to 3G_MSCA. When the UE is successfully communicating with the RNS-B an RRC-HANDOVER-COMPLETE message will be sent by the UE to RNS-B. The RNS-B will then send an Iu-RELOCATION-COMPLETE message to 3G_MSCA.</p>
<p>NOTE:   The Iu-RELOCATION-REQUEST-ACK from RNS-B contains the complete RRC message that shall be sent by BSS-A to the MS in the RI-HANDOVER-COMMAND, 3G_MSCA transparently passes this radio interface message onto BSSA.</p>
<p>After 3G_MSCA has received the Iu-RELOCATION-COMPLETE message from RNS-B, it shall begin to release the resources allocated on BSS-A. In figure 9 the resource is released by using the ACLEAR-COMMAND sequence.</p>
<p>If a failure occurs during the handover attempt, for example, A-HANDOVER-FAILURE returned from BSS-A or IuRELOCATION FAILURE returned from RNS-B, then 3G_MSCA will terminate the handover to RNS-B. Under these conditions 3G_MSCA may optionally take one of a number of actions:</p>
<p>i)  await the next A-HANDOVER-REQUIRED message;</p>
<p>ii) send an A-HANDOVER-REQUIRED-REJECT to BSS-A, if an A-HANDOVER-COMMAND has not already been sent.</p>
<p>The exact action taken is dependent on whether the failure occurs before or after the A-HANDOVER-COMMAND has been sent.</p>
<p>In all cases the existing connection to the UE shall not be cleared except in the case of expiry of the timer for receipt of Iu-RELOCATION-COMPLETE.</p>
<p>During the period that the UE is not in communication with the network 3G_MSCA shall queue all appropriate messages. All messages shall be delivered to the UE once communication is resumed. In the case of an Intra-3G_MSC GSM to UMTS handover on 3G_MSCB then the messages shall be queued by 3G_MSCB.</p>
<h1 id="623-procedure-for-intra-3g_msc-srns-relocation">6.2.3 Procedure for Intra-3G_MSC SRNS Relocation</h1>
<p>The procedure for a successful Intra-3G_MSC SRNS Relocation is shown in figures 10 and 11. For a successful Intra-3G_MSC Enhanced SRNS Relocation the procedure is shown in figures 11a and 11b. SRNS Relocation and Enhanced SRNS Relocation are used to relocate the serving RNS functionality from one RNS to another. The procedures may or may not involve change of the radio resources assigned for the corresponding UE. Whether or not the Relocation includes change of radio resources assigned for the UE does not affect the SRNS Relocation procedure or Enhanced SRNS Relocation procedure in the Core Network.</p>
<p>In case of subsequent Intra-3G_MSC-B SRNS relocation or Intra-3G_MSC-B Enhanced SRNS relocation the following applies:</p>
<p>-  If 3G_MSC-B has previously received an order to perform location reporting at change of Service Area from 3G_MSC-A and if 3G_MSC-B also supports Location Reporting Control, it shall issue the Iu-LOCATION-REPORTING-CONTROL message towards the target RNS immediately after successful completion of relocation. Upon receipt of Iu-LOCATION-REPORT, 3G_MSC-B shall forward it towards 3G_MSC-A via E interface. </p>
<p><code></code>If 3G_MSC-B supports location reporting at change of Service Area and if encapsulated BSSAP signalling is used on the E-interface, 3G_MSC-B shall always initiate the Location Reporting Control procedure at change of Service Area towards the target RNS, since no request for Location Reporting can be received from MSC-A. In that case, if an SRNS relocation is used, the Location Reporting Control procedure shall be initiated by 3G_MSC-B after the Relocation Resource Allocation procedure has been executed successfully; otherwise 3G_MSC-B shall initiate the Location Reporting Control procedure when the completion of the Enhanced SRNS Relocation has been confirmed by the target RNS. The change of Service Area shall be reported to MSC-A within an A-HANDOVER-PERFORMED message.</p>
<p>It is assumed that selection of a candidate UE has already taken place within RNS based upon the criteria presenting in clause 5. The exact algorithm, in RNS, for determining a candidate UE is not addressed in the present document. The procedure discussed does not make use of the Mobile Application Part (MAP), represented by signalling function 4 in figures 4 and 6. The procedure described in this clause covers case ii).</p>
<p><img alt="" src="../23009-g00.011.png" /></p>
<p><strong>Figure 10: Basic intra-3G_MSC SRNS Relocation Procedure</strong></p>
<p><img alt="" src="../23009-g00.012.png" /></p>
<p><strong>Figure 11: Basic intra-3G_MSC SRNS Relocation Procedure combined with hard change
of radio resources (Hard Handover with switch in the Core Network)</strong> </p>
<p><img alt="" src="../23009-g00.013.png" /></p>
<p><strong>Figure 11a: Basic intra-3G_MSC Enhanced SRNS Relocation Procedure</strong></p>
<p><img alt="" src="../23009-g00.014.png" /></p>
<p><strong>Figure 11b: Basic intra-3G_MSC Enhanced SRNS Relocation Procedure combined with hard change
of radio resources (Hard Handover with switch in the Core Network)</strong></p>
<h1 id="6231-with-no-bearer-or-one-bearer">6.2.3.1   With no bearer or one bearer</h1>
<h1 id="62311-srns-relocation">6.2.3.1.1 SRNS Relocation</h1>
<p>The successful operation of the SRNS Relocation procedure is as follows. When the Serving RNS (RNS-A) makes the decision to perform the SRNS Relocation procedure it will send an IU-RELOCATION-REQUIRED message to the 3G_MSC (3G_MSCA). The IU-RELOCATION-REQUIRED message shall contain the identifier of the target RNS to which the Relocation is to be performed. When the 3G_MSCA receives the IU-RELOCATION-REQUIRED message it shall begin the process of relocating the serving RNS functionality to the new RNS (RNS-B). The 3G_MSCA shall generate an IU-RELOCATION-REQUEST message to the selected RNS (RNS-B). For the relocation of a speech call to UTRAN Iu mode, 3G_MSCA shall include the NAS Synch Indicator in the Iu-RELOCATION-REQUEST, if the Iu Selected codec to be used after the relocation is different from the Iu Currently used codec.</p>
<p>If 3G_MSC-A supports SRNS Relocation to a CSG cell and RNS-A includes a CSG ID for the target cell in the IU-RELOCATION-REQUIRED message, then 3G_MSC-A shall check the CSG membership of the UE for the target cell as described in subclause 4.3.1 before generating the Iu-RELOCATION-REQUEST message. If the UE fails the CSG membership check and the target cell is a CSG cell, 3G_MSC-A shall send an IU-RELOCATION-PREPARATION-FAILURE to RNS-A.</p>
<p>When RNS-B receives the IU-RELOCATION-REQUEST message it shall take the necessary action to establish the new Iu transport bearers for each Radio Access Bearer related to 3G_MSCA for the UE in question, this is detailed in the 3GPP TS 25.430 series and 3GPP TS 25.413 [11].</p>
<p>Once resource allocation has been completed by RNS-B it shall return an IU-RELOCATION-REQUEST-ACKNOWLEDGE to 3G_MSCA. When this message is received by 3G_MSCA, and 3G_MSCA is ready for the move in Serving RNS functionality, it shall indicate the completion of the preparation phase on the core network side for the SRNS Relocation. An IU-RELOCATION-COMMAND message is sent by 3G_MSCA to RNS-A. RNS-A acts as follows:</p>
<p>i)  if the procedure is a SRNS Relocation without change of radio resources, which means that the Iur interface between RNS-A and RNS-B can be used for the procedure, the RNS-A shall send IUR-SRNS-RELOCATION-COMMIT message to the RNS-B to trigger the Relocation execution. See figure 10.</p>
<p>ii) if the procedure is a SRNS Relocation with change of radio resources, which means that the Iur interface between RNS-A and RNS-B is not used for the procedure, the RNS-A shall trigger the handover procedure on the air interface by sending the RRC-HANDOVER-COMMAND to the UE. The UE will then access the new radio resources. See figure 11.</p>
<p>NOTE:   The IU-RELOCATION-REQUEST-ACKNOWLEDGE from RNS-B may optionally contain a transparent container, which is transferred by 3G_MSCA to the RNS-A using the IURELOCATION-COMMAND message.</p>
<p>When the relocation execution trigger is received, RNS-B shall then take the necessary action to assume the role of Serving RNS and shall send an IU-RELOCATION-DETECT message to 3G_MSCA. When the UE is successfully in communication with the RNS-B, then RNS-B shall send an IU-RELOCATION-COMPLETE message to 3G_MSCA.</p>
<p>After 3G_MSCA has received the IU-RELOCATION-COMPLETE message from RNS-B, it shall begin to release the resources associated to the RNS-A. In figures 10 and 11, the resources are released by using the IURELEASECOMMAND sequence.</p>
<p>If a failure occurs during the SRNS Relocation attempt, then 3G_MSCA will terminate the relocation to RNS-B. For example, if IU-RELOCATION-FAILURE is returned from RNS-B then 3G_MSCA will terminate the relocation to RNS-B and send IU-RELOCATION-PREPARATION-FAILURE to RNS-A. If IU-RELOCATION-CANCEL is returned from RNS-A, then 3G_MSCA will terminate the relocation to RNS-B and send IU-RELOCATION-CANCEL-ACKNOWLEDGE to RNS-A.</p>
<p>In all cases the existing connection to the UE shall not be cleared except in the case of expiry of the timer for receipt of Iu-RELOCATION-COMPLETE.</p>
<p>During the period that the UE is not in communication with the network, 3G_MSCA shall queue all appropriate messages. All messages shall be delivered to the UE once communication is resumed. In the case of an Intra-3G_MSC SRNS Relocation (with or without change of  radio resources) on 3G_MSCB, then the messages shall be queued by 3G_MSCB. </p>
<h1 id="62312-enhanced-srns-relocation">6.2.3.1.2 Enhanced SRNS Relocation</h1>
<p>The successful operation of the Enhanced SRNS Relocation procedure is as follows. When the Serving RNS (RNS-A) makes the decision to perform the Enhanced SRNS Relocation procedure it will send an IUR-ENHANCED- RELOCATION-REQUEST message to the new RNS (RNSB). The IUR-ENHANCED RELOCATION-REQUEST message shall contain the necessary information to set up a CS Radio Access Bearer in RNS-B.</p>
<p>When RNS-B receives the IUR-ENHANCED-RELOCATION-REQUEST message it shall take the necessary actions to establish the new Iu transport bearers for the Radio Access Bearer related to 3G_MSCA for the UE in question, as described in detail in the 3GPP TS 25.430 series and 3GPP TS 25.413 [11], and the new transport bearers for the Radio Access Bearer related to RNS-A. to enable data forwarding. RNS-B shall initialize the Iu UP towards RNS A, if necessary.</p>
<p>Once resource allocation has been completed by RNS-B it shall return an IUR-ENHANCED-RELOCATION-RESPONSE message to RNC-A. If the resources cannot be allocated, RNS-B returns an IUR-ENHANCED-RELOCATION-FAILURE message to RNS-A, and RNS-A terminates the procedure.</p>
<p>After transmission of the IUR-ENHANCED-RELOCATION-RESPONSE message RNS-B and RNS-A act as follows:</p>
<p>i)  If the procedure is an Enhanced SRNS Relocation without change of radio resources, RNS-B shall send an IU-ENHANCED RELOCATION-COMPLETE-REQUEST message to 3G_MSCA and start data fowarding towards RNS-A for UL data. After receipt of the IUR-ENHANCED-RELOCATION-RESPONSE message RNS-A shall start data forwarding towards RNS-B for DL data. See figure 11a.</p>
<p>ii) If the procedure is an Enhanced SRNS Relocation with change of radio resources, when RNS-A receives the IUR-ENHANCED-RELOCATION-RESPONSE message, it shall trigger the handover procedure on the air interface by sending the RRC-HANDOVER-COMMAND to the UE and start data forwarding towards RNS-B for DL data. The UE will then access the new radio resources. When the UE is successfully in communication with the RNS-B, then RNS-B shall start data forwarding towards RNS-A for UL data and send an IU-ENHANCED RELOCATION-COMPLETE-REQUEST message to 3G_MSCA. See figure 11b.</p>
<p>After 3G_MSCA has received the IU-ENHANCED-RELOCATION-COMPLETE-REQUEST message from RNS-B, it shall start to configure the necessary Iu resources for the RNS-B and send the IU-ENHANCED-RELOCATION-COMPLETE-RESPONSE message to RNS-B. If the necessary resources cannot be allocated or a failure occurs in 3G_MSC-A, it shall send an IU-ENHANCED-RELOCATION-COMPLETE-FAILURE message to RNS-B.</p>
<p>After RNC-B has received the IU-ENHANCED-RELOCATION-COMPLETE-RESPONSE message, it shall start to configure the Iu transport bearer for each Radio Access Bearer between the MSC-A and RNC-B and perform Iu UP initialization, if necessary. After the completion of the Iu UP initialization, RNS-B shall send an IU-ENHANCED-RELOCATION-COMPLETE-CONFIRM message to 3G_MSC-A.</p>
<p>After 3G_MSC-A has received the IU-ENHANCED-RELOCATION-COMPLETE-CONFIRM message from RNS-B, it shall begin to release the resources associated to the RNS-A. In figures 11a and 11b, the resources are released by using the IURELEASECOMMAND sequence.</p>
<h1 id="6232-with-multiple-bearers-optional-functionality">6.2.3.2   With multiple bearers (Optional functionality)</h1>
<p>If 3G_MSC-A supports the optional supplementary service Multicall (See 3GPP TS 23.135 [17]), 3G_MSC-A shall have the following functionality additionally to the description in subclause 6.2.3.1.</p>
<p>For SRNS Relocation, upon receipt of the IU-RELOCATION-REQUIRED from RNS-A, 3G_MSC-A generates an IU-RELOCATION-REQUEST message, which may include multiple bearers, to RNS-B.</p>
<p>When an IU-RELOCATION-REQUEST-ACK is received from RNS-B, 3G_MSC-A sends IU-RELOCATION-COMMAND, which indicates the bearers failed to set up in RNS-B as bearers to be released, to RNS-A.</p>
<p>After 3G_MSC-A receives a IU-RELOCATION-COMPLETE message from RNS-B, 3G_MSC-A shall release the calls via RNS-B, which have been carried by the bearers failed to set up in RNS-B, and then sends IU-RELEASE-COMMAND to RNS-A.</p>
<p>For Enhanced SRNS Relocation, RNC-A generates an IUR-ENHANCED-RELOCATION-REQUEST message, which may include multiple bearers, to RNS-B. If resources for at least one bearer are reserved in RNS-B, RNS-B shall return an IUR-ENHANCED-RELOCATION-RESPONSE message, which indicates the bearers failed to set up in RNS-B as bearers to be released, to RNC-A.</p>
<p>When the UE is successfully in communication with the RNS-B, then RNS-B shall send an IU-ENHANCED- RELOCATION-COMPLETE-REQUEST message, which indicates the bearers failed to set up in RNS-B as bearers to be released, to 3G_MSCA.</p>
<p>After 3G_MSC-A receives the IU-ENHANCED-RELOCATION-COMPLETE-REQUEST message from RNS-B, 3G_MSC-A shall release the calls via RNS-B, which have been carried by the bearers failed to set up in RNS-B, and then sends IU-RELEASE-COMMAND to RNS-A.</p>
<h1 id="63-internal-handover-with-msc-support-for-intra-bss-handover-with-aoip">6.3   Internal Handover with MSC Support for Intra-BSS handover with AoIP</h1>
<h1 id="631-general-description-of-internal-handover-with-msc-support">6.3.1 General Description of Internal Handover with MSC Support</h1>
<p>If the A-Interface User Plane is carried over IP (or shall be handed over to IP) and one or more of the A-Interface User Plane parameters need to be modified, for example the Codec Type, or the Codec Configuration (BSS determines that no compatible Codec Type or Codec Configuration exists for the target cell), or the IP Transport Layer Address, or the UDP Port, or the CSData Redundancy Level, or the A-Interface Type itself (e.g. from TDM to IP or vice versa), then a "BSS Internal Handover with MSC support" shall be performed (see 3GPP TS 48.008 [5] subclause 3.1.5c.1).</p>
<p>The "BSS Internal Handover with MSC support" for AoIP is performed by the MSC that is currently serving the connected BSS (in the following just termed "serving MSC"); it may be either MSC-A, MSC-B, 3G_MSC-A or 3G_MSC-B.</p>
<p>NOTE:   The "BSS Internal Handover with MSC support" involves the serving MSC actively in the handover. It is therefore in average slower and more resource demanding than the BSS Internal Handover without MSC support. In order to guarantee a high radio network performance the MSC needs to react quickly and handle this handover with high priority.</p>
<p>The "BSS Internal Handover with MSC support" applies only if both BSS and Core Network support the AoIP procedures and messages, and an A-Interface User Plane connection has been established beforehand. The procedures and messages for this "BSS Internal Handover with MSC support" are described in 3GPP TS 48.008 [5].</p>
<p>The "BSS Internal Handover with MSC Support" can be initiated either:</p>
<p>a)  by the BSS, by sending the A-INTERNAL-HANDOVER-REQUIRED message; or:</p>
<p>b)  by the serving MSC, by sending the A-INTERNAL-HANDOVER-ENQUIRY message.</p>
<h1 id="632-bss-initiated-internal-handover-with-msc-support">6.3.2 BSS-initiated Internal Handover with MSC Support</h1>
<p>The BSS-initiated "BSS Internal Handover with MSC Support" starts with an A-INTERNAL-HANDOVER-REQUIRED message from the BSS to the serving MSC, for further details see 3GPP TS 48.008 [5], subclause 3.1.5c. An example sequence is shown in figure 6.3.2.1</p>
<p><img alt="" src="../23009-g00.015.png" /></p>
<p><strong>Figure 6.3.2.1: BSS-Initiated Internal Handover Execution</strong></p>
<p>The A-INTERNAL-HANDOVER-REQUIRED message contains a reason for the required handover and the currently valid Codec List (BSS Supported). It shall also contain an AoIP Transport Layer Address and UDP Port, if the BSS requires an IP-based target User Plane. The Codec List (BSS supported) contains the key requirements from the BSS, like target Codec Type(s), target Codec Configuration(s) and target A-interface Type(s) (TDM and/or IP),  and may contain the required Redundancy Level for CSData, etc.</p>
<p>When sending the A-INTERNAL-HANDOVER-REQUIRED message the BSS starts a timer "T25" (3GPP TS 48.008 [5]) and it expects an answer from the serving MSC within that timer period. If "T25" (3GPP TS 48.008 [5]) expires before the MSC has answered, then the BSS ignores any subsequent (late) answer from the serving MSC after expiry of timer "T25" (3GPP TS 48.008 [5]). The BSS will not send any new A-INTERNAL-HANDOVER-REQUIRED message before timer "T25" (3GPP TS 48.008 [5]) has expired or before the Internal Handover Preparation is terminated by other reasons.</p>
<p>When the serving MSC receives the A-INTERNAL-HANDOVER-REQUIRED message it shall start timer T105 (see subclause 9.3A). The serving MSC shall not send any answer to the BSS after timer T105 has expired. Both timers ("T25" – 3GPP TS 48.008 [5] and T105) shall be configured (by O&amp;M) to minimise the likelihood that the answer from serving MSC to BSS crosses with a new or repeated A-INTERNAL-HANDOVER-REQUIRED message from the BSS to the serving MSC, i.e. the timer T105 shall always expire before "T25" (3GPP TS 48.008 [5]) expires.</p>
<p>If the serving MSC is able to fulfil the required "BSS Internal Handover with MSC Support", then it shall generate and send an A-INTERNAL-HANDOVER-COMMAND message to the BSS and stop timer T105. This answer shall contain the exact new A-Interface User Plane parameters, e.g. Codec Type, Codec Configuration, A-Interface Type, either TDM Circuit Identity Code or IP Transport Layer Address and UDP Port (see 3GPP TS 48.008 [5]). While T25 is still running the BSS can either accept or reject the A-INTERNAL-HANDOVER-COMMAND.</p>
<p>When the BSS receives the A-INTERNAL-HANDOVER-COMMAND message it takes the necessary action to allow the MS to access the radio resource of the new cell in BSS, this is detailed in 3GPP TS 48.058 [6] and in 3GPP TS 45.008 [4]. The switching of the radio resource through the necessary terrestrial resources is detailed in 3GPP TS 44.018 [28] and 3GPP TS 48.008 [5]. On receipt of the A-INTERNAL-HANDOVER-COMMAND message the BSS will send e.g. the radio interface message RI-HANDOVER-COMMAND, containing a Handover Reference number previously allocated to the MS. The MS will then access the new radio resource using the Handover Reference number contained in the RI-HANDOVER-ACCESS message. The number will be checked by BSS to ensure it is as expected and the correct MS has been captured. </p>
<p>As BSS and MS proceed with the handover the BSS may send an A-HANDOVER-DETECT message to the serving MSC to enable fast User Plane switching on the Core Network side. As soon as the MS and BSS have completed the handover the BSS send an A-HANDOVER-COMPLETE message to serving MSC. Both BSS and serving MSC will then release the no longer needed BSS and Core Network resources. </p>
<p>If the serving MSC is unable to support the required Internal Handover due to whatever reason then it shall send an A-INTERNAL-HANDOVER-REQUIRED-REJECT message to the BSS (if T105 has not expired already). The serving MSC shall not send an A-INTERNAL-HANDOVER-REQUIRED-REJECT message after an A-INTERNAL-HANDOVER-COMMAND has been sent to the BSS.</p>
<p>If a failure occurs during the handover attempt and the BSS sends an A-HANDOVER-FAILURE message, then the serving MSC shall terminate the handover and shall revert back to using the resources used before the handover attempt was made.</p>
<p>The serving MSC shall supervise the "BSS Internal Handover with MSC Support" procedure after sending the A-INTERNAL-HANDOVER-COMMAND using the same timer (T102) as used for Intra-MSC handover, see subclauses 9.3 and 11.3.</p>
<p>In all cases the existing connection to the MS shall not be cleared, except in the case of expiry of the timer T102 before receipt of A-HANDOVER-COMPLETE.</p>
<p>Whilst the MS is not in communication with the Core Network (i.e. in the time span between sending of A-INTERNAL-HANDOVER-COMMAND and the reception of A-HANDOVER-COMPLETE or an A-HANDOVER FAILURE) the serving MSC shall queue all appropriate messages towards the MS. All these messages shall be delivered to the MS once the communication is resumed.</p>
<p>For the case of subsequent Intra-BSS handover with support from MSC-B or 3G_MSC-B the following applies:</p>
<p>After successful completion of the Intra-BSS handover, if MSC-B/3G_MSC-B received the AoIP-Supported Codecs List (Anchor), MSC-B/3G_MSC-B may send the new AoIP-Selected Codec (Target) and AoIP-Available Codecs List (MAP) to MSC-A/3G_MSC-A in the MAP-PROCESS-ACCESS-SIGNALLING request transporting the AHANDOVER-PERFORMED message, if the following conditions are fulfilled: MSC-B/3G_MSC-B created a Codec List (MSC preferred) from the AoIP-Supported Codecs List (Anchor) received from MSC-A/3G_MSC-A, the BSS uses A interface over IP and the BSS does not insert a transcoder.</p>
<h1 id="633-msc-initiated-bss-internal-handover-with-msc-support">6.3.3 MSC-initiated BSS Internal Handover with MSC Support</h1>
<p>During a call the MSC may request to modify the A-Interface User Plane, for example to change the Codec Type or Codec Configuration on the A-Interface to optimise end-to-end speech quality by avoiding transcoding.</p>
<p>The serving MSC may initiate a "BSS Internal Handover with MSC Support" by sending an A-INTERNAL-HANDOVER-ENQUIRY message to the BSS containing, within the Speech Codec (MSC Chosen) IE, the serving MSC's preferred speech Codec Type and Codec Configuration and A-Interface Type.</p>
<p>If accepted by the BSS, the BSS responds with an A-INTERNAL-HANDOVER-REQUIRED message, as described in subclause 6.3.2, with reason "Response to an INTERNAL HANDOVER ENQUIRY". Then the "BSS Internal Handover with MSC Support" may start.</p>
<p>If the BSS does not accept the A-INTERNAL-HANDOVER-ENQUIRY message, then it returns an A-HANDOVER-FAILURE message to the serving MSC.</p>
<h1 id="7-general-description-of-the-procedures-for-inter-msc-handovers">7 General description of the procedures for inter - MSC handovers</h1>
<p>The following clauses describe two options for the Basic and Subsequent Handover procedures. The first, as described in subclauses 7.1 and 7.3 respectively, provides for a circuit connection between MSCA and MSCB. The second, as described in subclauses 7.2 and 7.4 respectively, provides for a Basic and Subsequent Handover without the provision of a circuit connection between MSCA and MSCB.</p>
<p>In all the above mentioned clauses, the following principles apply:</p>
<p>a)  during the handover resource allocation, except for the messages explicitly indicated in b and c below, only the handover related messages that are part of the applicable BSSAP subset - as defined in 3GPP TS 49.008 [7] - shall be transferred on the E-interface;</p>
<p>b)  the trace related messages that are part of the applicable BSSAP subset - as defined in 3GPP TS 49.008 [7] - can be sent by the MSCA on the E-interface after successful handover resource allocation. In subclauses 7.1 and 7.2, it is however allowed at basic handover initiation on the E-Interface to transfer one trace related message that is part of the applicable BSSAP subset - as defined in 3GPP TS 49.008 [7] - together with the applicable handover related message. The applicable handover related message shall always appear as the first message;</p>
<p>c)  during the handover resource allocation for subsequent inter-MSC handover according to subclauses 7.3 and 7.4, it is allowed to transfer either DTAP or RANAP Direct Transfer messages on the E-Interface between MSC-A and MSC-B. RANAP Direct Transfer messages shall be used for this purpose if and only if the basic handover procedure was an inter MSC SRNS relocation;</p>
<p>d)  during the handover execution, ie while the MS is not in communication with the network, the MSCA shall queue all outgoing BSSAP or RANAP messages until the communication with the MS is resumed;</p>
<p>e)  during the execution of a basic inter-MSC handover to MSC-B or a subsequent inter-MSC handover to a third MSC-B', only the handover related messages and the A-Clear-Request message that are part of the applicable BSSAP subset - as defined in 3GPP TS 49.008 [7] – may be sent by the target MSC on the E-interface;</p>
<p>f)  during a subsequent inter-MSC handover back to MSC-A or to a third MSC-B', MSC-B may initiate either an Iu-Release-Request procedure or an A-Clear-Request procedure on the E-interface. An Iu-Release-Request procedure shall be initiated only if the basic handover procedure was an inter-MSC SRNS relocation;</p>
<p>g)  finally, during supervision, ie while the MS is not in the area of MSCA after a successful Inter-MSC handover, the subset of BSSAP procedures and their related messages - as defined in 3GPP TS 49.008 [7] - shall apply on the EInterface. As the only exception to this rule, in case of a subsequent inter-MSC SRNS relocation back to 3G_MSC-A or to a third 3G_MSC-B', during the relocation resource allocation, the relocation and trace related messages that are part of the applicable RANAP subset - as defined in 3GPP TS 29.108 [15] - shall be transferred on the E-interface (see subclause 8.3, a and b).</p>
<p>If a subsequent inter-MSC handover/relocation back to 3G_MSC-A or to a third 3G_MSC-B' is cancelled, then the supervision continues, and BSSAP procedures and their related messages shall apply on the E-interface.</p>
<p>NOTE:   A subsequent inter-MSC SRNS relocation back to 3G_MSC-A or to a third 3G_MSC-B' can occur, e.g., if after the basic inter-MSC handover to 3G_MSC-B the MS performed a subsequent intra-3G_MSC-B GSM to UMTS inter-system handover;</p>
<p>h)  during the intra-MSCB handover execution, if any, the MSCB shall queue all outgoing BSSAP messages until the communication with the MS is resumed.</p>
<h1 id="71-basic-handover-procedure-requiring-a-circuit-connection-between-msc-a-and-msc-b">7.1   Basic handover procedure requiring a circuit connection between MSCA and MSCB</h1>
<p>The procedure used for successful Inter-MSC Handover is shown in figure 12. Initiation of the handover procedure is described in clause 5. The procedure described in this clause makes use of messages from the 3GPP TS 48.008 [5] and of the transport mechanism from the Mobile Application Part (MAP) (3GPP TS 29.002 [12]). After an Inter-MSC handover further Intra-MSC handovers may occur on MSCB, these handovers will follow the procedures specified in the previous clause.</p>
<p><img alt="" src="../23009-g00.016.png" /></p>
<p>NOTE 1: Can be sent at any time after the reception of IAM.</p>
<p><strong>Figure 12: Basic Handover Procedure requiring a circuit connection</strong></p>
<p>The handover is initiated as described in subclause 6.1. (This is represented by A-HO-REQUIRED in figure 12. Upon receipt of the A-HO-REQUIRED from BSS-A, MSCA shall send a MAP-PREPARE-HANDOVER request to MSCB including a complete A-HO-REQUEST message.</p>
<p>NOTE:   MSCA shall not send further MAPPREPAREHANDOVER requests while a MAP-PREPARE-HANDOVER response is pending or before any timeouts.</p>
<p>The MAP-PREPARE-HANDOVER request shall carry in the AHO-REQUEST all information needed by MSCB for allocating a radio channel, see 3GPP TS 48.008 [5]. For compatibility reasons, the MAPPREPARE-HANDOVER request will also identify the cell to which the call is to be handed over. For speech calls, MSC-A shall also include the Iu Supported Codecs List to be used by MSC-B for subsequent intra-MSC-B intersystem handover to UMTS and intra-MSC-B SRNS relocation.</p>
<p>If MSC-A supports A interface over IP, then for speech calls MSC-A may include the AoIP-Supported Codecs List (Anchor) in the MAP-PREPARE-HANDOVER request. If handover to an A over IP capable BSS-B is performed, MSC-B shall include a Codec List (MSC preferred) in the A-HO-REQUEST message to BSS-B. MSC-B may select the codecs for the Codec List (MSC preferred) from the channel type information and the AoIP-Supported Codecs List (Anchor), if this list was provided by MSC-A in the MAP-PREPARE-HANDOVER request. For a detailed description of the handling of these codec lists by MSC-A and MSC-B see 3GPP TS 23.153 [25]. If the AoIP-Supported Codecs List was not provided or MSC-B does not support the selection of codecs from the AoIP-Supported Codecs List (Anchor), then MSC-B shall create the Codec List (MSC preferred) using the channel type information received from MSC-A in the A-HO-REQUEST message included in the MAP-PREPARE-HANDOVER request.</p>
<p>If MSC-A supports handover to a CSG cell, the target cell belongs to the registered PLMN or an equivalent PLMN, and the HLR or the CSS provided CSG subscription data, MSC-A shall include the CSG subscription data for the registered PLMN and, if available, for the equivalent PLMNs in the MAP-PREPARE-HANDOVER request.</p>
<p>MSCB will return the MAP-PREPARE-HANDOVER response after having retrieved a Handover Number from its associated VLR (exchange of the messages MAP-allocate-handover-number request and MAP-send-handover-report request). The Handover Number shall be used for routing the connection of the call from MSCA to MSCB. If a traffic channel is available in MSCB the MAP-PREPARE-HANDOVER response, sent to MSCA will contain the complete AHOREQUEST-ACKNOWLEDGE message received from BSS-B, containing the radio resources definition to be sent by BSS-A to the MS and possible extra BSSMAP information, amended by MSCB due to the possible interworking between the BSSMAP protocol carried on the E-interface and the BSSMAP protocol used on the Ainterface. If the traffic channel allocation is queued by BSS-B, the A-QUEUING-INDICATION may optionaly be sent back to MSCA. The further traffic channel allocation result (A-HO-REQUEST-ACK or A-HO-FAILURE) will be transferred to MSCA using the MAP-PROCESS-ACCESS-SIGNALLING request. If the traffic channel allocation is not possible, the MAP-PREPARE-HANDOVER response containing an A-HO-FAILURE will be sent to MSCA. MSCB will do the same if a fault is detected on the identity of the cell where the call has to be handed over. MSCB simply reports the events related to the dialogue. It is up to MSCA to decide the action to perform if it receives negative responses or the operation fails due to the expiry of the MAP-PREPARE-HANDOVER timer.</p>
<p>If A interface over IP is supported, then for speech calls via an A over IP capable BSS-B the selection of the speech codec shall be as described in 3GPP TS 48.008 [5], and if no transcoder is inserted in the BSS-B then MSC-B shall insert a transcoder.</p>
<p>If MSCA provided an AoIP-Supported Codecs List (Anchor) in the MAP-PREPARE-HANDOVER request and MSCB selected the codecs for the Codec List (MSC preferred) from the AoIP-Supported Codecs List (Anchor), MSCB may send the AoIP-Selected Codec (Target) and AoIP-Available Codecs List (MAP) to MSC-A in the MAP-PREPARE-HANDOVER response.</p>
<p>If BSS-B does not support A interface over IP or MSC-A did not include the AoIP-Supported Codecs List (Anchor) in the MAP-PREPARE HANDOVER request, then MSC-B shall not include the AoIP-Selected Codec (Target) and AoIPAvailable Codecs List (MAP) in the MAP-PREPARE-HANDOVER response. Reception of AoIP-Selected Codec (Target) and AoIP Available Codecs List (MAP) from MSC-B with the MAP-PREPARE-HANDOVER response indicates to MSC-A that the target access supports A interface over IP.</p>
<p>If an error related to the TCAP dialogue or to the MAP-PREPARE-HANDOVER request is returned from MSCB, this will be indicated to MSCA and MSCA will terminate the handover attempt. MSCA may retry the handover attempt using the cell identity list, if provided, or may reject the handover attempt towards BSS-A. The existing connection to the MS shall not be cleared.</p>
<p>When the A-HO-REQUEST-ACKNOWLEDGE has been received, MSCA shall establish a circuit between MSCA and MSCB by signalling procedures supported by the network. In figure 12 this is illustrated by the messages IAM (Initial Address Message) and ACM (Address Complete Message) of Signalling System no 7. MSCB awaits the capturing of the MS (subclause 6.1) on the radio path when the ACM is sent and MSCA initiates the handover execution when ACM is received (illustrated by the A-HO-COMMAND and described in the subclause 6.1.</p>
<p>If the BSS-A was connected via an A interface over IP and no transcoding performed in the BSS then MSC-A shall remove the transcoder between the MSC and the other party.</p>
<p>MSCB transfers to MSCA the acknowledgement received from the correct MS (A-HO-DETECT/A-HO-COMPLETE). The A-HO-DETECT, if received, is transferred to MSCA using the MAP-PROCESS-ACCESS-SIGNALLING request. The A-HO-COMPLETE, when received from the correct MS, is included in the MAP-SEND-END-SIGNAL request and sent back to MSCA. The circuit is through-connected in MSCA when the A-HO-DETECT or the A-HO-COMPLETE is received from MSCB. The old radio channel is released when the A-HO-COMPLETE message is received from MSCB. The sending of the MAP-SEND-END-SIGNAL request starts the MAP supervision timer for the MAP dialogue between MSCA and MSCB. When the MAP-SEND-END-SIGNAL request including the A-HO-COMPLETE message is received in MSCA the resources in BSS-A shall be cleared.</p>
<p>In order not to conflict with the PSTN/ISDN signalling system(s) used between MSCA and MSCB, MSCB must generate an answer signal when A-HO-DETECT/COMPLETE is received.</p>
<p>MSCB shall release the Handover Number when the circuit between MSCA and MSCB has been established.</p>
<p>If the circuit between MSCA and MSCB cannot be established (e.g. an unsuccessful backward message is received instead of ACM). MSCA terminates the inter-MSC handover attempt by sending an appropriate MAP message, for example an ABORT. MSCA may retry the handover at this point, see subclause 6.1.</p>
<p>MSCA shall retain overall call control until the call is cleared by the fixed subscriber or the MS and there is no further call control functions to be performed (e.g. servicing waiting calls, echo cancellers).</p>
<p>When MSCA clears the call to the MS it also clears the call control functions in MSCA and sends the MAP-SEND-END-SIGNAL response to release the MAP resources in MSCB.</p>
<p>MSCA may terminate the procedure at any time by sending an appropriate MAP message to MSCB. If establishment of the circuit between MSCA and MSCB has been initiated, the circuit must also be cleared.</p>
<p>The handover will be aborted by MSCA if it detects clearing or interruption of the radio path before the call has been established on MSCB.</p>
<h1 id="72-basic-handover-procedure-not-requiring-the-establishment-of-a-circuit-connection-between-msc-a-and-msc-b">7.2   Basic handover procedure not requiring the establishment of a circuit connection between MSCA and MSCB</h1>
<p>The basic handover procedures to be used when no circuit connection is required by MSCA are similar to those described in subclause 7.1 for circuit switched calls. The main differences to the procedures described in subclause 7.1 relate to the establishment of circuits between the network entities and the Handover Number allocation.</p>
<p>In the case of ongoing GSM voice group calls the circuit connections are already established therefore the procedures described in this clause are also applicable. When applied to ongoing voice group calls the clearing of resources on BSS-A shall not be used if the resources are still be used on the down link. Consequently the A-CLEAR-COMMAND message shall not be sent, but an HANDOVER-SUCCEEDED message shall be sent.</p>
<p>In the case of basic handover, MSCA shall specify to MSCB that no Handover Number is required in the MAP-PREPARE-HANDOVER request (see 3GPP TS 29.002 [12]). As for the basic handover using a circuit connection, the A-HO-REQUEST is transmitted at the same time. Any subsequent Handover Number allocation procedure will not be invoked until the completion of the basic handover procedure (see clause: Subsequent Channel Assignment using a circuit connection). MSCB shall then perform the radio resources allocation as described in subclause 7.1. The MAPPREPARE-HANDOVER response shall be returned to MSCA including either the response of the radio resources allocation request received from BSS-B (A-HO-REQUEST-ACKNOWLEDGE/A-HO-FAILURE with possible extra BSSMAP information. These extra information are amended by MSCB due to the possible interworking between the BSSMAP protocol carried on the E-interface and the BSSMAP protocol used on the A-interface) or potentially the A-QUEUING-INDICATION . The basic handover procedure will continue as described in subclause 7.1 except that no circuit connection will be established towards MSCB.</p>
<p>The relevant case for the basic handover without circuit connection is shown in figure 13. As can be seen the major differences to the equivalent figure 12 is the omission of any circuit establishment messaging and the omission of handover number allocation signalling.</p>
<p><img alt="" src="../23009-g00.017.png" /></p>
<p><strong>Figure 13: Basic Handover Procedure without circuit connection</strong></p>
<h1 id="73-procedure-for-subsequent-handover-requiring-a-circuit-connection">7.3   Procedure for subsequent handover requiring a circuit connection</h1>
<p>After the call has been handed over to MSCB, if the MS leaves the area of MSCB during the same call, subsequent handover is necessary in order to continue the connection.</p>
<p>The following cases apply:</p>
<p>i)  the MS moves back to the area of MSCA;</p>
<p>ii) the MS moves into the area of a third MSC (MSCB').</p>
<p>In both cases the call is switched in MSCA; the circuit between MSCA and MSCB shall be released after a successful subsequent handover has been performed.</p>
<h1 id="731-description-of-subsequent-handover-procedure-i-msc-b-to-msc-a">7.3.1 Description of subsequent handover procedure i): MSCB to MSCA</h1>
<p>The procedure for successful handover from MSCB back to MSCA is shown in figure 14.</p>
<p><img alt="" src="../23009-g00.018.png" /></p>
<p><strong>Figure 14: Subsequent handover procedure i):successful handover
from MSCB to MSCA using a circuit connection</strong></p>
<p>The procedure is as follows.</p>
<p>MSCB sends the MAP-PREPARE-SUBSEQUENT-HANDOVER request to MSCA indicating the new MSC number(MSCA number), indicating also the identity of the cell where the call has to be handed over and including a complete A-HO-REQUEST message. (NOTE: MSCB shall not send further MAP-PREPARE-SUBSEQUENT-HANDOVER requests while a handover attempt is pending or before any timeouts). Since MSCA is the call controlling MSC, this MSC needs no Handover Number for routing purposes; MSCA can immediately initiate the search for a free radio channel.</p>
<p>When a radio channel can be assigned, MSCA shall return in the MAP-PREPARE-SUBSEQUENT-HANDOVER response the complete A-HO-REQUEST-ACKNOWLEDGE message received from the BSS-B and possible extra BSSMAP information, amended by MSCA due to the possible interworking between the BSSMAP protocol carried on the E-interface and the BSSMAP protocol used on the A-interface. If the traffic channel allocation is queued by BSS-B, the A-QUEUING-INDICATION may optionaly be sent back to MSCB. The further traffic channel allocation result (A-HO-REQUEST-ACK or A-HO-FAILURE) will be transferred to MSCB using the MAP-FORWARD-ACCESS-SIGNALLING request.If a radio channel cannot be assigned or if a fault is detected on the target cell identity, or the target cell identity in the A-HO-REQUEST is not consistent with the target MSC number, the MAP-PREPARE-SUBSEQUENT-HANDOVER response containing an A-HO-FAILURE message shall be given to MSCB, in addition MSCB shall maintain the connection with the MS.</p>
<p>If the procedure in MSCA is successful then MSCB can request the MS to retune to the new BSS-B on MSCA. This is illustrated in figure 14 by the A-HO-COMMAND message. The operation is successfully completed when MSCA receives the A-HO-COMPLETE message.</p>
<p>After handover MSCA shall release the circuit to MSCB.</p>
<p>MSCA must also terminate the MAP procedure for the basic handover between MSCA and MSCB by sending an appropriate MAP message. MSCB will clear the resources in BSS-A when the MAP-SEND-END-SIGNAL response is received.</p>
<h1 id="732-description-of-the-subsequent-handover-procedure-ii-msc-b-to-msc-b">7.3.2 Description of the subsequent handover procedure ii): MSCB to MSCB'</h1>
<p>The procedure for successful handover from MSCB to MSCB' is shown in figure 15.</p>
<p>The procedure consists of two parts:</p>
<p>-  a subsequent handover from MSCB back to MSCA as described in subclause 7.3.1 (the same procedures apply if MSC-A is replaced by 3G_MSC-A); and</p>
<p>-  a basic handover from MSCA to MSCB' as described in subclause 7.1.</p>
<p>MSCB sends the MAP-PREPARE-SUBSEQUENT-HANDOVER request to MSCA indicating a new MSC number (which is the identity of MSCB'), indicating also the target cell identity and including a complete A-HO-REQUEST, MSCA then starts a basic handover procedure towards MSCB'.</p>
<p>If MSC-A supports A interface over IP, then for speech calls MSC-A may include the AoIP-Supported Codecs List (Anchor) in the MAP-PREPARE-HANDOVER request towards MSCB'. For a detailed description of the handling of this codec list by MSC-A and MSC-B' see 3GPP TS 23.153 [25].</p>
<p>When MSCA receives the ACM from MSCB', MSCA informs MSCB that MSCB' has successfully allocated the radio resources on BSS-B' side by sending the MAP-PREPARE-SUBSEQUENT-HANDOVER response containing the complete A-HO-REQUEST-ACKNOWLEDGE received from BSS-B' and possible extra BSSMAP information, amended by MSCA due to the possible interworking between the BSSMAP protocol carried on the E-interface between MSCA and MSCB' and the BSSMAP protocol carried on the E-interface between MSCA and MSCB. Now MSCB can start the procedure on the radio path.</p>
<p>For MSCA the handover is completed when it has received the MAP-SEND-END-SIGNAL REQUEST from MSCB' containing the A-HO-COMPLETE received from the BSS-B'. The circuit between MSCA and MSCB is released. MSCA also sends the MAP-SEND-END-SIGNAL response to MSCB in order to terminate the original MAP dialogue between MSCA and MSCB. MSCB releases the radio resources when it receives this message.</p>
<p>If the traffic channel allocation is queued by the BSS-B', the A-QUEUING-INDICATION may optionally be sent back to MSCB. If no radio channel can be allocated by MSCB' or no circuit between MSCA and MSCB' can be established or a fault is detected on the target cell identity or the target cell identity in the A-HO-REQUEST is not consistent with the target MSC number, MSCA informs MSCB by using the A-HO-FAILURE message included in the MAP-PREPARE-SUBSEQUENT-HANDOVER response. MSCB shall maintain the existing connection with the MS.</p>
<p>When the subsequent handover is completed, MSCB' is considered as MSCB. Any further inter-MSC handover is handled as described above for a subsequent handover.</p>
<p><img alt="" src="../23009-g00.019.png" /></p>
<p>NOTE 1: Can be sent at any time after the reception of IAM.</p>
<p><strong>Figure 15: Subsequent handover procedure ii): Successful handover
from MSCB to MSCB'requiring a circuit connection</strong></p>
<h1 id="74-procedure-for-subsequent-handover-not-requiring-a-circuit-connection">7.4   Procedure for subsequent handover not requiring a circuit connection</h1>
<p>As for the subsequent handover with a circuit connection, the same two cases of subsequent handover apply:</p>
<p>i)  the MS moves back to the area of MSCA;</p>
<p>ii) the MS moves into the area of a third MSC (MSCB').</p>
<h1 id="741-description-of-the-subsequent-handover-procedure-without-circuit-connection-i-msc-b-to-msc-a">7.4.1 Description of the subsequent handover procedure without circuit connection i): MSCB to MSCA</h1>
<p>The procedure for successful handover from MSCB back to MSCA without circuit connection is shown in figure 16. The only difference with the figure 14, is that no circuit release is needed between MSCA and MSCB.</p>
<p><img alt="" src="../23009-g00.020.png" /></p>
<p><strong>Figure 16: Subsequent handover procedure i): Successful handover
from MSCB to MSCA not requiring a circuit connection</strong></p>
<h1 id="742-description-of-the-subsequent-handover-procedure-without-circuit-connection-ii-msc-b-to-msc-b">7.4.2 Description of the subsequent handover procedure without circuit connection ii): MSCB to MSCB'</h1>
<p>The procedure for successful handover from MSCB to MSCB' is shown in figure 17.</p>
<p>The procedure consists of two parts:</p>
<p>-  a subsequent handover from MSCB back to MSCA as described in subclause 7.4.1(the same procedures apply if MSC-A is replaced by 3G_MSC-A); and</p>
<p>-  a basic handover from MSCA to MSCB' as described in subclause 7.2.</p>
<p>The only difference to the equivalent figure 15 is the omission of the circuit and handover number allocation signallings.</p>
<p><img alt="" src="../23009-g00.021.png" /></p>
<p><strong>Figure 17: Subsequent handover procedure ii): Successful handover
from MSCB to MSCB' without circuit connection</strong></p>
<h1 id="8-general-description-of-the-procedures-for-inter-3g_msc-handovers">8 General Description of the procedures for inter - 3G_MSC handovers</h1>
<h1 id="81-handover-umts-to-gsm">8.1   Handover UMTS to GSM</h1>
<p>The following clauses describe two options for the Basic and Subsequent UMTS to GSM Handover procedures. The first, as described in subclauses 8.1.1 and 8.1.3 respectively, provides for a circuit connection between 3G_MSCA and 3G_MSCB. The second, as described in subclauses 8.1.2 and 8.1.4 respectively, provides for a Basic and Subsequent Handover without the provision of a circuit connection between 3G_MSCA and 3G_MSCB. 3G_MSC can also be a pure GSM MSC.</p>
<p>In all the above mentioned clauses, the following principles apply:</p>
<p>a)  during the handover resource allocation, except for the messages explicitly indicated in b and c below, only the handover related messages that are part of the applicable BSSAP subset - as defined in 3GPP TS 49.008 [7] - shall be transferred on the E-interface;</p>
<p>b)  the trace related messages that are part of the applicable BSSAP subset - as defined in 3GPP TS 49.008 [7]- can be sent by the 3G_MSCA on the E-interface after successful handover resource allocation. In the subclauses 8.1.1 and 8.1.2, it is however allowed at basic handover initiation on the E-Interface to transfer one trace related message that is part of the applicable BSSAP subset - as defined in 3GPP TS 49.008 [7] - together with the applicable handover related message. The applicable handover related message shall always appear as the first message;</p>
<p>c)  during the handover resource allocation for subsequent inter-MSC inter-system handover according to subclauses 8.1.3 and 8.1.4, it is allowed to transfer either DTAP or RANAP Direct Transfer messages on the E-Interface between 3G_MSC-A and 3G_MSC-B. RANAP Direct Transfer messages shall be used for this purpose if and only if the basic handover procedure was an inter MSC SRNS relocation;</p>
<p>d)  during the handover execution, i.e. while the UE/MS is not in communication with the network, the 3G_MSCA shall queue all outgoing BSSAP or RANAP messages until the communication with the UE/MS is resumed;</p>
<p>e)  during the execution of a basic inter-system inter-MSC handover to MSC-B or a subsequent inter-system inter-MSC handover to a third MSC-B', only the handover related messages and the A-Clear-Request message that are part of the applicable BSSAP subset - as defined in 3GPP TS 49.008 [7] – may be sent by the target MSC on the E-interface;</p>
<p>f)  during a subsequent inter-system inter-MSC handover back to 3G_MSC-A or to a third MSC-B', 3G_MSC-B may initiate either an Iu-Release-Request procedure or an A-Clear-Request procedure on the E-interface. An Iu-Release-Request procedure shall be initiated only if the basic handover procedure was an inter-MSC SRNS relocation;</p>
<p>g)  finally, during supervision, i.e. while the UE/MS is not in the area of 3G_MSCA after a successful Inter-3G_MSC handover, the subset of BSSAP procedures and their related messages - as defined in 3GPP TS 49.008 [7] - shall apply on the E-Interface. As the only exception to this rule, in case of a subsequent inter-MSC SRNS relocation back to 3G_MSC-A or to a third 3G_MSC-B', during the relocation resource allocation, the relocation and trace related messages that are part of the applicable RANAP subset - as defined in 3GPP TS 29.108 [15] - shall be transferred on the E-interface (see subclause 8.3, a and b).</p>
<p>If a subsequent inter-MSC handover/relocation back to 3G_MSC-A or to a third 3G_MSC-B' is cancelled, then the supervision continues, and BSSAP procedures and their related messages shall apply on the E-interface.</p>
<p>NOTE:   A subsequent inter-MSC SRNS relocation back to 3G_MSC-A or to a third 3G_MSC-B' can occur, e.g., if after the basic inter-MSC handover to 3G_MSC-B the MS performed a subsequent intra-3G_MSC-B GSM to UMTS inter-system handover;</p>
<p>h)  during the intra-3G_MSC -B handover execution, if any, the 3G_MSC -B shall queue all outgoing BSSAP or RANAP messages until the communication with the UE/MS is resumed.</p>
<h1 id="811-basic-handover-procedure-requiring-a-circuit-connection-between-3g_msc-a-and-msc-b">8.1.1 Basic Handover procedure requiring a circuit connection between 3G_MSC -A and MSCB</h1>
<p>The procedure used for successful Inter-3G_MSC UMTS to GSM Handover is shown in figure 18. Initiation of the UMTS to GSM handover procedure is described in clause 5. The procedure described in this clause makes use of messages from the 3GPP TS 49.008 [7] and of the transport mechanism from the Mobile Application Part (MAP) (3GPP TS 29.002 [12]). After an Inter-3G_MSC relocation/handover, Intra-3G_MSC UMTS to GSM handover may occur on 3G_MSC -B, this handover will follow the procedures specified in a previous clause.</p>
<p><img alt="" src="../23009-g00.022.png" /></p>
<p>NOTE 1: Can be sent at any time after the reception of IAM.</p>
<p><strong>Figure 18: Basic UMTS to GSM Handover Procedure requiring a circuit connection</strong></p>
<h1 id="8111-with-one-circuit-connection">8.1.1.1   With one circuit connection</h1>
<p>The UMTS to GSM handover is initiated as described in subclause 6.2.1. (This is represented by Iu-RELOCATION-REQUIRED in figure 18). Upon receipt of the Iu-RELOCATION-REQUIRED from RNS-A, 3G_MSCA shall send a MAP-PREPARE-HANDOVER request to MSCB including a complete A-HO-REQUEST message.</p>
<p>NOTE:   3G_MSCA shall not send further MAP-PREPARE-HANDOVER requests while a MAP-PREPARE-HANDOVER response is pending or before any timeouts.</p>
<p>The MAP-PREPARE-HANDOVER request shall carry in the AHO-REQUEST all information needed by MSCB for allocating a radio channel, see 3GPP TS 08.08. For compatibility reasons, the MAP-PREPARE-HANDOVER request will also identify the cell to which the call is to be handed over. For speech calls, 3G_MSC-A shall also include the Iu Supported Codecs List to be used by MSC-B for subsequent intra-MSC-B intersystem handover to UMTS and intra-MSC-B SRNS relocation.</p>
<p>If 3G_MSC-A supports A interface over IP, then for speech calls 3G_MSC-A may include the AoIP-Supported Codecs List (Anchor) in the MAP-PREPARE-HANDOVER request. If handover to an A over IP capable BSS-B is performed, MSC-B shall include a Codec List (MSC preferred) in the A-HO-REQUEST message to BSS-B. MSC-B may select the codecs for the Codec List (MSC preferred) from the channel type information and the AoIP-Supported Codecs List (Anchor), if this list was provided by 3G_MSC-A in the MAP-PREPARE-HANDOVER request. For a detailed description of the handling of these codec lists by 3G_MSC-A and MSC-B see 3GPP TS 23.153 [25]. If the AoIP-Supported Codecs List (Anchor) was not provided or MSC-B does not support the selection of codecs from the AoIP-Supported Codecs List, then MSC-B shall create the Codec List (MSC preferred) using the channel type information received from 3G_MSC-A in the A-HO-REQUEST message included in the MAP-PREPARE-HANDOVER request.</p>
<p>If 3G_MSC-A supports handover/relocation to a CSG cell, the target cell belongs to the registered PLMN or an equivalent PLMN, and the HLR or the CSS provided CSG subscription data, 3G_MSC-A shall include the CSG subscription data for the registered PLMN and, if available, for the equivalent PLMNs in the MAP-PREPARE-HANDOVER request.</p>
<p>MSCB will return the MAP-PREPARE-HANDOVER response after having retrieved a Handover Number from its associated VLR (exchange of the messages MAP-allocate-handover-number request and MAP-send-handover-report request). The Handover Number shall be used for routing the connection of the call from 3G_MSCA to MSCB. If a traffic channel is available in MSCB the MAP-PREPARE-HANDOVER response, sent to 3G_MSCA will contain the complete A-HO-REQUEST-ACKNOWLEDGE message received from BSS-B, containing the radio resources definition to be sent by RNS-A to the UE/MS and possible extra BSSMAP information, amended by MSCB due to the possible interworking between the BSSMAP protocol carried on the E-interface and the BSSMAP protocol used on the A-interface. If the traffic channel allocation is queued by BSS-B, the A-QUEUING-INDICATION may optionally be sent back to 3G_MSCA. The further traffic channel allocation result (A-HO-REQUEST-ACK or A-HO-FAILURE) will be transferred to 3G_MSCA using the MAP-PROCESS-ACCESS-SIGNALLING request. If the traffic channel allocation is not possible, the MAP-PREPARE-HANDOVER response containing an A-HO-FAILURE will be sent to 3G_MSCA. MSCB will do the same if a fault is detected on the identity of the cell where the call has to be handed over. MSCB simply reports the events related to the dialogue. It is up to 3G_MSCA to decide the action to perform if it receives negative responses or the operation fails due to the expiry of the MAP-PREPARE-HANDOVER timer.</p>
<p>If A interface over IP is supported, then for speech calls via an A over IP capable BSS-B the selection of the speech codec shall be as described in 3GPP TS 48.008 [5], and if no transcoder is inserted in the BSS-B then MSC-B shall insert a transcoder.</p>
<p>If 3G_MSC-A provided an AoIP-Supported Codecs List (Anchor) in the MAP-PREPARE-HANDOVER request and MSC-B selected the codecs for the Codec List (MSC preferred) from the AoIP-Supported Codecs List (Anchor), MSCB may send the AoIP-Selected Codec (Target) and AoIP-Available Codecs List (MAP) to 3G_MSC-A in the MAP-PREPARE-HANDOVER response.</p>
<p>If BSS-B does not support A interface over IP or 3G_MSC-A did not include the AoIP-Supported Codecs List (Anchor) in the MAP-PREPARE HANDOVER request, then MSC-B shall not include the AoIP-Selected Codec (Target) and AoIP-Available Codecs List (MAP) in the MAP-PREPARE-HANDOVER response. Reception of the AoIP-Selected Codec (Target) and AoIP Available Codecs List (MAP) from MSC-B with the MAP-PREPARE-HANDOVER response indicates to 3G_MSC-A that the target access supports A interface over IP.</p>
<p>If an error related to the TCAP dialogue or to the MAP-PREPARE-HANDOVER request is returned from MSCB, this will be indicated to 3G_MSCA and 3G_MSCA will terminate the handover attempt. 3G_MSCA rejects the handover attempt towards RNS-A. The existing connection to the UE/MS shall not be cleared.</p>
<p>When the A-HO-REQUEST-ACKNOWLEDGE has been received, 3G_MSCA shall establish a circuit between 3G_MSCA and MSCB by signalling procedures supported by the network. In figure 18 this is illustrated by the messages IAM (Initial Address Message) and ACM (Address Complete Message) of Signalling System no 7. MSCB awaits the capturing of the UE/MS (subclause 6.2.1) on the radio path when the ACM is sent and 3G_MSCA initiates the UMTS to GSM handover execution when ACM is received (illustrated by the Iu-RELOCATION-COMMAND and described in subclause 6.2.1). 3G_MSCA removes the transcoder from the path to the other party.</p>
<p>MSCB transfers to 3G_MSCA the acknowledgement received from the correct UE/MS (A-HO-DETECT/A-HO-COMPLETE). The A-HO-DETECT, if received, is transferred to 3G_MSCA using the MAP-PROCESS-ACCESS-SIGNALLING request. The A-HO-COMPLETE, when received from the correct UE/MS, is included in the MAP-SEND-END-SIGNAL request and sent back to 3G_MSCA. The circuit is through connected in 3G_MSCA when the A-HO-DETECT or the A-HO-COMPLETE is received from MSCB. The old radio channel is released when the A-HO-COMPLETE message is received from MSCB. The sending of the MAP-SEND-END-SIGNAL request starts the MAP supervision timer for the MAP dialogue between 3G_MSCA and MSCB. When the MAP-SEND-END-SIGNAL request including the A-HO-COMPLETE message is received in 3G_MSCA, the resources in RNS-A shall be cleared.</p>
<p>In order not to conflict with the PSTN/ISDN signalling system(s) used between 3G_MSCA and MSCB, MSCB must generate an answer signal when A-HO-DETECT/COMPLETE is received.</p>
<p>MSCB shall release the Handover Number when the circuit between 3G_MSCA and MSCB has been established.</p>
<p>If the circuit between 3G_MSCA and MSCB cannot be established, (e.g. an unsuccessful backward message is received instead of ACM), 3G_MSCA terminates the inter-3G_MSC UMTS to GSM handover attempt by sending an appropriate MAP message, for example an ABORT.</p>
<p>3G_MSCA shall retain overall call control until the call is cleared by the fixed subscriber or the UE/MS and there is no further call control functions to be performed (e.g. servicing waiting calls, echo cancellers).</p>
<p>When 3G_MSCA clears the call to the UE/MS it also clears the call control functions in 3G_MSCA and sends the MAP-SEND-END-SIGNAL response to release the MAP resources in MSCB.</p>
<p>3G_MSCA may terminate the procedure at any time by sending an appropriate MAP message to MSCB. If establishment of the circuit between 3G_MSCA and MSCB has been initiated, the circuit must also be cleared.</p>
<p>The UMTS to GSM handover will be aborted by 3G_MSCA if it detects clearing or interruption of the radio path before the call has been established on MSCB.</p>
<h1 id="8112-with-multiple-circuit-connections-optional-functionality">8.1.1.2   With multiple circuit connections (Optional functionality)</h1>
<p>If 3G_MSC-A supports the optional supplementary service Multicall (See 3GPP TS 23.135 [17]), 3G_MSC-A shall have the following functionality additionally to the description in subclause 8.1.1.1.</p>
<p>Upon receipt of the IU-RELOCATION-REQUIRED from RNS-A 3G_MSC-A shall select one bearer to be handed over if the UE is engaged with multiple bearers. After that, the 3G_MSC-A generates an A-HO-REQUEST message for the selected bearer and sends it to MSC-B over MAP-PREPARE-HANDOVER request.</p>
<p>When MAP-PREPARE-HANDOVER response including an A-HO-REQUEST-ACK is received from MSC-B, 3G_MSC-A sends IU-RELOCATION-COMMAND, which indicates the bearers not to be handed over as bearers to be released, to RNS-A.</p>
<p>After 3G_MSC-A receives MAP-SEND-END-SIGNAL request from MSC-B, 3G_MSC-A shall release calls via MSC-B, which has been carried by the bearers not to be handed over, and then 3G_MSC-A sends IU-RELEASE-COMMAND to RNS-A.</p>
<h1 id="812-basic-umts-to-gsm-handover-procedure-not-requiring-the-establishment-of-a-circuit-connection-between-3g_msc-a-and-msc-b">8.1.2 Basic UMTS to GSM Handover procedure not requiring the establishment of a circuit connection between 3G_MSCA and MSCB</h1>
<p>The basic UMTS to GSM handover procedures to be used when no circuit connection is required by 3G_MSCA are similar to those described in clause 8.1.1 for circuit switched calls. The main differences to the procedures described in clause 8.1.1 relate to the establishment of circuits between the network entities and the Handover Number allocation.</p>
<p>In the case of basic UMTS to GSM handover, 3G_MSCA shall specify to MSCB that no Handover Number is required in the MAP-PREPARE-HANDOVER request (see 3GPP TS 29.002 [12]). As for the basic UMTS to GSM handover using a circuit connection, the A-HO-REQUEST is transmitted at the same time. Any subsequent Handover Number allocation procedure will not be invoked until the completion of the basic UMTS to GSM handover procedure (see clause: Subsequent Channel Assignment using a circuit connection). MSCB shall then perform the radio resources allocation as described in subclause 8.1.1. The MAP-PREPARE-HANDOVER response shall be returned to 3G_MSCA including either the response of the radio resources allocation request received from BSS-B (AHO-REQUEST-ACKNOWLEDGE/A-HO-FAILURE with possible extra BSSMAP information. These extra information are amended by MSCB due to the possible interworking between the BSSMAP protocol carried on the Einterface and the BSSMAP protocol used on the A-interface) or potentially the A-QUEUING-INDICATION. The basic UMTS to GSM handover procedure will continue as described in subclause 8.1.1 except that no circuit connection will be established towards MSCB.</p>
<p>The relevant case for the basic UMTS to GSM handover without circuit connection is shown in figure 19. As can be seen the major differences to the equivalent figure 18 is the omission of any circuit establishment messaging and the omission of handover number allocation signalling.</p>
<p><img alt="" src="../23009-g00.023.png" /></p>
<p><strong>Figure 19: Basic UMTS to GSM Handover Procedure without circuit connection</strong></p>
<h1 id="813-procedure-for-subsequent-umts-to-gsm-handover-requiring-a-circuit-connection">8.1.3 Procedure for subsequent UMTS to GSM handover requiring a circuit connection</h1>
<p>After the call has been handed over to 3G_MSCB, if the UE/MS leaves the area of 3G_MSCB during the same call and enters a GSM area, subsequent UMTS to GSM handover is necessary in order to continue the connection.</p>
<p>The following cases apply:</p>
<p>i)  the UE/MS moves back to the area of MSCA;</p>
<p>ii) the UE/MS moves into the area of a third MSC (MSCB').</p>
<p>In both cases the call is switched in 3G_MSCA; the circuit between 3G_MSCA and MSCB shall be released after a successful subsequent handover has been performed the same procedures apply if 3G_MSC-A is replaced by MSC-A.</p>
<h1 id="8131-description-of-subsequent-umts-to-gsm-handover-procedure-i-3g_msc-b-to-msc-a">8.1.3.1   Description of subsequent UMTS to GSM handover procedure i): 3G_MSCB to MSCA</h1>
<p>The procedure for successful UMTS to GSM handover from MSCB back to 3G_MSCA is shown in figure 20.</p>
<p><img alt="" src="../23009-g00.024.png" /></p>
<p><strong>Figure 20: Subsequent UMTS to GSM handover procedure i): successful UMTS
to GSM handover from 3G_MSCB to MSCA using a circuit connection</strong></p>
<h1 id="81311-with-one-circuit-connection">8.1.3.1.1 With one circuit connection</h1>
<p>The procedure is as follows.</p>
<p>3G_MSCB sends the MAP-PREPARE-SUBSEQUENT-HANDOVER request to MSCA indicating the new MSC number (MSCA number), indicating also the identity of the cell where the call has to be handed over and including a complete A-HO-REQUEST message. (NOTE: 3G_MSCB shall not send further MAP-PREPARE-SUBSEQUENT-HANDOVER requests while a handover attempt is pending or before any timeouts). Since MSCA is the call controlling MSC, this MSC needs no Handover Number for routing purposes; MSCA can immediately initiate the search for a free radio channel.</p>
<p>When a radio channel can be assigned, MSCA shall return in the MAP-PREPARE-SUBSEQUENT-HANDOVER response the complete A-HO-REQUEST-ACKNOWLEDGE message received from the BSS-B and possible extra BSSMAP information, amended by MSCA due to the possible interworking between the BSSMAP protocol carried on the E-interface and the BSSMAP protocol used on the A-interface. If the traffic channel allocation is queued by BSS-B, the A-QUEUING-INDICATION may optionally be sent back to 3G_MSCB. The further traffic channel allocation result (A-HO-REQUEST-ACK or A-HO-FAILURE) will be transferred to 3G_MSCB using the MAP-FORWARD-ACCESS-SIGNALLING request. If a radio channel cannot be assigned or if a fault is detected on the target cell identity, or the target cell identity in the A-HO-REQUEST is not consistent with the target MSC number, the MAPPREPARE-SUBSEQUENT-HANDOVER response containing an A-HO-FAILURE message shall be given to 3G_MSCB, in addition 3G_MSCB shall maintain the connection with the UE/MS.</p>
<p>If the procedure in MSCA is successful then 3G_MSCB can request the UE/MS to retune to the new BSS-B on MSCA. This is illustrated in figure 20 by the Iu-RELOCATION-COMMAND message. The operation is successfully completed when MSCA receives the A-HO-COMPLETE message.</p>
<p>After UMTS to GSM handover MSCA shall release the circuit to 3G_MSCB.</p>
<p>MSCA must also terminate the MAP procedure for the basic UMTS to GSM handover between MSCA and 3G_MSCB by sending an appropriate MAP message. 3G_MSCB will clear the resources in RNS-A when the MAPSEND-END-SIGNAL response is received.</p>
<h1 id="81312-with-multiple-circuit-connections-optional-functionality">8.1.3.1.2 With multiple circuit connections (Optional functionality)</h1>
<p>If 3G_MSC-B supports the optional supplementary service Multicall (See 3GPP TS 23.135 [17]), 3G_MSC-B shall have the following functionality additionally to the description in subclause 8.1.3.1.1.</p>
<p>Upon receipt of the IU-RELOCATION-REQUIRED from RNS-A which indicates the target is BSS, 3G_MSC-B shall select one bearer to be handed over if the UE is engaged with multiple bearers. After that, the 3G_MSC-B generates an A-HO-REQUEST message for the selected bearer and sends it to 3G_MSC-A over MAP-PREPARE-SUBSEQUENT-HANDOVER request with indication of RAB ID of the selected bearer.</p>
<p>When MAP-PREPARE-SUBSEQUENT-HANDOVER response including an A-HO-REQUEST-ACK is received from the 3G_MSC-A, 3G_MSC-B sends IU-RELOCATION-COMMAND, which indicates the bearers not to be handed over as bearers to be released, to RNS-A.</p>
<p>After 3G_MSC-A receives A-HO-COMPLETE message from BSS-B, 3G_MSC-A shall release calls via BSS-B, which has been carried by the bearers not to be handed over, and then 3G_MSC-A sends MAP-SEND-END-SIGNAL response to 3G_MSC-B.</p>
<h1 id="8132-description-of-subsequent-umts-to-gsm-handover-procedure-ii-3g_msc-b-to-msc-b">8.1.3.2   Description of subsequent UMTS to GSM handover procedure ii): 3G_MSCB to MSCB'</h1>
<p>The procedure for successful UMTS to GSM handover from 3G_MSCB to MSCB' is shown in figure 21.</p>
<p>The procedure consists of two parts:</p>
<p>-  a subsequent UMTS to GSM handover from 3G_MSCB back to 3G_MSCA as described in subclause 8.1.3.1 (the same procedures apply if 3G_MSC-A is replaced by MSC-A); and</p>
<p>-  a basic handover from 3G_MSCA to MSCB' as described in subclause 7.1.</p>
<h1 id="81321-with-one-circuit-connection">8.1.3.2.1 With one circuit connection</h1>
<p>3G_MSCB sends the MAP-PREPARE-SUBSEQUENT-HANDOVER request to 3G_MSCA indicating a new MSC number (which is the identity of MSCB'), indicating also the target cell identity and including a complete AHOREQUEST, 3G_MSCA then starts a basic handover procedure towards MSCB'.</p>
<p>If 3G_MSC-A supports A interface over IP, then for speech calls 3G_MSC-A may include the AoIP-Supported Codecs List (Anchor) in the MAP-PREPARE-HANDOVER request towards MSCB'. For a detailed description of the handling of this codec list by 3G_MSC-A and MSC-B' see 3GPP TS 23.153 [25].</p>
<p>When 3G_MSCA receives the ACM from MSCB', 3G_MSCA informs 3G_MSCB that MSCB' has successfully allocated the radio resources on BSS-B' side by sending the MAP-PREPARE-SUBSEQUENT-HANDOVER response containing the complete A-HO-REQUEST-ACKNOWLEDGE received from BSS-B' and possible extra BSSMAP information, amended by 3G_MSCA due to the possible interworking between the BSSMAP protocol carried on the Einterface between 3G_MSCA and MSCB' and the BSSMAP protocol carried on the E-interface between 3G_MSCA and 3G_MSCB. Now 3G_MSCB can start the procedure on the radio path.</p>
<p>For 3G_MSCA the UMTS to GSM handover is completed when it has received the MAP-SEND-END-SIGNAL REQUEST from MSCB' containing the A-HO-COMPLETE received from the BSS-B'. The circuit between 3G_MSCA and 3G_MSCB is released. 3G_MSCA also sends the MAP-SEND-END-SIGNAL response to 3G_MSCB in order to terminate the original MAP dialogue between 3G_MSCA and 3G_MSCB. 3G_MSCB releases the radio resources when it receives this message.</p>
<p>If the traffic channel allocation is queued by the BSS-B', the A-QUEUING-INDICATION may optionally be sent back to 3G_MSCB. If no radio channel can be allocated by MSCB' or no circuit between 3G_MSCA and MSCB' can be established or a fault is detected on the target cell identity or the target cell identity in the A-HO-REQUEST is not consistent with the target MSC number, 3G_MSCA informs 3G_MSCB by using the A-HO-FAILURE message included in the MAP-PREPARE-SUBSEQUENT-HANDOVER response. 3G_MSCB shall maintain the existing connection with the UE/MS.</p>
<p>When the subsequent UMTS to GSM handover is completed, MSCB' is considered as MSCB. Any further inter-MSC handover is handled as described earlier for a subsequent handover.</p>
<h1 id="81322-with-multiple-circuit-connections-optional-functionality">8.1.3.2.2 With multiple circuit connections (Optional functionality)</h1>
<p>If 3G_MSC-B supports the optional supplementary service Multicall (See 3GPP TS 23.135 [17]), 3G_MSC-B shall have the following functionality additionally to the description in subclause 8.1.3.2.1.</p>
<p>Upon receipt of the IU-RELOCATION-REQUIRED from RNS-B 3G_MSC-B shall select one bearer to be handed over if the UE is engaged with multiple bearers. After that, the 3G_MSC-B generates an A-HO-REQUEST message for the selected bearer and sends it to 3G_MSC-A over MAP-PREPARE-SUBSEQUENT-HANDOVER request with indication of RAB ID of the selected bearer.</p>
<p>Upon receipt of the MAP-PREPARE-SUBSEQUENT-HANDOVER request from 3G_MSC-B, 3G_MSC-A starts a basic handover procedure towards MSC-B'.</p>
<p>When 3G_MSC-A receives the ACM from MSC-B', 3G_MSC-A informs 3G_MSC-B that MSC-B' has successfully allocated the radio resources on BSS-B' side by sending the MAP-PREPARE-SUBSEQUENT-HANDOVER response containing the complete A-HO-REQUEST-ACK received from BSS-B' and possible extra BSSAP information, amended by 3G_MSC-A due to the possible interworking between the BSSMAP protocol carried on the E-interface between 3G_MSC-A and MSC-B' and the BSSMAP protocol carried on the E-interface between 3G_MSC-A and 3G_MSC-B.</p>
<p>When MAP-PREPARE-SUBSEQUENT-HANDOVER response including an A-HO-REQUEST-ACK is received from 3G_MSC-A, 3G_MSC-B sends IU-RELOCATION-COMMAND, which indicates the bearers not to be handed over as bearers to be released, to RNS-A.</p>
<p>After 3G_MSC-A receives MAP-SEND-END-SIGNAL request from MSC-B', 3G_MSC-A shall release calls via MSC-B', which has been carried by the bearers not to be handed over, and then 3G_MSC-A sends MAP-SEND-END-SIGNAL response to 3G_MSC-B.</p>
<p><img alt="" src="../23009-g00.025.png" /></p>
<p>NOTE 1: Can be sent at any time after the reception of IAM.</p>
<p><strong>Figure 21: Subsequent handover procedure ii): Successful UMTS to GSM handover
from 3G_MSCB to MSCB' requiring a circuit connection</strong></p>
<h1 id="814-procedure-for-subsequent-umts-to-gsm-handover-not-requiring-a-circuit-connection">8.1.4 Procedure for subsequent UMTS to GSM handover not requiring a circuit connection</h1>
<p>As for the subsequent UMTS to GSM handover with a circuit connection, the same two cases of subsequent handover apply:</p>
<p>i)  the UE/MS moves back to the area of MSCA;</p>
<p>ii) the UE/MS moves into the area of a third MSC (MSCB').</p>
<h1 id="8141-description-of-subsequent-umts-to-gsm-handover-procedure-i-3g_msc-b-to-msc-a">8.1.4.1   Description of subsequent UMTS to GSM handover procedure i): 3G_MSCB to MSCA</h1>
<p>The procedure for successful UMTS to GSM handover from 3G_MSCB back to MSCA without circuit connection is shown in figure 22. The only difference with the figure 20, is that no circuit release is needed between MSCA and 3G_MSCB.</p>
<p><img alt="" src="../23009-g00.026.png" /></p>
<p><strong>Figure 22: Subsequent UMTS to GSM handover procedure i): Successful UMTS
to GSM handover from 3G_MSCB to MSCA not requiring a circuit connection</strong></p>
<h1 id="8142-description-of-the-subsequent-umts-to-gsm-handover-procedure-without-circuit-connection-ii-3g_msc-b-to-msc-b">8.1.4.2   Description of the subsequent UMTS to GSM handover procedure without circuit connection ii): 3G_MSCB to MSCB'</h1>
<p>The procedure for successful UMTS to GSM handover from 3G_MSCB to MSCB' is shown in figure 23.</p>
<p>The procedure consists of two parts:</p>
<p>-  a subsequent UMTS to GSM handover from 3G_MSCB back to 3G_MSCA as described in subclause 8.1.4.1 (the same procedures apply if 3G_MSC-A is replaced by MSC-A); and</p>
<p>-  a basic handover from 3G_MSCA to MSCB' as described in subclause 7.2.</p>
<p>The only difference to the equivalent figure 21 is the omission of the circuit and handover number allocation signallings.</p>
<p><img alt="" src="../23009-g00.027.png" /></p>
<p><strong>Figure 23: Subsequent UMTS to GSM handover procedure ii): Successful UMTS
to GSM handover from 3G_MSCB to MSCB' without circuit connection</strong></p>
<h1 id="82-handover-gsm-to-umts">8.2   Handover GSM to UMTS</h1>
<p>The following clauses describe two options for the Basic and Subsequent GSM to UMTS Handover procedures. The first, as described in subclauses 8.2.1 and 8.2.3 respectively, provides for a circuit connection between (3G_)MSCA and (3G_)MSCB. The second, as described in subclauses 8.2.2 and 8.2.4 respectively, provides for a Basic and Subsequent Handover without the provision of a circuit connection between (3G_)MSCA and (3G_)MSCB. In all the above mentioned clauses, the following principles apply:</p>
<p>a)  during the handover resource allocation, except for the messages explicitly indicated in b and c below, only the handover related messages that are part of the applicable BSSAP subset - as defined in 3GPP TS 49.008 [7] - shall be transferred on the E-interface;</p>
<p>b)  the trace related messages that are part of the applicable BSSAP subset - as defined in 3GPP TS 49.008 [7] - can be sent by the MSCA on the E-interface after successful handover resource allocation. In subclauses 8.2.1 and 8.2.2, it is however allowed at basic handover initiation on the E-Interface to transfer one trace related message that is part of the applicable BSSAP subset - as defined in 3GPP TS 49.008 [7] - together with the applicable handover related message. The applicable handover related message shall always appear as the first message;</p>
<p>c)  during the handover resource allocation for subsequent inter-MSC inter-system handover according to subclauses 8.2.3 and 8.2.4, it is allowed to transfer either DTAP or RANAP Direct Transfer messages on the E-Interface between MSC-A and 3G_MSC-B. RANAP Direct Transfer messages shall be used for this purpose if and only if the basic handover procedure was an inter MSC SRNS relocation;</p>
<p>d)  If 3G_MSC-B or 3G-MSC-B' supports location reporting at change of Service Area, 3G_MSC-B or 3G_MSC-B' shall always initiate the Location Reporting Control procedure at change of Service Area towards the target RNS since no request for Location Reporting can be received from MSC-A. In that case, the Location Reporting Control procedure shall be initiated by 3G_MSC-B or 3G-MSC-B' after the Relocation Resource Allocation procedure has been executed successfully. The change of Service Area shall be reported to MSC-A within an A-HANDOVER-PERFORMED message;</p>
<p>e)  during the handover execution, i.e. while the UE/MS is not in communication with the network, the MSCA shall queue all outgoing BSSAP or RANAP messages until the communication with the UE/MS is resumed;</p>
<p>f)  during the execution of a basic inter-system inter-MSC handover to 3G_MSC-B or a subsequent inter-system inter-MSC handover to a third 3G-MSC-B', only the handover related messages and the A-Clear-Request message that are part of the applicable BSSAP subset - as defined in 3GPP TS 49.008 [7] – may be sent by the target MSC on the E-interface;</p>
<p>g)  during a subsequent inter-system inter-MSC handover back to 3G_MSC-A or to a third 3G_MSC-B', 3G_MSC-B may initiate either an Iu-Release-Request procedure or an A-Clear-Request procedure on the E-interface. An Iu-Release-Request procedure shall be initiated only if the basic handover procedure was an inter-MSC SRNS relocation;</p>
<p>h)  finally, during supervision, i.e. while the UE/MS is not in the area of MSCA after a successful Inter-3G_MSC GSM to UMTS handover, the subset of BSSAP procedures and their related messages - as defined in 3GPP TS 49.008 [7] - shall apply on the E-Interface. As the only exception to this rule, in case of a subsequent inter-MSC SRNS relocation back to 3G_MSC-A or to a third 3G_MSC-B', during the relocation resource allocation, the relocation and trace related messages that are part of the applicable RANAP subset - as defined in 3GPP TS 29.108 [15] - shall be transferred on the E-interface (see subclause 8.3, a and b).</p>
<p>If a subsequent inter-MSC handover/relocation back to 3G_MSC-A or to a third 3G_MSC-B' is cancelled, then the supervision continues, and BSSAP procedures and their related messages shall apply on the E-interface;</p>
<p>i)  during the intra-3G_MSCB GSM to UMTS handover execution, if any, the 3G_MSCB shall queue all outgoing BSSAP or RANAP messages until the communication with the UE/MS is resumed.</p>
<h1 id="821-basic-handover-procedure-requiring-a-circuit-connection-between-msc-a-and-3g_msc-b">8.2.1 Basic Handover procedure requiring a circuit connection between MSCA and 3G_MSCB</h1>
<p>The procedure used for successful Inter-3G_MSC Handover from GSM to UMTS is shown in figure 24. Initiation of the GSM to UMTS handover procedure is described in clause 5. The procedure described in this clause makes use of messages from the 3GPP TS 48.008 [5], 3GPP TS 25.413 [11] and of the transport mechanism from the Mobile Application Part (MAP) (3GPP TS 29.002 [12]). After an Inter-3G_MSC handover further Intra-3G_MSC handovers may occur on 3G_MSCB, these handovers will follow the procedures specified in the previous clauses.</p>
<p><img alt="" src="../23009-g00.028.png" /></p>
<p>NOTE:   Can be sent at any time after the reception of IAM.</p>
<p><strong>Figure 24: Basic GSM to UMTS Handover Procedure requiring a circuit connection</strong></p>
<p>The GSM to UMTS handover is initiated as described in subclause 6.2.2. (This is represented by A-HO-REQUIRED in figure 24). Upon receipt of the A-HO-REQUIRED from BSS-A, MSCA shall send a MAP-PREPARE-HANDOVER request to 3G_MSCB including a complete A-HO-REQUEST message.</p>
<p>NOTE:   MSCA shall not send further MAP-PREPARE-HANDOVER requests while a MAP-PREPARE-HANDOVER response is pending or before any timeouts.</p>
<p>The MAP-PREPARE-HANDOVER request shall carry in the AHO-REQUEST all information needed by 3G_MSCB for allocating radio resources in RNS-B, see 3GPP TS 48.008 [5].</p>
<p>The MAP-PREPARE-HANDOVER request shall also carry the identity of the target RNS to which the call is to be handed over, see 3GPP TS 29.002 [12].</p>
<p>If MSC-A supports inter-system handover to a CSG cell and BSS-A includes a CSG ID for the target cell in the A-HANDOVER-REQUIRED message, then MSC-A shall check the CSG membership of the UE for the target cell as described in subclause 4.1.1 before generating the MAP-PREPARE-HANDOVER request. If the UE fails the CSG membership check and the target cell is a CSG cell, MSC-A shall send an A-HANDOVER-REQUIRED-REJECT to BSS-A.</p>
<p>If MSC-A supports inter-system handover to a CSG cell, the target cell belongs to the registered PLMN or an equivalent PLMN, and the HLR or the CSS provided CSG subscription data, MSC-A shall include the CSG subscription data for the registered PLMN and, if available, for the equivalent PLMNs in the MAP-PREPARE-HANDOVER request.</p>
<p>3G_MSCB will return the MAP-PREPARE-HANDOVER response after having retrieved a Handover Number from its associated VLR (exchange of the messages MAP-allocate-handover-number request and MAP-send-handover-report request). The Handover Number shall be used for routing the connection of the call from MSCA to 3G_MSCB.</p>
<p>For speech calls, if 3G_MSC-B supports the selection of codec based on the Iu-Supported Codecs List, 3G_MSCB shall select an Iu Selected codec from the Iu Supported Codecs List, generate associated RAB parameters and connect a transcoder. If the Iu Supported Codecs List was not received or 3G_MSC-B does not support the selection of codec based on the Iu-Supported Codecs List, 3G_MSCB shall select the appropriate default speech codec. </p>
<p>For handover to UTRAN Iu mode, 3G_MSC-B shall also generate a NAS Synch Indicator for the Iu-RELOCATION-REQUEST message. If the Iu Supported Codecs List was received by 3G_MSC-B and 3G_MSC-B supports the selection of codec based on the Iu-Supported Codecs List, then the Iu Selected codec shall be indicated in the MAP-PREPARE-HANDOVER response, sent from 3G_MSCB to MSCA.</p>
<p>If A over IP is supported by MSC-A, then for speech calls MSC-A may include the AoIP-Supported Codecs List (Anchor) in the MAP-PREPARE-HANDOVER request to be used by 3G_MSC-B for subsequent intra-MSC-B intersystem handover to A over IP capable BSC. For a detailed description of the handling of this codec list by MSCA and 3G_MSC-B see 3GPP TS 23.153 [25].</p>
<p>If radio resources are available in RNS-B the MAP-PREPARE-HANDOVER response will contain the complete A-HO-REQUEST-ACK message generated from the Iu-RELOCATION-REQUEST-ACK received from RNS-B, containing the radio resources definition to be sent by BSS-A to the UE/MS. If the radio resource allocation is not possible, the MAP-PREPARE-HANDOVER response containing an A-HO-FAILURE will be sent to MSCA. 3G_MSCB will do the same if a fault is detected on the identity of the cell where the call has to be handed over. 3G_MSCB simply reports the events related to the dialogue. It is up to MSCA to decide the action to perform if it receives negative responses or the operation fails due to the expiry of the MAP-PREPARE-HANDOVER timer.</p>
<p>If an error related to the TCAP dialogue or to the MAP-PREPARE-HANDOVER request is returned from 3G_MSCB, this will be indicated to MSCA and MSCA will terminate the handover attempt. MSCA shall reject the handover attempt towards BSS-A. The existing connection to the UE/MS shall not be cleared.</p>
<p>When the A-HO-REQUEST-ACK has been received, MSCA shall establish a circuit between MSCA and 3G_MSCB by signalling procedures supported by the network. In figure 24 this is illustrated by the messages IAM (Initial Address Message) and ACM (Address Complete Message) of Signalling System no 7. 3G_MSCB awaits the capturing of the UE/MS (subclause 6.2.2) on the radio path when the ACM is sent and MSCA initiates the handover execution when ACM is received (illustrated by the A-HO-COMMAND and described in subclause 6.2.2).</p>
<p>If the BSS-A was connected via an A interface over IP and no transcoding performed in the BSS then MSC-A shall remove the transcoder between the MSC and the other party.</p>
<p>3G_MSCB transfers to MSCA the acknowledgement received from the correct UE/MS (A-HO-DETECT/A-HO-COMPLETE). The Iu-RELOCATION-DETECT, if received, is converted to A-HO-DETECT and transferred to MSCA using the MAP-PROCESS-ACCESS-SIGNALLING request. The Iu-RELOCATION-COMPLETE, when received from the correct UE/MS, is converted to A-HO-COMPLETE and included in the MAP-SEND-END-SIGNAL request and sent back to MSCA. The circuit is through-connected in MSCA when the A-HO-DETECT or the AHOCOMPLETE is received from 3G_MSCB. The old radio channel is released when the A-HO-COMPLETE message is received from 3G_MSCB. The sending of the MAP-SEND-END-SIGNAL request starts the MAP supervision timer for the MAP dialogue between MSCA and 3G_MSCB. When the MAP-SEND-END-SIGNAL request including the A-HO-COMPLETE message is received in MSCA the resources in BSS-A shall be cleared.</p>
<p>In order not to conflict with the PSTN/ISDN signalling system(s) used between MSCA and 3G_MSCB, 3G_MSCB must generate an answer signal when Iu-RELOCATION-DETECT/COMPLETE is received.</p>
<p>3G_MSCB shall release the Handover Number when the circuit between MSCA and 3G_MSCB has been established.</p>
<p>If the circuit between MSCA and 3G_MSCB cannot be established (e.g. an unsuccessful backward message is received instead of ACM). MSCA terminates the inter3G_MSC handover attempt by sending an appropriate MAP message, for example an ABORT.</p>
<p>MSCA shall retain overall call control until the call is cleared by the fixed subscriber or the UE/MS and there is no further call control functions to be performed (e.g. servicing waiting calls, echo cancellers).</p>
<p>When MSCA clears the call to the UE/MS it also clears the call control functions in MSCA and sends the MAP-SEND-END-SIGNAL response to release the MAP resources in 3G_MSCB.</p>
<p>MSCA may terminate the procedure at any time by sending an appropriate MAP message to 3G_MSCB. If establishment of the circuit between MSCA and 3G_MSCB has been initiated, the circuit must also be cleared.</p>
<p>The GSM to UMTS handover will be aborted by MSCA if it detects clearing or interruption of the radio path before the call has been established on 3G_MSCB.</p>
<h1 id="822-basic-gsm-to-umts-handover-procedure-not-requiring-the-establishment-of-a-circuit-connection-between-msc-a-and-3g_msc-b">8.2.2 Basic GSM to UMTS Handover procedure not requiring the establishment of a circuit connection between MSCA and 3G_MSCB</h1>
<p>The basic GSM to UMTS handover procedures to be used when no circuit connection is required by MSCA are similar to those described in subclause 8.2.1 for circuit switched calls. The main differences to the procedures described in subclause 8.2.1 relate to the establishment of circuits between the network entities and the Handover Number allocation.</p>
<p>In the case of basic GSM to UMTS handover, MSCA shall specify to 3G_MSCB that no Handover Number is required in the MAP-PREPARE-HANDOVER request (see 3GPP TS 29.002 [12]). As for the basic GSM to UMTS handover using a circuit connection, the A-HO-REQUEST is transmitted at the same time. Any subsequent Handover Number allocation procedure will not be invoked until the completion of the basic GSM to UMTS handover procedure (see clause: Subsequent Channel Assignment using a circuit connection). 3G_MSCB shall then perform the radio resources allocation as described in subclause 8.2.1. The MAP-PREPARE-HANDOVER response shall be returned to MSCA including either the translated response of the radio resources allocation request received from RNS-B (A-HO-REQUEST-ACK/A-HO-FAILURE). The basic GSM to UMTS handover procedure will continue as described in clause 8.2.1 except that no circuit connection will be established towards 3G_MSCB.</p>
<p>The relevant case for the basic GSM to UMTS handover without circuit connection is shown in figure 25. As can be seen the major differences to the equivalent figure 24 are the omission of any circuit establishment messaging and the omission of handover number allocation signalling.</p>
<p><img alt="" src="../23009-g00.029.png" /></p>
<p><strong>Figure 25: Basic GSM to UMTS Handover Procedure without circuit connection</strong></p>
<h1 id="823-procedure-for-subsequent-gsm-to-umts-handover-requiring-a-circuit-connection">8.2.3 Procedure for subsequent GSM to UMTS handover requiring a circuit connection</h1>
<p>After the call has been handed over to MSCB, if the UE/MS leaves the GSM area of MSCB during the same call and enters a UTRAN area, subsequent GSM to UMTS handover is necessary in order to continue the connection.</p>
<p>The following cases apply:</p>
<p>i)  the UE/MS moves back to the area of 3G_MSCA;</p>
<p>ii) the UE/MS moves into the area of a third 3G_MSC (3G_MSCB').</p>
<p>In both cases the call is switched in 3G_MSCA; the circuit between 3G_MSCA and MSCB shall be released after a successful subsequent handover has been performed.</p>
<h1 id="8231-description-of-subsequent-gsm-to-umts-handover-procedure-i-msc-b-to-3g_msc-a">8.2.3.1   Description of subsequent GSM to UMTS handover procedure i): MSCB to 3G_MSCA</h1>
<p>The procedure for successful GSM to UMTS handover from MSCB back to 3G_MSCA is shown in figure 26.</p>
<p><img alt="" src="../23009-g00.030.png" /></p>
<p><strong>Figure 26: Subsequent GSM to UMTS handover procedure i): successful handover
from MSCB to 3G_MSCA using a circuit connection</strong></p>
<p>The procedure is as follows.</p>
<p>If MSC-B supports inter-system handover to a CSG cell, 3G_MSC-A provided CSG subscription data during the basic inter-MSC handover, and BSS-A includes a CSG ID for the target cell in the A-HANDOVER-REQUIRED message, then MSC-B shall check the CSG membership of the UE for the target cell as described in subclause 4.2.1 before generating the MAP-PREPARE- SUBSEQUENT-HANDOVER request. If the UE fails the CSG membership check and the target cell is a CSG cell, MSC-B shall send an A-HANDOVER-REQUIRED-REJECT to BSS-A.</p>
<p>MSCB sends the MAP-PREPARE-SUBSEQUENT-HANDOVER request to 3G_MSCA indicating the new MSC number (3G_MSCA number), indicating also the identity of the target RNS where the call has to be handed over and including a complete A-HO-REQUEST message. (NOTE: MSCB shall not send further MAP-PREPARE-SUBSEQUENT-HANDOVER requests while a handover attempt is pending or before any timeouts). Since 3G_MSCA is the call controlling MSC, this MSC needs no Handover Number for routing purposes; 3G_MSCA can immediately initiate the search for free radio resources. 3G_MSCA then inserts a transcoder between it's RNS and the connection to the other party. </p>
<p>When radio resources can be assigned, 3G_MSCA shall return in the MAP-PREPARE-SUBSEQUENT-HANDOVER response the complete A-HO-REQUEST-ACK message generated from the Iu-RELOCATION-REQUEST-ACK received from the RNS-B and possible extra BSSMAP information, amended by 3G_MSCA due to the possible interworking between the BSSMAP protocol carried on the E-interface and the RANAP protocol used on the Iu-interface. If radio resources cannot be assigned or if a fault is detected on the target cell identity, or the target cell identity in the A-HO-REQUEST is not consistent with the target MSC number, the MAP-PREPARE-SUBSEQUENT-HANDOVER response containing an A-HO-FAILURE message shall be given to MSCB, in addition MSCB shall maintain the connection with the UE/MS.</p>
<p>If the procedure in 3G_MSCA is successful then MSCB can request the UE/MS to retune to the new RNS-B on 3G_MSCA. This is illustrated in figure 26 by the A-HO-COMMAND message. The operation is successfully completed when 3G_MSCA receives the Iu-RELOCATION-COMPLETE message.</p>
<p>After GSM to UMTS handover 3G_MSCA shall release the circuit to MSCB.</p>
<p>3G_MSCA must also terminate the MAP procedure for the basic handover between 3G_MSCA and MSCB by sending an appropriate MAP message. MSCB will clear the resources in BSS-A when the MAP-SEND-END-SIGNAL response is received.</p>
<h1 id="8232-description-of-subsequent-gsm-to-umts-handover-procedure-ii-msc-b-to-3g_msc-b">8.2.3.2   Description of subsequent GSM to UMTS handover procedure ii): MSCB to 3G_MSCB'</h1>
<p>The procedure for successful GSM to UMTS handover from MSCB to 3G_MSCB' is shown in figure 27.</p>
<p>The procedure consists of two parts:</p>
<p>-  a subsequent handover from MSCB back to MSCA as described in subclause 7.3.1 (the same procedures apply if MSC-A is replaced by 3G_MSC-A); and</p>
<p>-  a basic GSM to UMTS handover from MSCA to 3G_MSCB' as described in subclause 8.2.1.</p>
<p>If MSC-B supports inter-system handover to a CSG cell and BSS-A includes a CSG ID for the target cell in the A-HANDOVER-REQUIRED message, then MSC-B shall check the CSG membership of the UE for the target cell as described in subclause 8.2.3.1 before initiating the procedure, and reject the handover if necessary.</p>
<p>MSCB sends the MAP-PREPARE-SUBSEQUENT-HANDOVER request to MSCA indicating a new MSC number (which is the identity of 3G_MSCB'), indicating also the identity of the target RNS where the call has to be handed over and including a complete A-HO-REQUEST, MSCA then starts a basic handover procedure towards 3G_MSCB'.</p>
<p>If MSC-A supports A interface over IP, then for speech calls MSC-A may include the AoIP-Supported Codecs List (Anchor) in the MAP-PREPARE-HANDOVER request towards 3G_MSCB'. For a detailed description of the handling of this codec list by MSC-A and 3G_MSC-B' see 3GPP TS 23.153 [25].</p>
<p>When MSCA receives the ACM from 3G_MSCB', MSCA informs MSCB that 3G_MSCB' has successfully allocated the radio resources on RNS-B' side by sending the MAP-PREPARE-SUBSEQUENT-HANDOVER response containing the complete A-HO-REQUEST-ACK generated from the RELOCATION-REQUEST-ACK received from RNS-B' and possible extra BSSMAP information, amended by MSCA due to the possible interworking between the BSSMAP protocol carried on the E-interface between MSCA and 3G_MSCB' and the BSSMAP protocol carried on the E-interface between MSCA and MSCB. Now MSCB can start the procedure on the radio path.</p>
<p>For MSCA the handover is completed when it has received the MAP-SEND-END-SIGNAL REQUEST from 3G_MSCB' containing the A-HO-COMPLETE generated from Iu-RECOLATION COMPLETE received from the RNS-B'. The circuit between MSCA and MSCB is released. MSCA also sends the MAP-SEND-END-SIGNAL response to MSCB in order to terminate the original MAP dialogue between MSCA and MSCB. MSCB releases the radio resources when it receives this message.</p>
<p>If no radio resources can be allocated by 3G_MSCB' or no circuit between MSCA and 3G_MSCB' can be established or a fault is detected on the target cell identity or the target cell identity in the A-HO-REQUEST is not consistent with the target MSC number, MSCA informs MSCB by using the A-HO-FAILURE message included in the MAP-PREPARE-SUBSEQUENT-HANDOVER response. MSCB shall maintain the existing connection with the UE/MS.</p>
<p>When the subsequent GSM to UMTS handover is completed, 3G_MSCB' is considered as 3G_MSCB. Any further inter-MSC handover is handled as described above for a subsequent handover.</p>
<p><img alt="" src="../23009-g00.031.png" /></p>
<p>NOTE 1: Can be sent at any time after the reception of IAM.</p>
<p><strong>Figure 27: Subsequent GSM to UMTS handover procedure ii): Successful handover
from MSCB to 3G_MSCB' requiring a circuit connection</strong></p>
<h1 id="824-procedure-for-subsequent-gsm-to-umts-handover-not-requiring-a-circuit-connection">8.2.4 Procedure for subsequent GSM to UMTS handover not requiring a circuit connection</h1>
<p>As for the subsequent GSM to UMTS handover with a circuit connection, the same two cases of subsequent handover apply:</p>
<p>i)  the UE/MS moves back to the area of 3G_MSCA;</p>
<p>ii) the UE/MS moves into the area of a third 3G_MSC (3G_MSCB').</p>
<h1 id="8241-description-of-subsequent-gsm-to-umts-handover-procedure-without-circuit-connection-i-msc-b-to-3g_msc-a">8.2.4.1   Description of subsequent GSM to UMTS handover procedure without circuit connection i): MSCB to 3G_MSCA</h1>
<p>The procedure for successful GSM to UMTS handover from MSCB back to 3G_MSCA without circuit connection is shown in figure 28. The only difference with the figure 26, is that no circuit release is needed between 3G_MSCA and MSCB.</p>
<p><img alt="" src="../23009-g00.032.png" /></p>
<p><strong>Figure 28: Subsequent GSM to UMTS handover procedure i): Successful handover
from MSCB to 3G_MSCA not requiring a circuit connection</strong></p>
<h1 id="8242-description-of-subsequent-gsm-to-umts-handover-procedure-without-circuit-connection-ii-msc-b-to-3g_msc-b">8.2.4.2   Description of subsequent GSM to UMTS handover procedure without circuit connection ii): MSCB to 3G_MSCB'</h1>
<p>The procedure for successful GSM to UMTS handover from MSCB to 3G_MSCB' is shown in figure 29.</p>
<p>The procedure consists of two parts:</p>
<p>-  a subsequent handover from MSCB back to MSCA as described in subclause 7.4.1 (the same procedures apply if MSC-A is replaced by 3G_MSC-A); and</p>
<p>-  a basic GSM to UMTS handover from MSCA to 3G_MSCB' as described in subclause 8.2.2.</p>
<p>The only difference to the equivalent figure 27 is the omission of the circuit and handover number allocation signallings.</p>
<p><img alt="" src="../23009-g00.033.png" /></p>
<p><strong>Figure 29: Subsequent GSM to UMTS handover procedure ii): Successful handover
from MSCB to 3G_MSCB' without circuit connection</strong></p>
<h1 id="83-srns-relocation">8.3   SRNS Relocation</h1>
<p>The following clauses describe two options for the Basic and Subsequent Relocation procedures. The first, as described in subclauses 8.3.1 and 8.3.3 respectively, provides for a circuit connection between 3G_MSCA and 3G_MSCB. The second, as described in subclauses 8.3.2 and 8.3.4 respectively, provides for a Basic and Subsequent Relocation without the provision of a circuit connection between 3G_MSCA and 3G_MSCB.</p>
<p>In all the above mentioned clauses, the following principles apply:</p>
<p>a)  during the relocation resource allocation, except for the messages explicitly indicated in b and c below, only the relocation related messages that are part of the applicable RANAP subset - as defined in 3GPP TS 29.108 [15] - shall be transferred on the E-interface;</p>
<p>b)  the trace related messages that are part of the applicable RANAP subset - as defined in  3GPP TS 29.108 [15] - can be sent by the 3G_MSCA on the E-interface after successful relocation resource allocation. In the clauses 8.3.1 and 8.3.2, it is however allowed at basic relocation initiation on the E-Interface to transfer one trace invocation related message that is part of the applicable RANAP subset - as defined in 3GPP TS 29.108 [15] - together with the applicable relocation related message. The applicable relocation related message shall always appear as the first message;</p>
<p>c)  during the relocation resource allocation for subsequent inter-MSC SRNS relocation according to subclauses 8.3.3 and 8.3.4, it is allowed to transfer either DTAP or RANAP Direct Transfer messages on the E-Interface between 3G_MSC-A and 3G_MSC-B. RANAP Direct Transfer messages shall be used for this purpose if and only if the basic handover procedure was an inter MSC SRNS relocation;</p>
<p>d)  the Iu-Location Reporting Control message which belongs to the applicable RANAP subset - as defined in 3GPP TS 29.108 [15] - can be sent by the 3G_MSCA on the E-interface after successful relocation resource allocation;</p>
<p>e)  during the relocation execution, i.e. while the UE is not in communication with the network, the 3G_MSCA shall queue all outgoing RANAP or BSSAP messages until the communication with the UE is resumed;</p>
<p>f)  during the execution of a basic inter-MSC SRNS relocation to 3G_MSC-B or a subsequent inter-MSC SRNS relocation to a third 3G-MSC-B', only the relocation related messages and the Iu-Release-Request message that are part of the applicable RANAP subset - as defined in 3GPP TS 29.108 [15] – may be sent by the target MSC on the E-interface;</p>
<p>g)  during a subsequent inter-MSC SRNS relocation back to 3G_MSC-A or to a third 3G_MSC-B', 3G_MSC-B may initiate either an Iu-Release-Request procedure or an A-Clear-Request procedure on the E-interface. An Iu-Release-Request procedure shall be initiated only if the basic handover procedure was an inter-MSC SRNS relocation;</p>
<p>h)  finally, during supervision, i.e. while the UE is not in the area of 3G_MSCA after a successful Inter-3G_MSC relocation, the subset of RANAP procedures and their related messages - as defined in 3GPP TS 29.108 [15] - shall apply on the E-Interface. As an exception to this rule, 3G_MSC-B shall notify 3G_MSC-A of a successfully completed subsequent intra-MSC-B intra GSM or inter-system handover by using the Internal Handover Indication procedure as specified in 3GPP TS 49.008 [7]. Furthermore, in case of a subsequent inter-MSC intra GSM or inter-system handover back to 3G_MSC-A or to a third 3G_MSC-B', during the handover resource allocation, the handover and trace related messages that are part of the applicable BSSAP subset - as defined in 3GPP TS 49.008 [7] - shall be transferred on the E-interface (see list items a and b in clause 7, subclauses 8.1 and 8.2, respectively).</p>
<p>If a subsequent inter-MSC handover/relocation back to 3G_MSC-A or to a third 3G_MSC-B' is cancelled, then the supervision continues, and RANAP procedures and their related messages shall apply on the E-interface.</p>
<p>NOTE:   A subsequent inter-MSC intra GSM or GSM to UMTS inter-system handover back to 3G_MSC-A or to a third 3G_MSC-B' can occur, e.g., if after the basic inter-MSC SRNS relocation to 3G_MSC-B the MS performed a subsequent intra-3G_MSC-B UMTS to GSM inter-system handover;</p>
<p>i)  during the intra-3G_MSCB relocation execution, if any, the 3G_MSCB shall queue all outgoing RANAP messages until the communication with the UE is resumed.</p>
<p>j)  after successful completion of the Intra-3G_MSC-B relocation, if 3G_MSC-B or 3G-MSC-B' has previously received an order to perform location reporting at change of Service Area from 3G_MSC-A, it shall act as specified in subclause 6.2.3.</p>
<h1 id="831-basic-relocation-procedure-requiring-a-circuit-connection-between-3g_msc-a-and-3g_msc-b">8.3.1 Basic relocation procedure requiring a circuit connection between 3G_MSCA and 3G_MSCB</h1>
<p>The procedure used for successful Inter-3G_MSC SRNS relocation is shown in figure 30. Initiation of the relocation procedure is described in clause 5. The procedure described in this clause makes use of messages from the 3GPP TS 25.413 [11] and of the transport mechanism from the Mobile Application Part (MAP) (3GPP TS 29.002 [12]). After an Inter-3G_MSC SRNS relocation further Intra-3G_MSC relocations may occur on 3G_MSCB, these relocations will follow the procedures specified in a previous clause.</p>
<p><img alt="" src="../23009-g00.034.png" /></p>
<p>NOTE 1: Can be sent at any time after the reception of IAM.</p>
<p><strong>Figure 30: Basic SRNS Relocation Procedure requiring a circuit connection</strong></p>
<h1 id="8311-with-one-circuit-connection">8.3.1.1   With one circuit connection</h1>
<p>The relocation is initiated as described in subclause 6.2.3. (This is represented by IU-RELOC-REQUIRED in figure 30). Upon receipt of the IU-RELOC-REQUIRED from RNS-A, 3G_MSCA shall send a MAP-PREPARE-HANDOVER request to 3G_MSCB including a complete IU-RELOC-REQUEST message. (NOTE: 3G_MSCA shall not send further MAP-PREPARE-HANDOVER requests while a MAP-PREPARE-HANDOVER response is pending or before any timeouts). The MAP-PREPARE-HANDOVER request shall carry in the IU-RELOC-REQUEST all information needed by 3G_MSCB for allocating radio resources in the case of SRNS relocation without Iur interface, see 3GPP TS 25.413 [11].</p>
<p>For speech calls, 3G_MSC-A shall include the Iu Currently used codec and the Iu Supported Codecs List in the MAP-PREPARE-HANDOVER request. 3G_MSCA shall configure the RANAP RAB parameters according to the appropriate default speech codec. For a relocation to UTRAN Iu mode, if this codec is different from the Iu Currently used codec, 3G_MSCA shall also include the NAS Synch Indicator for the default speech codec in the Iu-RELOCATION-REQUEST. </p>
<p>Alternatively, if 3G_MSC-B is known to support the use of the Iu Supported Codecs List, 3G_MSC-A may configure the RANAP RAB parameters according to the preferred codec and indicate this to 3G_MSC-B by including the RAB configuration indicator in the MAP-PREPARE-HANDOVER request. For a relocation to UTRAN Iu mode, if the preferred codec is different from the Iu Currently used codec, 3G_MSCA shall also include the NAS Synch Indicator for the preferred codec in the Iu-RELOCATION-REQUEST. The decision to use this option is based on internal configuration information in 3G_MSC-A.</p>
<p>MAP-PREPARE-HANDOVER request shall also carry the identity of the target RNS to which the call is to be relocated, see 3GPP TS 29.002 [12].</p>
<p>If 3G_MSC-A supports SRNS Relocation to a CSG cell and RNS-A includes a CSG ID for the target cell in the IU-RELOCATION-REQUIRED message, then 3G_MSC-A shall check the CSG membership of the UE for the target cell as described in subclause 4.3.1 before generating the MAP-PREPARE-HANDOVER request. If the UE fails the CSG membership check and the target cell is a CSG cell, 3G_MSC-A shall send an IU-RELOCATION-PREPARATION-FAILURE to RNS-A.</p>
<p>If 3G_MSC-A supports SRNS Relocation to a CSG cell, the target cell belongs to the registered PLMN or an equivalent PLMN, and the HLR or the CSS provided CSG subscription data, 3G_MSC-A shall include the CSG subscription data for the registered PLMN and, if available, for the equivalent PLMNs in the MAP-PREPARE-HANDOVER request.</p>
<p>3G_MSCB will return the MAP-PREPARE-HANDOVER response after having retrieved one or several Handover Numbers from its associated VLR (exchange of the messages MAP-allocate-handover-number request and MAP-send-handover-report request). The Handover Numbers shall be used for routing the connections of the calls from 3G_MSCA to 3G_MSCB.</p>
<p>If A over IP is supported by 3G_MSC-A, then for speech calls 3G_MSC-A may include the AoIP-Supported Codecs List (Anchor) in the MAP-PREPARE-HANDOVER request to be used by 3G_MSC-B for subsequent intra-3G_MSC-B intersystem handover to an A over IP capable BSS. For a detailed description of the handling of this codec list by 3G_MSC-A and 3G_MSC-B see 3GPP TS 23.153 [25].</p>
<p>For speech calls, if 3G_MSC-B supports the selection of codec based on the Iu-Supported Codecs List, 3G_MSCB shall select an Iu Selected codec from the Iu Supported Codecs List and connect a transcoder. If the Iu Supported Codecs List was not received or 3G_MSC-B does not support the selection of codec based on the Iu-Supported Codecs List, 3G_MSCB shall select the appropriate default speech codec. </p>
<p>3G_MSC-B shall reconfigure the RANAP RAB parameters according to the Iu Selected codec:</p>
<p>-  if the RAB configuration indicator is included in the MAP-PREPARE-HANDOVER request and the codec selected by 3G_MSC-B is different from the preferred codec; or</p>
<p>-  if the RAB configuration indicator is not included in the MAP-PREPARE-HANDOVER request and the codec selected by 3G_MSC-B is different from the appropriate default speech codec.</p>
<p>Additionally, for a relocation to UTRAN Iu mode, if the Iu Selected codec is different from the Iu Currently used codec, 3G_MSC-B shall include the NAS Synch Indicator for the Iu Selected codec in the Iu-RELOCATION-REQUEST. If the Iu Supported Codecs List was received by 3G_MSC-B and 3G_MSC-B supports the selection of codec based on the Iu-Supported Codecs List, then the Iu Selected codec shall be indicated in the MAP-PREPARE-HANDOVER response, sent from 3G_MSCB to 3G_MSCA.</p>
<p><code></code>If radio resources are available in 3G_MSCB, the MAP-PREPARE-HANDOVER response will contain the complete IU-RELOC-REQUEST-ACKNOWLEDGE message received from RNS-B, containing the radio resources definition to be sent by RNS-A to the UE (in case of relocation without Iur interface) and possible extra RANAP information, amended by 3G_MSCB due to the possible interworking between the RANAP protocol carried on the E-interface and the RANAP protocol used on the Iu-interface. If the radio resource allocation is not possible, the MAP-PREPARE-HANDOVER response containing an IU-RELOCATION-FAILURE will be sent to 3G_MSCA. 3G_MSCB will do the same if a fault is detected on the identity of the RNS where the call has to be relocated. 3G_MSCB simply reports the events related to the dialogue. It is up to 3G_MSCA to decide the action to perform if it receives negative responses or the operation fails due to the expiry of the MAP-PREPARE-HANDOVER timer.</p>
<p>If an error related to the TCAP dialogue or to the MAP-PREPARE-HANDOVER request is returned from 3G_MSCB, this will be indicated to 3G_MSCA and 3G_MSCA will terminate the relocation attempt. The existing connection to the UE shall not be cleared.</p>
<p>When the IU-RELOC-REQUEST-ACKNOWLEDGE has been received, 3G_MSCA shall establish a circuit between 3G_MSCA and 3G_MSCB by signalling procedures supported by the network. In figure 30 this is illustrated by the messages IAM (Initial Address Message) and ACM (Address Complete Message) of Signalling System no 7. 3G_MSCB awaits the capturing of the UE (subclause 6.2.3) on the radio path when the ACM is sent and 3G_MSCA initiates the relocation execution when ACM is received (illustrated by the IU-RELOC-COMMAND and described in subclause 6.2.3). 3G_MSCA shall remove the transcoder between the MSC and other party.</p>
<p>3G_MSCB transfers to 3G_MSCA the acknowledgement received from the correct UE (IU-RELOC-DETECT/IU-RELOC-COMPLETE). The IU-RELOC-DETECT, if received, is transferred to 3G_MSCA using the MAP-PROCESS-ACCESS-SIGNALLING request. The IU-RELOC-COMPLETE, when received from the correct UE, is included in the MAP-SEND-END-SIGNAL request and sent back to 3G_MSCA. The circuit is through connected in 3G_MSCA when the IU-RELOC-DETECT or the IU-RELOC-COMPLETE is received from 3G_MSCB. The old radio resources are released when the IU-RELOC-COMPLETE message is received from 3G_MSCB. The sending of the MAP-SEND-END-SIGNAL request starts the MAP supervision timer for the MAP dialogue between 3G_MSCA and 3G_MSCB. When the MAP-SEND-END-SIGNAL request including the IU-RELOC-COMPLETE message is received in 3G_MSCA, the resources in RNS-A shall be released.</p>
<p>In order not to conflict with the PSTN/ISDN signalling system(s) used between 3G_MSCA and 3G_MSCB, 3G_MSCB must generate an answer signal when IU-RELOC-DETECT/COMPLETE is received.</p>
<p>3G_MSCB shall release the Handover Number when the circuit between 3G_MSCA and 3G_MSCB has been established.</p>
<p>If the circuit between 3G_MSCA and 3G_MSCB cannot be established, (e.g. an unsuccessful backward message is received instead of ACM) 3G_MSCA terminates the inter-3G_MSC relocation attempt by sending an appropriate MAP message, for example an ABORT.</p>
<p>3G_MSCA shall retain overall call control until the call is cleared by the fixed subscriber or the UE and there is no further call control functions to be performed (e.g. servicing waiting calls, echo cancellers).</p>
<p>When 3G_MSCA clears the call to the UE it also clears the call control functions in 3G_MSCA and sends the MAP-SEND-END-SIGNAL response to release the MAP resources in 3G_MSCB.</p>
<p>3G_MSCA may terminate the procedure at any time by sending an appropriate MAP message to 3G_MSCB. If establishment of the circuit between 3G_MSCA and 3G_MSCB has been initiated, the circuit must also be cleared.</p>
<p>The relocation will be aborted by 3G_MSCA if it detects release or interruption of the radio path before the call has been established on 3G_MSCB.</p>
<h1 id="8312-with-multiple-circuit-connections-optional-functionality">8.3.1.2   With multiple circuit connections (Optional functionality)</h1>
<h1 id="83121-3g_msc-b-does-not-support-multiple-bearers">8.3.1.2.1 3G_MSC-B does not support multiple bearers</h1>
<p>If 3G_MSC-A supports the optional supplementary service Multicall (See 3GPP TS 23.135 [17]), 3G_MSC-A shall have the following functionality additionally to the description in subclause 8.3.1.1.</p>
<p>Upon receipt of the IU-RELOCATION-REQUIRED from RNS-A, 3G_MSC-A generates IU-RELOCATION-REQUEST and sends a MAP-PREPARE-HANDOVER request to 3G_MSC-B including the IU-RELOCATION-REQUEST message, which may include multiple bearers. If 3G_MSC-A receives an indication that 3G_MSC-B does not support multiple bearers, 3G_MSC-A shall select one bearer to be handed over if the UE is engaged with multiple bearers. 3G_MSC-A reconstructs IU-RELOCATION-REQUEST and sends again a MAP-PREPARE-HANDOVER request to 3G_MSC-B including the IU-RELOCATION-REQUEST message, which includes only the selected bearer.</p>
<p>When MAP-PREPARE-HANDOVER response including an IU-RELOCATION-REQUEST-ACK is received from 3G_MSC-B, 3G_MSC-A sends IU-RELOCATION-COMMAND, which indicates the bearers not to be handed over as bearers to be released, to RNS-A.</p>
<p>After 3G_MSC-A receives MAP-SEND-END-SIGNAL request from 3G_MSC-B, 3G_MSC-A shall release calls via 3G_MSC-B, which has been carried by the bearers not to be handed over, and then 3G_MSC-A sends IU-RELEASE-COMMAND to RNS-A.</p>
<h1 id="83122-3g_msc-b-supports-multiple-bearers">8.3.1.2.2 3G_MSC-B supports multiple bearers</h1>
<p>If 3G_MSC-A and 3G_MSC_B support the optional supplementary service Multicall (See 3GPP TS 23.135 [17]), 3G_MSC-A and 3G_MSC-B shall have the following functionality additionally to the description in subclause 8.3.1.1.</p>
<p>Upon receipt of the IU-RELOCATION-REQUIRED from RNS-A, 3G_MSC-A generates IU-RELOCATION-REQUEST and sends a MAP-PREPARE-HANDOVER request to 3G_MSC-B including the IU-RELOCATION-REQUEST message, which may include multiple bearers.</p>
<p>When MAP-PREPARE-HANDOVER request including an IU-RELOCATION-REQUEST message is received by the 3G_MSC-B and the number of bearers included in the IU-RELOCATION-REQUEST message has exceeded the maximum number of bearers supported by 3G_MSC-B, the 3G_MSC-B shall select several bearers so that the number of bearers will fulfil the range of 3G_MSC-B capability. In this case 3G_MSC-B shall reconstruct IU-RELOCATION-REQUEST message to cope with the capability of 3G_MSC-B. The 3G_MSC-B shall retrieve multiple Handover Numbers from its associated VLR (exchange of the messages MAP-allocate-handover-number request and MAP-send-handover-report request several times). The number of Handover Numbers depends on the number of RAB IDs in the reconstructed IU-RELOCATION-REQUEST.</p>
<p>After the completion of Handover Number allocation 3G_MSC-B may select several bearers and reconstruct IU-RELOCATION-REQUEST again if the number of successfully allocated Handover Numbers is less than the number of required bearers, and sends IU-RELOCATION-REQUEST to RNS-B.</p>
<p>After the reception of IU-RELOCATION-REQUEST-ACK from RNS-B, the 3G_MSC-B shall generate Relocation Number List, which includes couples of RAB ID (See 3GPP TS 25.413 [11]) and Handover Number successfully allocated. Then the 3G_MSC-B sends MAP-PREPARE-HANDOVER response including Relocation Number List back to the 3G_MSC-A.</p>
<p>Upon receipt of the MAP-PREPARE-HANDOVER response 3G_MSC-A shall establish circuits between 3G_MSC-A and 3G_MSC-B by signalling procedures supported by the network according to the Relocation Number List. When 3G_MSC-A receives all the results from attempted circuits (the results may be successful ACM message or unsuccessful backward message for each attempt) and if at least one circuit has been successfully established, 3G_MSC-A sends IU-RELOCATION-COMMAND, which indicates the bearers failed to set up in RNS-B and the bearers associated with circuits which has failed to set up as bearers to be released, to RNS-A.</p>
<p>After 3G_MSC-A receives MAP-SEND-END-SIGNAL request from 3G_MSC-B, 3G_MSC-A shall release calls via 3G_MSC-B, which has been carried by the bearers failed to set up in RNS-B and the bearers associated with circuits which has failed to set up, and then 3G_MSC-A sends IU-RELEASE-COMMAND to RNS-A.</p>
<p>If no circuit connection has been successfully established 3G_MSC-A terminates the inter-3G_MSC relocation attempt by sending an appropriate MAP massage, for example ABORT.</p>
<h1 id="832-basic-relocation-procedure-not-requiring-the-establishment-of-a-circuit-connection-between-3g_msc-a-and-3g_msc-b">8.3.2 Basic relocation procedure not requiring the establishment of a circuit connection between 3G_MSCA and 3G_MSCB</h1>
<p>The basic SRNS relocation procedures to be used when no circuit connection is required by 3G_MSCA are similar to those described in subclause 8.3.1 for circuit switched calls. The main differences to the procedures described in subclause 8.3.1 relate to the establishment of circuits between the network entities and the Handover Number allocation.</p>
<p>In the case of basic relocation, 3G_MSCA shall specify to 3G_MSCB that no Handover Number is required in the MAP-PREPARE-HANDOVER request (see 3GPP TS 29.002 [12]). As for the basic relocation using a circuit connection, the IU-RELOC-REQUEST is transmitted at the same time together with the identity of the target RNS to which the call is to be relocated. Any subsequent Handover Number allocation procedure will not be invoked until the completion of the basic relocation procedure (see clause: Subsequent Channel Assignment using a circuit connection). 3G_MSCB shall then perform the radio resources allocation as described in subclause 8.3.1 if applicable. The MAP-PREPARE-HANDOVER response shall be returned to 3G_MSCA including either the response of the radio resources allocation request received from RNS-B (IU-RELOC-REQUEST-ACKNOWLEDGE/IU-RELOC-FAILURE with possible extra RANAP information. This extra information is amended by 3G_MSCB due to the possible interworking between the RANMAP protocol carried on the E-interface and the RANAP protocol used on the Iu-interface). The basic relocation procedure will continue as described in subclause 8.3.1 except that no circuit connection will be established towards 3G_MSCB.</p>
<p>The relevant case for the basic relocation without circuit connection is shown in figure 31. As can be seen the major differences to the equivalent figure 30 are the omission of any circuit establishment messaging and the omission of handover number allocation signalling.</p>
<p><img alt="" src="../23009-g00.035.png" /></p>
<p><strong>Figure 31: Basic SRNS relocation procedure without a circuit connection</strong></p>
<h1 id="833-procedure-for-subsequent-relocation-requiring-a-circuit-connection">8.3.3 Procedure for subsequent relocation requiring a circuit connection</h1>
<p>After the call has been relocated to 3G_MSCB, if the UE leaves the area of 3G_MSCB during the same call, subsequent relocation is necessary in order to continue the connection when no Iur interface exists between the involved RNSs, or to optimise the transmission path when the Iur interface is used.</p>
<p>The following cases apply:</p>
<p>i)  the UE moves back to the area of 3G_MSCA;</p>
<p>ii) the UE moves into the area of a third 3G_MSC (3G_MSCB').</p>
<p>In both cases the call is switched in 3G_MSCA; the circuit between 3G_MSCA and 3G_MSCB shall be released after a successful subsequent relocation has been performed.</p>
<p>If 3G_MSC-A is replaced by MSC-A in the procedures, then a subsequent relocation from 3G_MSC-B to 3G_MSC-B' shall not be possible since MSC-A does not support the RANAP protocol.</p>
<h1 id="8331-description-of-subsequent-relocation-procedure-i-3g_msc-b-to-3g_msc-a">8.3.3.1   Description of subsequent relocation procedure i): 3G_MSCB to 3G_MSCA</h1>
<p>The procedure for successful relocation from 3G_MSCB back to 3G_MSCA is shown in figure 32.</p>
<p><img alt="" src="../23009-g00.036.png" /></p>
<p><strong>Figure 32: Subsequent relocation procedure i) successful relocation
from 3G_MSCB to 3G_MSCA using a circuit connection</strong></p>
<h1 id="83311-with-one-circuit-connection">8.3.3.1.1 With one circuit connection</h1>
<p>The procedure is as follows.</p>
<p>If 3G_MSC-B supports SRNS Relocation to a CSG cell, 3G_MSC-A provided CSG subscription data during the basic inter-MSC handover/relocation, and RNS-A includes a CSG ID for the target cell in the IU-RELOCATION-REQUIRED message, then 3G_MSC-B shall check the CSG membership of the UE for the target cell as described in subclause 4.4.1 before generating the MAP-PREPARE-SUBSEQUENT-HANDOVER request. If the UE fails the CSG membership check and the target cell is a CSG cell, 3G_MSC-B shall send an IU-RELOCATION-PREPARATION-FAILURE message to RNS-A.</p>
<p>3G_MSCB sends the MAP-PREPARE-SUBSEQUENT-HANDOVER request to 3G_MSCA indicating the new 3G_MSC number (3G_MSCA number), indicating also the identity of the  target RNS where the call has to be relocated and including a complete IU-RELOC-REQUEST message.</p>
<p>For speech calls, 3G_MSC-B shall configure the RANAP RAB parameters according to the appropriate default speech codec. For a relocation to UTRAN Iu mode, if this codec is different from the Iu Currently used codec, 3G_MSCB shall also include the NAS Synch Indicator for the default speech codec in the Iu-RELOCATION-REQUEST.</p>
<p>Alternatively, if 3G_MSC-A is known to support the use of the Iu Supported Codecs List, 3G_MSC-B may configure the RANAP RAB parameters according to the preferred codec and indicate this to 3G_MSC-A by including the RAB configuration indicator in the MAP-PREPARE-SUBSEQUENT-HANDOVER request. For a relocation to UTRAN Iu mode, if the preferred codec is different from the Iu Currently used codec, 3G_MSCB shall also include the NAS Synch Indicator for the preferred codec in the Iu-RELOCATION-REQUEST.</p>
<p>NOTE:   3G_MSCB shall not send further MAP-PREPARE-SUBSEQUENT-HANDOVER requests while a relocation attempt is pending or before any timeouts.</p>
<p>Since 3G_MSCA is the call controlling 3G_MSC, this 3G_MSC needs no Handover Number for routing purposes; 3G_MSCA can immediately initiate the relocation towards the target RNS.</p>
<p>For speech calls, 3G_MSCA shall select an Iu Selected codec and connect a transcoder. </p>
<p>3G_MSC-A shall reconfigure the RANAP RAB parameters according to the Iu Selected codec:</p>
<p>-  if the RAB configuration indicator is included in the MAP-PREPARE-SUBSEQUENT-HANDOVER request, and the codec selected by 3G_MSCA is different from the preferred codec; or</p>
<p>-  if the RAB configuration indicator is not included in the MAP-PREPARE-SUBSEQUENT-HANDOVER request and the codec selected by 3G_MSCA is different from the appropriate default speech codec.</p>
<p>Additionally, for a relocation to UTRAN Iu mode, if the Iu Selected codec is different from the Iu Currently used codec, 3G_MSC-A shall include the NAS Synch Indicator for the Iu Selected codec in the Iu-RELOCATION-REQUEST.</p>
<p>When relocation can be initiated, 3G_MSCA shall return in the MAP-PREPARE-SUBSEQUENT-HANDOVER response the complete IU-RELOC-REQUEST-ACKNOWLEDGE message received from the RNS-B and possible extra RANAP information, amended by 3G_MSCA due to the possible interworking between the RANAP protocol carried on the E-interface and the RANAP protocol used on the Iu-interface. If a radio resource cannot be assigned or if a fault is detected on the target RNS identity, or the target RNS identity in the IU-RELOC-REQUEST is not consistent with the target 3G_MSC number, the MAP-PREPARE-SUBSEQUENT-HANDOVER response containing an IU-RELOC-FAILURE message shall be given to 3G_MSCB, in addition 3G_MSCB shall maintain the connection with the UE.</p>
<p>If the procedure in 3G_MSCA is successful then 3G_MSCB can request the UE to retune to the new RNS-B on 3G_MSCA in the case of relocation without Iur interface, or request RNS-B to become serving RNS in the case of relocation with Iur interface. This is illustrated in figure 32 by the IU-RELOC-COMMAND message. The operation is successfully completed when 3G_MSCA receives the IU-RELOC-COMPLETE message.</p>
<p>After relocation 3G_MSCA shall release the circuit to 3G_MSCB.</p>
<p>3G_MSCA must also terminate the MAP procedure for the basic relocation between 3G_MSCA and 3G_MSCB by sending an appropriate MAP message. 3G_MSCB will release the resources in RNS-A when the MAP-SEND-END-SIGNAL response is received.</p>
<h1 id="83312-with-multiple-circuit-connections-optional-functionality">8.3.3.1.2 With multiple circuit connections (Optional functionality)</h1>
<p>If 3G_MSC-A and 3G_MSC_B support the optional supplementary service Multicall (See 3GPP TS 23.135 [17]), 3G_MSC-A and 3G_MSC-B shall have the following functionality additionally to the description in subclause 8.3.3.1.1.</p>
<p>Upon receipt of the IU-RELOCATION-REQUIRED from RNS-A, 3G_MSC-B generates IU-RELOCATION-REQUEST which may include several bearers and sends it to 3G_MSC-A over MAP-PREPARE-SUBSEQUENT-HANDOVER request.</p>
<p>3G_MSC-A sends IU-RELOCATION-REQUEST to RNS-B and receives IU-RELOCATION-REQUEST-ACK.</p>
<p>When MAP-PREPARE-SUBSEQUENT-HANDOVER response is received from 3G_MSC-A, 3G_MSC-B sends IU-RELOCATION-COMMAND, which indicates the bearers failed to set up in RNS-B as bearers to be released, to RNS-A.</p>
<p>After 3G_MSC-A receives IU-RELOCATION-COMPLETE message from RNS-B, 3G_MSC-A shall release calls via RNS-B, which has been carried by the bearers failed to set up in RNS-B, and then 3G_MSC-A sends MAP-SEND-END-SIGNAL response to 3G_MSC-B.</p>
<h1 id="8332-description-of-subsequent-relocation-procedure-ii-3g_msc-b-to-3g_msc-b">8.3.3.2   Description of subsequent relocation procedure ii): 3G_MSCB to 3G_MSCB'</h1>
<p>The procedure for successful relocation from 3G_MSCB to 3G_MSCB' is shown in figure 33.</p>
<p>The procedure consists of two parts:</p>
<p>-  a subsequent relocation from 3G_MSCB back to 3G_MSCA as described in subclause 8.3.3.1; and</p>
<p>-  a basic relocation from 3G_MSCA to 3G_MSCB' as described in subclause 8.3.1.</p>
<h1 id="83321-with-one-circuit-connection">8.3.3.2.1 With one circuit connection</h1>
<p>If 3G_MSC-B supports SRNS Relocation to a CSG cell and RNS-A includes a CSG ID for the target cell in the IU-RELOCATION-REQUIRED message, then 3G_MSC-B shall check the CSG membership of the UE for the target cell as described in subclause 8.3.3.1.1 before initiating the procedure, and reject the handover if necessary.</p>
<p>3G_MSCB sends the MAP-PREPARE-SUBSEQUENT-HANDOVER request to 3G_MSCA indicating a new 3G_MSC number (which is the identity of 3G_MSCB'), indicating also the target RNS identity and including a complete IU-RELOC-REQUEST, 3G_MSCA then starts a basic relocation procedure towards 3G_MSCB'.</p>
<p>For speech calls, 3G_MSC-B shall configure the RANAP RAB parameters according to the appropriate default speech codec. For a relocation to UTRAN Iu mode, if this codec is different from the Iu Currently used codec, 3G_MSCB shall also include the NAS Synch Indicator for the default speech codec in the Iu-RELOCATION-REQUEST.</p>
<p>Alternatively, if 3G_MSC-A and 3G_MSC-B' are known to support the use of the Iu Supported Codecs List, 3G_MSC-B may configure the RANAP RAB parameters according to the preferred codec and indicate this to 3G_MSC-A by including the RAB configuration indicator in the MAP-PREPARE-SUBSEQUENT-HANDOVER request. For a relocation to UTRAN Iu mode, if the preferred codec is different from the Iu Currently used codec, 3G_MSCB shall also include the NAS Synch Indicator for the preferred codec in the Iu-RELOCATION-REQUEST. The decision to use this option is based on internal configuration information in 3G_MSC-B.</p>
<p>If 3G_MSC-A supports A interface over IP, then for speech calls 3G_MSC-A may include the AoIP-Supported Codecs List (Anchor) in the MAP-PREPARE-HANDOVER request towards 3G_MSCB'. For a detailed description of the handling of this codec list by 3G_MSC-A and 3G_MSC-B' see 3GPP TS 23.153 [25].</p>
<p>When 3G_MSCA receives the ACM from 3G_MSCB', 3G_MSCA informs 3G_MSCB that 3G_MSCB' has successfully allocated the radio resources on RNS-B' side by sending the MAP-PREPARE-SUBSEQUENT-HANDOVER response containing the complete IU-RELOC-REQUEST-ACKNOWLEDGE received from RNS-B' and possible extra RANAP information, amended by 3G_MSCA due to the possible interworking between the RANAP protocol carried on the E-interface between 3G_MSCA and 3G_MSCB' and the RANAP protocol carried on the Einterface between 3G_MSCA and 3G_MSCB. Now 3G_MSCB can start the procedure on the radio path if needed.</p>
<p>For 3G_MSCA the relocation is completed when it has received the MAP-SEND-END-SIGNAL REQUEST from 3G_MSCB'containing the IU-RELOC-COMPLETE received from the RNS-B'. The circuit between 3G_MSCA and 3G_MSCB is released. 3G_MSCA also sends the MAP-SEND-END-SIGNAL response to 3G_MSCB in order to terminate the original MAP dialogue between 3G_MSCA and 3G_MSCB. 3G_MSCB releases the radio resources when it receives this message.</p>
<p>If no radio resource can be allocated by 3G_MSCB' or no circuit between 3G_MSCA and 3G_MSCB' can be established or a fault is detected on the target RNS identity or the target RNS identity in the IU-RELOC-REQUEST is not consistent with the target 3G_MSC number, 3G_MSCA informs 3G_MSCB by using the IU-RELOC-FAILURE message included in the MAP-PREPARE-SUBSEQUENT-HANDOVER response. 3G_MSCB shall maintain the existing connection with the UE.</p>
<p>When the subsequent relocation is completed, 3G_MSCB' is considered as 3G_MSCB. Any further inter-3G_MSC relocation is handled as described above for a subsequent relocation.</p>
<h1 id="83322-with-multiple-circuit-connections-optional-functionality">8.3.3.2.2 With multiple circuit connections (Optional functionality)</h1>
<p>If 3G_MSC-A and 3G_MSC-B support the optional supplementary service Multicall (See 3GPP TS 23.135 [17]), 3G_MSC-A and 3G_MSC-B shall have the following functionality additionally to the description in subclause 8.3.3.2.1.</p>
<p>Upon receipt of the IU-RELOCATION-REQUIRED from RNS-B 3G_MSC-B generates an IU-RELOCATION-REQUEST message which may include multiple bearer and sends it to 3G_MSC-A over MAP-PREPARE-SUBSEQUENT-HANDOVER request.</p>
<p>Upon receipt of the MAP-PREPARE-SUBSEQUENT-HANDOVER request from 3G_MSC-B, 3G_MSC-A starts a basic relocation procedure towards 3G_MSC-B'.</p>
<h1 id="833221-3g_msc-b-does-not-support-multiple-bearers">8.3.3.2.2.1   3G_MSC-B' does not support multiple bearers</h1>
<p>If 3G_MSC-A receives an indication that 3G_MSC-B' does not support multiple bearers, 3G_MSC-A shall select one bearer to be handed over. 3G_MSC-A reconstructs IU-RELOCATION-REQUEST and sends again a MAP-PREPARE-HANDOVER request to 3G_MSC-B' including the IU-RELOCATION-REQUEST message, which includes only the selected bearer. Upon receipt of MAP-PREPARE-HANDOVER response from 3G_MSC-B', 3G_MSC-A shall reconstructs IU-RELOCATION-REQUEST-ACK to indicate the bearers not to be handed over as the bearers failed to set up in IU-RELOCATION-REQUEST-ACK and send it over MAP-PREPARE-SUBSEQUENT-HANDOVER response to 3G_MSC-B.</p>
<p>When MAP-PREPARE-SUBSEQUENT-HANDOVER response is received from 3G_MSC-A 3G_MSC-B sends IU-RELOCATION-COMMAND, which indicates the bearers failed to set up as bearers to be released, to RNS-A.</p>
<p>After 3G_MSC-A receives MAP-SEND-END-SIGNAL request from 3G_MSC-B', 3G_MSC-A shall release calls via 3G_MSC-B', which has been carried by the bearers failed to set up, and then 3G_MSC-A sends MAP-SEND-END-SIGNAL response to 3G_MSC-B.</p>
<h1 id="833222-3g_msc-b-supports-multiple-bearers">8.3.3.2.2.2   3G_MSC-B' supports multiple bearers</h1>
<p>If some of circuit connections failed to set up between 3G_MSC-A and 3G_MSC-B', 3G_MSC-A shall reconstruct IU-RELOCATION-REQUEST-ACK message so that the IU-RELOCATION-REQUEST-ACK includes only the bearers which have successfully established circuit connection and sends it to 3G_MSC-B over MAP-PREPARE-SUBSEQUENT-HANDOVER response.</p>
<p>When MAP-PREPARE-SUBSEQUENT-HANDOVER response is received from 3G_MSC-A 3G_MSC-B sends IU-RELOCATION-COMMAND, which indicates the bearers failed to set up as bearers to be released, to RNS-A.</p>
<p>After 3G_MSC-A receives MAP-SEND-END-SIGNAL request from 3G_MSC-B', 3G_MSC-A shall release calls via 3G_MSC-B', which has been carried by the bearers failed to set up, and then 3G_MSC-A sends MAP-SEND-END-SIGNAL response to 3G_MSC-B.</p>
<p><img alt="" src="../23009-g00.037.png" /></p>
<p>NOTE 1: Can be sent at any time after the reception of IAM.</p>
<p><strong>Figure 33: Subsequent relocation procedure ii) Successful SRNS relocation
from 3G_MSCB to 3G_MSCB' requiring a circuit connection</strong></p>
<h1 id="834-procedure-for-subsequent-relocation-not-requiring-a-circuit-connection">8.3.4 Procedure for subsequent relocation not requiring a circuit connection</h1>
<p>As for the subsequent relocation with a circuit connection between 3G_MSCA and 3G_MSCB, the same two cases of subsequent relocation apply:</p>
<p>i)  the UE moves back to the area of 3G_MSCA;</p>
<p>ii) the UE moves into the area of a third 3G_MSC (3G_MSCB'). </p>
<p>If 3G_MSC-A is replaced by MSC-A in the procedures, then a subsequent relocation from 3G_MSC-B to 3G_MSC-B' shall not be possible since MSC-A does not support the RANAP protocol.</p>
<h1 id="8341-description-of-subsequent-relocation-procedure-i-3g_msc-b-to-3g_msc-a">8.3.4.1   Description of subsequent relocation procedure i): 3G_MSCB to 3G_MSCA</h1>
<p>The procedure for successful relocation from 3G_MSCB back to 3G_MSCA without circuit connection is shown in figure 34. The only difference with the figure 32 is that no circuit release is needed between 3G_MSCA and 3G_MSCB.</p>
<p><img alt="" src="../23009-g00.038.png" /></p>
<p><strong>Figure 34: Subsequent relocation procedure i) successful relocation
from 3G_MSCB to 3G_MSCB not requiring a circuit connection</strong></p>
<h1 id="8342-description-of-subsequent-relocation-procedure-ii-3g_msc-b-to-3g_msc-b">8.3.4.2   Description of subsequent relocation procedure ii): 3G_MSCB to 3G_MSCB''</h1>
<p>The procedure for successful relocation from 3G_MSCB to 3G_MSCB' is shown in figure 35.</p>
<p>The procedure consists of two parts:</p>
<p>-  a subsequent relocation from 3G_MSCB back to 3G_MSCA as described in subclause 8.3.4.1; and</p>
<p>-  a basic relocation from 3G_MSCA to 3G_MSCB' as described in subclause 8.3.2.</p>
<p>The only difference to the equivalent figure 33 is the omission of the circuit and handover number allocation signallings.</p>
<p><img alt="" src="../23009-g00.039.png" /></p>
<p><strong>Figure 35: Subsequent relocation procedure ii) Successful SRNS relocation
from 3G_MSCB to 3G_MSCB' not requiring a circuit connection</strong></p>
<h1 id="9-detailed-procedures-in-msc-a">9 Detailed procedures in MSCA</h1>
<h1 id="91-bssmsc-and-msmsc-procedures-in-msc-a-functional-unit-1">9.1   BSS/MSC and MS/MSC procedures in MSCA (functional unit 1)</h1>
<p>The handover procedures in this functional unit consist of:</p>
<p>i)  signalling between the MS and the MSC;</p>
<p>ii) signalling between the BSS and the MSC for access management.</p>
<h1 id="92-call-control-procedures-msc-a-functional-unit-2">9.2   Call control procedures MSCA (functional unit 2)</h1>
<p>The call control procedures related to handover in MSCA can be divided into two functional entities:</p>
<p>-  the first entity is the call control procedure as part of the normal interworking between the PSTN/ISDN and the PLMN; for an MS originating call MSCA is the originating exchange, for an MS terminating call MSCA is the destination exchange;</p>
<p>-  the second entity is the call control procedure for the connection between MSCA and MSCB in case of a handover from MSCA to MSCB. For this call control procedure the following applies.</p>
<p>Call set-up:</p>
<p>-  the connection to MSCB is set up by procedures relevant to the signalling system used in the PSTN/ISDN to which MSCA is connected. The call is set up by using the MS Handover Number received from MSCB as part of the MAP procedure;</p>
<p>-  the call set-up direction will always be from MSCA to MSCB, even when the call was originally established by the MS. Functional unit 2 (see figure 2) should therefore keep information on call set-up direction in order to be able to interpret correctly any clearing signals (see below);</p>
<p>-  the unit should indicate the address complete condition to functional unit 3 and through-connect without awaiting the answer signal from MSCB. This applies also to signalling systems where address complete signals are not supported. In such cases an artificial address complete is established by functional unit 2.</p>
<p>Call clearing:</p>
<p>-  call clearing consists of two parts: after inter-MSC handover, clearing of the MS-BSS connection and clearing of the inter-MSC connection. If a request to release the call is generated by the network while the MS is re-tuning from one BSS to another BSS, then MSCA shall begin clearing the call to the network and queue the call release to the MS until the MS has resumed communication. This includes the case when MSCB and/or MSCB' are involved;</p>
<p>-  the MAP procedures are used to transfer information between MSCB and MSCA in order to maintain full call control within MSCA. MSCA determines, based on information received from MSCB, the appropriate signals (according to 3GPP TS 24.008 [10]) to be sent to the MS, and sends this information to MSCB;</p>
<p>-  when MSCA clears the call to the MS it also clears the call control functions in MSCB and sends the MAP-SEND-END-SIGNAL response to release the MAP resources in MSCB. The clearing of the connection is by procedures relevant to the signalling system in the PSTN/ISDN to which MSCA is connected;</p>
<p>-  when the Signalling System no 7 ISDN User Part is used, the normal symmetric release procedures apply on both the connection to the fixed network and to MSCB;</p>
<p>-  when a signalling system is used without a symmetric release possibility, some notice should be given to the clear-forward and clear-back procedures;</p>
<p>-  for MS terminating calls the following conditions apply on clear-forward and clear-back:</p>
<p>-  when a clear-forward signal is received on interface B' (see figure 1), MSCA clears the circuit to MSCB by normal clear-forward procedures;</p>
<p>-  when a clear-back signal is received from MSCB, MSCA starts normal clear-back procedures towards the fixed network (interface B') and sends the clear-forward signal on interface B'' in order to clear the connection with MSCB.</p>
<p>NOTE 1: This case corresponds to a fault situation.</p>
<p>-  for MS originated calls the following applies:</p>
<p>-  when MSCA receives a clear-back signal from MSCB, this signal must be interpreted as indicating a clear-forward condition. MSCA then clears both the connection on interface B' (see figure 1) and to MSCB by normal clear-forward procedures.</p>
<p>NOTE 2: This case corresponds to a fault situation.</p>
<p>-  when MSCA receives a clear-back signal on interface B', MSCA should distinguish between national and international connections:</p>
<p>-  for international connections where the Q.118 [1] supervision is done in the ISC, MSCA sends a clear-forward signal on both interface B' to the fixed network and interface B'' to MSCB;</p>
<p>-  for national connections or for international connections where the Q.118 [1] supervision is not done in the ISC, a timer is started according to national practice for clear-back supervision and MSCA proceeds as follows:</p>
<p>i)  if a clear-back signal is received from MSCB, MSCA interprets this as indicating a clear-forward condition and proceeds by clearing the connections on interface B' and to MSCB by normal clear-forward procedures;</p>
<p>ii) if the timer expires, MSCA proceeds by normal clear-forward of the connections on interface B' and to MSCB.</p>
<h1 id="93-handover-control-procedures-msc-a-functional-unit-3">9.3   Handover control procedures MSCA (functional unit 3)</h1>
<p>The procedures of functional unit 3 are given in terms of SDL diagrams in figure 41. To easily distinguish the interface concerned the messages received or sent from this unit are prefixed with either 'MAP' for a MAP message, 'A' for an A-Interface message or 'I' for an ISDN/PSTN message.</p>
<p>The procedures of functional unit 3 include:</p>
<p>i)  initiation. The initiation condition is shown by the signal A-HANDOVER-REQUIRED.</p>
<p><code></code>The diagram also includes queuing when there is no channel available. Calls for which handover has been initiated should be queued with priority higher than normal calls. They should have lower priority than emergency calls.</p>
<p>ii) handover of calls within the area of MSCA, i.e. handover case i). In this case MSCA controls the procedures on both the previous and the new radio channel, using signals A-HANDOVER-REQUEST and A-HANDOVER-COMMAND. The handover procedure is completed when A-HANDOVER-COMPLETE is received. If this signal is not received (expiry of timer T102), the radio path and the connection on interface B' are released.</p>
<p><code></code>In the case of ongoing GSM voice group calls for subsequent users of the VGCS channel uplink the original connection shall always be maintained.</p>
<p><code></code>For handover devices with three-party capabilities the handover device is first set up so that all interfaces A', A'' and B' are connected (illustrated by the signal 'set up handover device'). This is done when the Handover Command is sent to the MS . The device is connected in its final position (i.e. A'' to B' for case ii)) (illustrated by the signal 'connect handover device') when A-HANDOVER-COMPLETE is received.</p>
<p>iii)    handover to MSCB . This procedure is the one described in subclauses 7.1 and 7.2. For handover devices with three-party capabilities the handover device is set-up when MSCA sends the Handover Command to the MS , i.e. the interfaces A', B' and B'' are then connected. The device is connected in its final position (i.e. B' to B'') when the successful procedure indication is received from functional unit 4.</p>
<p>iv) subsequent handover to MSCA . The procedure is described in subclauses 7.3 and 7.4. When a handover to MSCA indication is received from functional unit 4, the handover device is set up so that interfaces B', B'' and A' are connected (for handover devices with three-party capabilities). When A-HANDOVER-COMPLETE is received, the device is connected in its final position (i.e. B' to A').</p>
<p><code></code>If A-HANDOVER-COMPLETE is not received (expiry of timer T104), the handover device releases interface A', B' and B''.</p>
<p>v)  subsequent handover to a third MSC (MSCB') . The procedure is described in subclauses 7.3 and 7.4. The handover device is set up in its initial position, (i.e. interconnection of interfaces B', B'' and B''') when the connection to MSCB' has been established. MSCB is informed via functional unit 4 that the connection has been established and that the procedure on the radio path can be initiated. The device is connected in its final position (i.e. B' to B''') when a successful procedure indication is received from functional unit 4. MSCB is informed that all procedures in MSCB can be terminated (illustrated by the MAP-SEND-END-SIGNAL response). The device returns to the state where B' and B'' are connected if the subsequent handover procedure fails.</p>
<p>Timers in MSCA.</p>
<p>The procedures are supervised by timers in order to avoid a deadlock when responses are not received or the procedures fail. The following timers are defined:</p>
<p>T101:   this timer supervises the queuing time for a free channel. If T101 expires, a no channel indication is generated, a retry procedure could be applied as described in subclause 6.1. T101 is set by O&amp;M,</p>
<p>T102:   this timer supervises the time for handover completion for handover between BSSs in MSCA. T102 is set by O&amp;M,</p>
<p>T103:   this timer supervises the time between issuing an A-HANDOVER-COMMAND from  MSCA and receiving a successful procedure indication from MSCB. This timer also supervises the time between sending an A-HO-REQUEST-ACKNOWLEDGE to MSCB and receiving a successful procedure indication from MSCB'. If T103 expires, the handover procedure is terminated. T103 is set by O&amp;M,</p>
<p>T104:   this timer supervises the time between sending of an A-HO-REQUEST-ACKNOWLEDGE to MSCB and receiving the A-HANDOVER-COMPLETE from BSS-B on MSCA. If the timer expires, the new radio channel is released. T104 is set by O&amp;M.</p>
<h1 id="93a-bss-internal-handover-with-msc-support-control-procedures">9.3A  BSS Internal Handover with MSC Support control procedures</h1>
<p>The "BSS Internal Handover with MSC Support" for AoIP is performed by the MSC that is currently serving the connected BSS (in the following just termed "serving MSC"), it may be either MSC-A, MSC-B, 3G_MSC-A or 3G_MSC-B.</p>
<p>The "BSS Internal Handover with MSC Support" control procedures in serving MSC include:</p>
<p>i)  <strong>Handover enquiry.</strong> This procedure is only part of the MSC-initiated "BSS Internal Handover with MSC Support" described in subclause 6.3.3. The MSC initiates the handover enquiry by sending an A-INTERNAL-HANDOVER-ENQUIRY message and starting timer T106.</p>
<p><code></code>The handover enquiry phase is completed when an A-INTERNAL-HANDOVER-REQUIRED message is received from the BSS with cause code "response to an INTERNAL HANDOVER ENQUIRY message". If this message is not received (expiry of timer T106), or the BSS responds with an AHANDOVER-FAILURE message, or the BSS sends an A-INTERNAL-HANDOVER-REQUIRED message with another cause code, then the MSC terminates the MSC-initiated "BSS Internal Handover with MSC Support".</p>
<p>ii) <strong>Initiation.</strong> The initiation condition is given by reception of the A-INTERNAL-HANDOVER-REQUIRED message. This starts the Internal Handover Preparation phase for the serving MSC; the serving MSC starts timer T105. Calls for which Internal Handover Preparation has been initiated should be handled with priority higher than normal calls. They should have lower priority than emergency calls. During that phase the serving MSC considers the A-INTERNAL-HANDOVER-REQUIRED parameters, tries to allocate the necessary resources.</p>
<p><code></code>The Internal Handover Preparation phase for the serving MSC ends when the serving MSC sends the A-INTERNAL-HANDOVER-COMMAND message or an A-INTERNAL-HANDOVER-REQUIRED-REJECT message or when timer T105 expires.</p>
<p><code></code>If the serving MSC can not perform the "BSS Internal Handover with MSC Support", then it shall send an A-INTERNAL-HANDOVER-REQUIRED-REJECT Message to the BSS and shall release all potentially allocated resources as if no A-INTERNAL-HANDOVER-REQUIRED message was received.</p>
<p><code></code>If timer T105 expires before the serving MSC could send the A-INTERNAL HANDOVER-COMMAND message, then the serving MSC shall consider the Internal Handover Preparation phase as terminated without success and shall release any allocated resources for the Internal Handover such that the status returns as it was prior to receiving the A-INTERNAL-HANDOVER-REQUIRED message. No response shall be sent to the BSS after the expiry of timer T105.</p>
<p>ii) <strong>Execution.</strong> Serving MSC controls the "BSS Internal Handover with MSC Support" by sending the A-INTERNAL-HANDOVER-COMMAND message. The "BSS Internal Handover with MSC Support" is completed when the A-HANDOVER-COMPLETE message is received. If this signal is not received (expiry of timer T102), the radio path and all the connections and resources associated to that call shall be released.</p>
<p><code></code>For handover devices with three-party capabilities, the handover device is first set up so that all interfaces A', A'' and B' are connected. This is perfomed before the A-INTERNAL-HANDOVER-COMMAND message is sent to the BSS. The handover device may be adjusted when the A-HANDOVER-DETECT message is received. The handover device is connected in its final position (i.e. A'' to B') when the A-HANDOVER-COMPLETE message is received.</p>
<p><strong>Timers in serving MSC for Internal Handover Preparation</strong></p>
<p>The procedures are supervised by timers in order to avoid a deadlock when responses are not received or the procedures fail. The following additional timers are defined:</p>
<p>T105:   this timer supervises the Internal Handover Preparation procedure between BSS and serving MSC. T105 is set by O&amp;M in relation to timer "T25" (3GPP TS 48.008 [5]). T105 defines the maximum time a serving MSC may take to respond to an "INTERNAL HANDOVER REQUIRED" message. Timer "T25" (3GPP TS 48.008 [5]) defines the minimum time the BSS will to wait before it can send a new or repeated (INTERNAL) HANDOVER REQUIRED message or an A-HANDOVER FAILURE. T105 shall be configured to be atleast one round trip delay shorter than the time configured for "T25" (3GPP TS 48.008 [5]) to minimise the risk of crossing messages.</p>
<p>T106:   this timer supervises the time between sending of an A-INTERNAL-HANDOVER-ENQUIRY message to the BSS and receiving an A-INTERNAL-HANDOVER-REQUIRED or AHANDOVER-FAILURE message from the BSS. If T106 expires, the handover procedure is terminated. T106 is set by O&amp;M and should be sufficiently long so that no late responses from BSS can be expected after its expiry.</p>
<h1 id="94-map-procedures-in-msc-a-functional-unit-4">9.4   MAP procedures in MSCA (functional unit 4)</h1>
<p>The MAP procedures for handover are defined in 3GPP TS 29.002 [12]. They include:</p>
<p>-  procedures for basic handover;</p>
<p>-  procedures for subsequent handover.</p>
<p>These procedures are as outlined in clause 7.</p>
<h1 id="95-interworking-between-handover-control-procedures-and-map-procedures-in-msc-a">9.5   Interworking between Handover control procedures and MAP procedures in MSCA</h1>
<p>The interworking between the Handover control procedures and the MAP procedures for handover is defined in 3GPP TS 29.010 [8]. It includes:</p>
<p>-  interworking at basic handover initiation;</p>
<p>-  interworking at subsequent handover completion.</p>
<p>This interworking is not described in the present document.</p>
<h1 id="96-compatibility-with-gsm-phase-1">9.6   Compatibility with GSM Phase 1</h1>
<p>If the MSCA initiates an Inter-MSC handover procedure according to Phase 2 MAP and BSSMAP protocols while using a Phase 1 BSSMAP protocol towards BSS-A, MSCA has to perform the protocol interworking.</p>
<p>The same holds if a Phase 2 BSSMAP protocol is used between MSCA and BSS-A and the Einterface supports only Phase 1 protocol.</p>
<h1 id="10-detailed-procedures-in-msc-b">10    Detailed procedures in MSCB</h1>
<h1 id="101-bssmsc-msbss-procedures-msc-b-functional-unit-1">10.1  BSS/MSC (MS/BSS) procedures MSCB (functional unit 1)</h1>
<p>The handover procedures in this functional unit consist of:</p>
<p>i)  signalling between the MS and the MSC;</p>
<p>ii) signalling between the BS and the MSC for access management.</p>
<p>Signals exchanged with functional unit 3 are indicated in subclause 10.3.</p>
<h1 id="102-call-control-procedures-msc-b-functional-unit-2">10.2  Call control procedures MSCB (functional unit 2)</h1>
<p>These procedures relate to the call control in MSCB of the "handover" connection with MSCA. For these procedures the following apply:</p>
<p>Call set-up:</p>
<p>-  the connection is set up by MSCA. MSCB should provide, if possible, the following backward signals:</p>
<p>-  signals indicating unsuccessful call set-up and, if possible, the cause of call failure;</p>
<p>-  address complete signal;</p>
<p>-  answer signal (see note).</p>
<p>NOTE:   The answer signal is not related to answering by the MS and it has no meaning in the handover procedure between MSCA and MSCB. But after successful handover or successful subsequent channel assignment using a circuit connection between MSCA and MSCB this signal is needed for bringing the connection in the answered state in the intermediate PSTN/ISDN exchanges.</p>
<p>-  there will be no indication that the call applies to a handover. This information has to be derived from the MS Handover Number received during call set-up in relation to the earlier MAP-PREPARE-HANDOVER request/MAP-PREPARE-HANDOVER response procedure between MSCA and MSCB.</p>
<p>Call clearing:</p>
<p>-  call clearing consists of two parts after inter-MSC handover: clearing of the BSS-MS connection and clearing of the inter-MSC connection, this case is only applicable to calls successfully handed over. If a request to release the call is generated by the network while the MS is re-tuning from one BSS to another BSS, then MSCB shall begin clearing the call to the network and queue the call release to the MS until the MS has resumed communication;</p>
<p>-  the MAP is used to transfer information between MSCA and MSCB in order to make it possible for MSCB to send the appropriate signals to the MS, specified in 3GPP TS 24.008 [10], and still leave the call control to MSCA. MSCA normally initiates release of the connection between MSCA and MSCB. Exceptionally MSCB is allowed to release the connection if no MAP-SEND-END-SIGNAL response is received, or if the Handover is to be aborted.</p>
<p>-  when the Signalling System no 7 ISDN User Part is used, the normal symmetric release procedures apply. When a signalling system is used without a symmetric release possibility or a fault condition occurs, the following may apply:</p>
<p>-  when MSCB receives a clear-forward signal from MSCA, it shall release the radio resources;</p>
<p>-  in fault situation eg. machine malfunction or loss of the connection on interface A, MSCB may send a clear-back signal to MSCA.</p>
<h1 id="103-handover-control-procedures-msc-b-functional-unit-3">10.3  Handover control procedures MSCB (functional unit 3)</h1>
<p>The procedures of functional unit 3 are given in form of SDL diagrams in figure 42. To easily distinguish the interface concerned the messages received or sent from this unit are prefixed with either 'MAP' for a MAP message, 'A' for an AInterface message or 'I' for an ISDN/PSTN message. The procedure in functional unit 3 include:</p>
<p>i)  handover from MSCA.</p>
<p><code></code>This case is initiated by MSCA, and includes allocation and establishment of the new radio channel. The procedure is outlined in subclauses 7.1 and 7.2.</p>
<p>ii) intra-MSC handovers within the area controlled by MSCB.</p>
<p><code></code>This procedure is the same as that of i) in subclause 9.3, except that the A-HANDOVER-REQUIRED is received by MSCB. After successful completion of the intra-MSC handover, MSC-B shall notify MSC-A by sending an A-HANDOVER-PERFORMED message.</p>
<p>iii)    subsequent handover to another MSC (MSCA or MSCB').</p>
<p><code></code>The initiation procedure is essentially the same as that of i) of subclause 9.3. The Handover Command to the MS is now generated by MSCB after the A-HO-REQUEST-ACKNOWLEDGE is received from MSCA (via functional unit 4). The procedure is terminated in MSCB when MSCB receives a terminate procedure indication from functional unit 4.</p>
<p>Timers in MSCB.</p>
<p>The following procedures are supervised by timers in order to avoid a deadlock when responses are not received or the procedures fail.</p>
<p>The following timers are defined:</p>
<p>T201:   this timer supervises the queuing time for a free channel. T201 is set by O&M;</p>
<p>T202:   this timer supervises the time for handover completion for handover between BSSs in MSCB. If T202 expires, the radio path and the connection on interface B' are released. T202 is set by O&M;</p>
<p>T204:   this timer supervises the time between sending of address complete message to MSCA and receiving the A-HANDOVER-COMPLETE from BSS-B on MSCB. This timer also supervises the time between issuing the handover command to the MS and receiving the MAP-SEND-END-SIGNAL response from MSCA, for a subsequent handover. In the case of a handover without circuit connection between MSCA and MSCB this timer supervises the time between issuing the A-HO-REQUEST-ACKNOWLEDGE to the MSCA and receiving the A-HANDOVER-COMPLETE from BSS-B on MSCB. If the timer expires, then any new radio channel is released. T204 is set by O&M;</p>
<p>T210:   this timer is used to supervise the time for establishing a circuit connection from MSCA to MSCB. When T210 expires, the allocated channel in MSCB is released. T210 is set by O&amp;M. This timer is not started when MSCA explicitly indicates that no handover number is needed;</p>
<p>T211:   this timer is used to control the time between requesting a subsequent handover (A-HO-REQUEST to the MSCA) and receiving the response from MSCA (A-REQUEST-ACKNOWLEDGE/A-HO-FAILURE). If T211 expires, the existing connection with the MS is maintained. T211 is set by O&amp;M.</p>
<h1 id="104-map-procedures-msc-b-functional-unit-4">10.4  MAP procedures MSCB (functional unit 4)</h1>
<p>The MAP procedures for handover are defined in 3GPP TS 29.002 [12]. They include:</p>
<p>-  procedures for basic handover;</p>
<p>-  procedures for subsequent handover;</p>
<p>-  procedures for obtaining the handover number from the VLR.</p>
<p>These procedures are outlined in clause 7.</p>
<h1 id="105-interworking-between-handover-control-procedures-and-map-procedures-in-msc-b">10.5  Interworking between Handover control procedures and MAP procedures in MSCB</h1>
<p>The interworking between the Handover control procedures and the MAP procedures for handover is defined in 3GPP TS 29.010 [8]. It includes:</p>
<p>-  interworking at basic handover completion;</p>
<p>-  interworking at subsequent handover initiation.</p>
<p>This interworking is not described in the present document.</p>
<h1 id="106-compatibility-with-gsm-phase-1">10.6  Compatibility with GSM Phase 1</h1>
<p>If the MSCB accepts an Inter-MSC handover procedure according to Phase 2 MAP and BSSMAP protocols while using a Phase 1 BSSMAP protocol towards BSS-B, MSCB has to perform the protocol interworking.</p>
<p>The same holds if a Phase 1 MAP protocol is requested on the E-interface and MSCB uses a Phase 2 BSSMAP protocol towards BSS-B.</p>
<h1 id="11-detailed-procedures-in-3g_msc-a">11    Detailed procedures in 3G_MSCA</h1>
<p>For detailed procedures in MSCA at handover within the GSM network, please see clause 9 "Detailed procedures in MSCA".</p>
<h1 id="111-rncbsc3g_msc-and-uems3g_msc-procedures-in-3g_msc-a-functional-unit-1">11.1  RNC/BSC/3G_MSC and UE/MS/3G_MSC procedures in 3G_MSCA (functional unit 1)</h1>
<p>The handover/relocation procedures in this functional unit consist of:</p>
<p>i)  signalling between the UE/MS and the 3G_MSC;</p>
<p>ii) signalling between the RNS/BSS and the 3G_MSC for access management.</p>
<h1 id="112-call-control-procedures-3g_msc-a-functional-unit-2">11.2  Call control procedures 3G_MSCA (functional unit 2)</h1>
<p>The call control procedures related to handover/relocation in 3G_MSCA can be divided into two functional entities:</p>
<p>-  the first entity is the call control procedure as part of the normal interworking between the PSTN/ISDN and the PLMN/UTRAN; for an UE/MS originating call 3G_MSCA is the originating exchange, for an UE/MS terminating call 3G_MSCA is the destination exchange;</p>
<p>-  the second entity is the call control procedure for the connection between 3G_MSCA and 3G_MSCB in case of a handover/relocation from 3G_MSCA to 3G_MSCB. For this call control procedure the following applies.</p>
<p>Call set-up:</p>
<p>-  the connection to 3G_MSCB is set up by procedures relevant to the signalling system used in the PSTN/ISDN to which 3G_MSCA is connected. The call is set up by using the Handover Number received from 3G_MSCB as part of the MAP procedure;</p>
<p>-  the call set-up direction will always be from 3G_MSCA to 3G_MSCB, even when the call was originally established by the UE/MS. Functional unit 2 (see figure 5) should therefore keep information on call set-up direction in order to be able to interpret correctly any clearing signals (see below);</p>
<p>-  the unit should indicate the address complete condition to functional unit 3 and through-connect without awaiting the answer signal from 3G_MSCB. This applies also to signalling systems where address complete signals are not supported. In such cases an artificial address complete is established by functional unit 2.</p>
<p>Call clearing:</p>
<p>-  call clearing consists of two parts: after handover/relocation, clearing of the RNS-UE/MS or BSS-UE/MS connection and clearing of the inter-3G_MSC connection. If a request to release the call is generated by the network while the UE/MS is re-tuning from one RNS/BSS to another RNS/BSS, then 3G_MSCA shall begin clearing the call to the network and queue the call release to the UE/MS until the UE/MS has resumed communication. This includes the case when 3G_MSCB and/or 3G_MSCB' are involved;</p>
<p>-  the MAP procedures are used to transfer information between 3G_MSCB and 3G_MSCA in order to maintain full call control within 3G_MSCA. 3G_MSCA determines, based on information received from 3G_MSCB, the appropriate signals (according to 3GPP TS 24.008 [10]) to be sent to the UE/MS, and sends this information to 3G_MSCB;</p>
<p>-  when 3G_MSCA clears the call to the UE/MS it also clears the call control functions in 3G_MSCB and sends the MAP-SEND-END-SIGNAL response to release the MAP resources in 3G_MSCB. The clearing of the connection is by procedures relevant to the signalling system in the PSTN/ISDN to which 3G_MSCA is connected;</p>
<p>-  when the Signalling System no 7 ISDN User Part is used, the normal symmetric release procedures apply on both the connection to the fixed network and to 3G_MSCB;</p>
<p>-  when a signalling system is used without a symmetric release possibility, some notice should be given to the clear-forward and clear-back procedures;</p>
<p>-  for UE/MS terminating calls the following conditions apply on clear-forward and clear-back:</p>
<p>-  when a clear-forward signal is received on interface B' (see figure 4), 3G_MSCA clears the circuit to 3G_MSCB by normal clear-forward procedures;</p>
<p>-  when a clear-back signal is received from 3G_MSCB, 3G_MSCA starts normal clear-back procedures towards the fixed network (interface B') and sends the clear-forward signal on interface B'' in order to clear the connection with 3G_MSCB.</p>
<p>NOTE 1: This case corresponds to a fault situation.</p>
<p>-  for UE/MS originated calls the following applies:</p>
<p>-  when 3G_MSCA receives a clear-back signal from 3G_MSCB, this signal must be interpreted as indicating a clear-forward condition. 3G_MSCA then clears both the connection on interface B' (see figure 4) and to 3G_MSCB by normal clear-forward procedures;</p>
<p>NOTE 2: This case corresponds to a fault situation.</p>
<p>-  when 3G_MSCA receives a clear-back signal on interface B', 3G_MSCA should distinguish between national and international connections:</p>
<p>-  for international connections where the Q.118 [1] supervision is done in the ISC, 3G_MSCA sends a clear-forward signal on both interface B' to the fixed network and interface B'' to 3G_MSCB;</p>
<p>-  for national connections or for international connections where the Q.118 [1] supervision is not done in the ISC, a timer is started according to national practice for clear-back supervision and MSCA proceeds as follows:</p>
<p>i)  if a clear-back signal is received from 3G_MSCB, 3G_MSCA interprets this as indicating a clear-forward condition and proceeds by clearing the connections on interface B' and to 3G_MSCB by normal clear-forward procedures;</p>
<p>ii) if the timer expires, 3G_MSCA proceeds by normal clear-forward of the connections on interface B' and to 3G_MSCB.</p>
<h1 id="113-handoverrelocation-control-procedures-3g_msc-a-functional-unit-3">11.3  Handover/Relocation control procedures 3G_MSCA (functional unit 3)</h1>
<p>The procedures of functional unit 3 are given in terms of SDL diagrams in figure 43. To easily distinguish the interface concerned the messages received or sent from this unit are prefixed with either 'MAP' for a MAP message, 'A' for an A-Interface message, 'I' for an ISDN/PSTN message or 'Iu' for an Iu-message.</p>
<p>The procedures of functional unit 3 include:</p>
<p>i)  initiation. The initiation condition is shown by the signal Iu-RELOCATION-REQUIRED or A-HANDOVER-REQUIRED;</p>
<p><code></code>The diagram also includes queuing when there is no channel available. Calls for which handover/relocation has been initiated should be queued with priority higher than normal calls. They should have lower priority than emergency calls.</p>
<p>ii) handover/relocation of calls within the area controlled by 3G_MSCA, i.e. handover/relocation case i);</p>
<p><code></code>In the handover/relocation from RNS-A/BSS-A to RNS-B/BSS-B 3G_MSCA controls the procedures on both the previous and the new radio channel, using signals Iu-RELOCATION-REQUEST/A-HANDOVER-REQUEST and Iu-RELOCATION-COMMAND/A-HANDOVER-COMMAND. The handover/relocation procedure is completed when Iu-RELOCATION-COMPLETE/A-HANDOVER-COMPLETE is received. If this signal is not received (expiry of timer T102, T302, T502 or T702), the radio path and the connection on interface B' are released.</p>
<p><code></code>For handover/relocation devices with three-party capabilities the device is first set up so that all interfaces Iu'/A', Iu''/A'' and B' are connected (illustrated by the signal 'set up handover device'). This is done when the Relocation Command is sent to serving RNS or Handover Command is sent to the serving BSS. The device is connected in its final position (i.e. Iu''/ A'' to B' for case ii)) (illustrated by the signal 'connect handover device') when Iu-RELOCATION-COMPLETE/A-HANDOVER-COMPLETE is received.</p>
<p>iii)    relocation to 3G_MSCB. This procedure is the one described in subclauses 8.3.1 and 8.3.2. For handover/relocation devices with three-party capabilities the device is set-up when 3G_MSCA sends the Relocation Command to the UE, i.e. the interfaces Iu', B' and B'' are then connected. The device is connected in its final position (i.e. B' to B'') when the successful procedure indication is received from functional unit 4;</p>
<p>iv) UMTS to GSM handover to MSCB. This procedure is the one described in subclauses 8.1.1 and 8.1.2. For handover/relocation devices with three-party capabilities the device is set-up when 3G_MSCA sends the Relocation Command to the serving RNS, i.e. the interfaces Iu', B' and B'' are then connected. The device is connected in its final position (i.e. B' to B'') when the successful procedure indication is received from functional unit 4;</p>
<p>v)  GSM to UMTS handover to 3G_MSCB. This procedure is the one described in subclauses 8.2.1 and 8.2.2. For handover/relocation devices with three-party capabilities the device is set-up when MSCA sends the Handover Command to the serving BSS , i.e. the interfaces A', B' and B'' are then connected. The device is connected in its final position (i.e. B' to B'') when the successful procedure indication is received from functional unit 4;</p>
<p>vi) subsequent relocation from 3G_MSCB to 3G_MSCA. The procedure is described in subclauses 8.3.3.1 and 8.3.4.1. When a relocation to 3G_MSCA indication is received from functional unit 4, the handover/relocation device is set up so that interfaces B', B'' and Iu' are connected (for devices with three-party capabilities). When Iu-RELOCATION-COMPLETE is received, the device is connected in its final position (i.e. B' to Iu');</p>
<p><code></code>If Iu-RELOCATION-COMPLETE is not received (expiry of timer T704), the handover/relocation device releases interface Iu', B' and B''.</p>
<p>vii)    subsequent GSM to UMTS handover from MSCB to 3G_MSCA. The procedure is described in subclauses 8.2.3.1 and 8.2.4.1. When a handover to 3G_MSCA indication is received from functional unit 4, the handover device is set up so that interfaces B', B'' and A' are connected (for handover devices with three-party capabilities). When Iu-RELOCATION-COMPLETE is received, the device is connected in its final position (i.e. B' to Iu');</p>
<p><code></code>If Iu-RELOCATION-COMPLETE is not received (expiry of timer T504), the device releases interface Iu', B' and B''.</p>
<p>viii) subsequent UMTS to GSM handover from 3G_MSCB to MSCA. The procedure is described in clauses 8.1.3.1 and 8.1.4.1. When a handover to MSCA indication is received from functional unit 4, the handover device is set up so that interfaces B', B'' and Iu' are connected (for handover devices with three-party capabilities). When A-HANDOVER-COMPLETE is received, the device is connected in its final position (i.e. B' to A');</p>
<p><code></code>If A-HANDOVER-COMPLETE is not received (expiry of timer T304), the device releases interface A', B' and B''.</p>
<p>ix) subsequent relocation from 3G_MSCB to a third 3G_MSC (3G_MSCB'). The procedure is described in subclauses 8.3.4.2 and 8.3.5.2. The handover/relocation device is set up in its initial position, (i.e. interconnection of interfaces B', B'' and B''') when the connection to 3G_MSCB' has been established. 3G_MSCB is informed via functional unit 4 that the connection has been established and that the procedure on the radio path can be initiated. The device is connected in its final position (i.e. B' to B''') when a successful procedure indication is received from functional unit 4. 3G_MSCB is informed that all procedures in 3G_MSCB can be terminated (illustrated by the MAP-SEND-END-SIGNAL response). The device returns to the state where B' and B'' are connected if the subsequent relocation procedure fails;</p>
<p>x)  subsequent UMTS to GSM handover from 3G_MSCB to a third MSC (MSCB'). The procedure is described in subclauses 8.1.3.2 and 8.1.4.2. The handover/relocation device is set up in its initial position, (i.e. interconnection of interfaces B', B'' and B''') when the connection to MSCB' has been established. 3G_MSCB is informed via functional unit 4 that the connection has been established and that the procedure on the radio path can be initiated. The device is connected in its final position (i.e. B' to B''') when a successful procedure indication is received from functional unit 4. 3G_MSCB is informed that all procedures in 3G_MSCB can be terminated (illustrated by the MAP-SEND-END-SIGNAL response). The device returns to the state where B' and B'' are connected if the subsequent UMTS to GSM handover procedure fails;</p>
<p>xi) subsequent GSM to UMTS handover from MSCB to a third MSC (3G_MSCB'). The procedure is described in subclauses 8.2.3.2 and 8.2.4.2. The handover/relocation device is set up in its initial position, (i.e. interconnection of interfaces B', B'' and B''') when the connection to 3G_MSCB' has been established. MSCB is informed via functional unit 4 that the connection has been established and that the procedure on the radio path can be initiated. The device is connected in its final position (i.e. B' to B''') when a successful procedure indication is received from functional unit 4. MSCB is informed that all procedures in MSCB can be terminated (illustrated by the MAP-SEND-END-SIGNAL response). The device returns to the state where B' and B'' are connected if the subsequent GSM to UMTS handover procedure fails.</p>
<p>NOTE:   The procedures ii), vi) and vii) may be applied also in case of a handover/relocation to an RNC which is controlled by 3G_MSC-A by using the "Flexible Iu interface for handover/relocation" option. </p>
<p>Timers in 3G_MSCA.</p>
<p>The procedures are supervised by timers in order to avoid a deadlock when responses are not received or the procedures fail.</p>
<p>The following timers are defined for SRNS Relocation:</p>
<p>T701:   this timer supervises the queuing time for a free channel for the relocation inside UMTS. If T701 expires, a no channel indication is generated and 3G_MSCA will terminate the relocation as described in subclause 6.2.3. T701 is set by O&M;</p>
<p>T702:   this timer supervises the time for relocation completion for relocation between RNSs in 3G_MSCA. T702 is set by O&M;</p>
<p>T703:   this timer supervises the time between issuing an Iu-RELOCATION-COMMAND from 3G_MSCA and receiving a successful procedure indication from 3G_MSCB. This timer also supervises the time between sending an IU-RELOCATION-REQUEST-ACKNOWLEDGE to 3G_MSCB and receiving a successful procedure indication from 3G_MSCB'. If T703 expires, the relocation procedure is terminated. T703 is set by O&M;</p>
<p>T704:   this timer supervises the time between sending of an IU-RELOCATION-REQUEST-ACKNOWLEDGE to 3G_MSCB and receiving the Iu-RELOCATION-COMPLETE from RNS-B on 3G_MSCA. If the timer expires, the new radio channel is released. T704 is set by O&amp;M.</p>
<p>The following timers are defined for UMTS to GSM handover:</p>
<p>T301:   this timer supervises the queuing time for a free channel for the UMTS to GSM handover. If T301 expires, a no channel indication is generated and 3G_MSCA will terminate the handover as described in subclause 6.2.3. T301 is set by O&M;</p>
<p>T302:   this timer supervises the time for UMTS to GSM handover completion for handover from RNS to BSS in 3G_MSCA. T302 is set by O&M;</p>
<p>T303:   this timer supervises the time between issuing an Iu-RELOCATION-COMMAND from 3G_MSCA and receiving a successful procedure indication from MSCB. This timer also supervises the time between sending an A-HO-REQUEST-ACKNOWLEDGE to MSCB and receiving a successful procedure indication from MSCB'. If T303 expires, the UMTS to GSM handover procedure is terminated. T303 is set by O&M;</p>
<p>T304:   this timer supervises the time between sending of an A-HO-REQUEST-ACKNOWLEDGE to MSCB and receiving the A-HANDOVER-COMPLETE from BSS-B on 3G_MSCA. If the timer expires, the new radio channel is released. T304 is set by O&amp;M.</p>
<p>The following timers are defined for GSM to UMTS handover:</p>
<p>T501:   this timer supervises the queuing time for a free channel for the GSM to UMTS handover. If T501 expires, a no channel indication is generated and 3G_MSCA will terminate the handover as described in subclause 6.2.3. T501 is set by O&M;</p>
<p>T502:   this timer supervises the time for GSM to UMTS handover completion for handover from BSS to RNS in 3G_MSCA. T502 is set by O&M;</p>
<p>T503:   this timer supervises the time between issuing an A-HANDOVER-COMMAND from MSCA and receiving a successful procedure indication from 3G_MSCB. This timer also supervises the time between sending an A-HANDOVER-REQUEST-ACKNOWLEDGE to 3G_MSCB and receiving a successful procedure indication from 3G_MSCB'. If T503 expires, the GSM to UMTS handover procedure is terminated. T503 is set by O&M;</p>
<p>T504:   this timer supervises the time between sending of an A-HANDOVER-REQUEST-ACKNOWLEDGE to 3G_MSCB and receiving the Iu-RELOCATION-COMPLETE from RNS-B on 3G_MSCA. If the timer expires, the new radio channel is released. T504 is set by O&amp;M.</p>
<h1 id="114-map-procedures-in-3g_msc-a-functional-unit-4">11.4  MAP procedures in 3G_MSCA (functional unit 4)</h1>
<p>The MAP procedures for handover/relocation are defined in 3GPP TS 29.002 [12]. They include:</p>
<p>-  procedures for basic handover/relocation;</p>
<p>-  procedures for subsequent handover/relocation.</p>
<p>These procedures are as outlined in clause 8.</p>
<h1 id="115-interworking-between-handoverrelocation-control-procedures-and-map-procedures-in-3g_msc-a">11.5  Interworking between Handover/Relocation control procedures and MAP procedures in 3G_MSCA</h1>
<p>The interworking between the Handover/Relocation control procedures and the MAP procedures for handover/relocation is defined in 3GPP TS 29.010 [8]. It includes:</p>
<p>-  interworking at basic handover/relocation initiation;</p>
<p>-  interworking at subsequent handover/relocation completion.</p>
<p>This interworking is not described in the present document.</p>
<h1 id="116-compatibility-with-gsm-phase-1">11.6  Compatibility with GSM Phase 1</h1>
<p>Interworking with the GSM Phase 1 is not supported.</p>
<h1 id="117-protocol-interworking">11.7  Protocol interworking</h1>
<p>If the 3G_MSCA initiates a basic inter-MSC UMTS to GSM handover procedure according to MAP and BSSMAP protocols while using a RANAP protocol towards RNS-A, 3G_MSCA has to perform the protocol interworking between RANAP on the Iu-Interface and encapsulated BSSMAP on the E-interface.</p>
<p>The same holds if 3G_MSCA accepts a subsequent inter-3G_MSC GSM to UMTS handover back to 3G_MSC-A while using a RANAP protocol towards RNS-B.</p>
<h1 id="12-detailed-procedures-in-3g_msc-b">12    Detailed procedures in 3G_MSCB</h1>
<p>For detailed procedures in 3G_MSCB at handover within the GSM network, please see clause 10 'Detailed procedures in MSCB'.</p>
<h1 id="121-rncbsc3g_msc-uemsrncbsc-procedures-in-3g_msc-b-functional-unit-1">12.1  RNC/BSC/3G_MSC (UE/MS/RNC/BSC) procedures in 3G_MSCB (functional unit 1)</h1>
<p>The Intra and Inter-3G_MSC handover/relocation procedures in this functional unit consist of:</p>
<p>i)  signalling between the UE/MS and the 3G_MSC;</p>
<p>ii) signalling between the RNS/BSS and the 3G_MSC for access management.</p>
<p>Signals exchanged with functional unit 3 are indicated in subclause 12.3.</p>
<h1 id="122-call-control-procedures-3g_msc-b-functional-unit-2">12.2  Call control procedures 3G_MSCB (functional unit 2)</h1>
<p>These procedures relate to the call control in 3G_MSCB of the "3G_MSC handover/relocation" connection with 3G_MSCA. For these procedures the following apply:</p>
<p>Call set-up:</p>
<p>-  the connection is set up by 3G_MSCA. 3G_MSCB should provide, if possible, the following backward signals:</p>
<p>-  signals indicating unsuccessful call set-up and, if possible, the cause of call failure;</p>
<p>-  address complete signal;</p>
<p>-  answer signal (see note).</p>
<p>NOTE:   The answer signal is not related to answering by the UE/MS and it has no meaning in the 3G_MSC handover/relocation procedure between 3G_MSCA and 3G_MSCB. But after successful handover/relocation or successful subsequent channel assignment using a circuit connection between 3G_MSCA and 3G_MSCB this signal is needed for bringing the connection in the answered state in the intermediate PSTN/ISDN exchanges.</p>
<p>-  there will be no indication that the call applies to a 3G_MSC handover/relocation. This information has to be derived from the UE/MS Handover Number received during call set-up in relation to the earlier MAP-PREPARE-HANDOVER request/MAP-PREPARE-HANDOVER response procedure between 3G_MSCA and 3G_MSCB.</p>
<p>Call clearing:</p>
<p>-  call clearing consists of two parts after inter-3G_MSC handover/relocation: clearing of the RNS-UE/MS or the BSS-UE/MS connection and clearing of the inter-3G_MSC connection, these cases are only applicable to calls successfully handed over or relocated. If a request to release the call is generated by the network while the UE/MS is re-tuning from one RNS/BSS to another RNS/BSS, then 3G_MSCB shall begin clearing the call to the network and queue the call release to the UE/MS until the UE/MS has resumed communication;</p>
<p>-  the MAP is used to transfer information between 3G_MSCA and 3G_MSCB in order to make it possible for 3G_MSCB to send the appropriate signals to the UE/MS, specified in 3GPP TS 24.008 [10], and still leave the call control to 3G_MSCA. 3G_MSCA normally initiates release of the connection between 3G_MSCA and 3G_MSCB. Exceptionally 3G_MSCB is allowed to release the connection if no MAP-SEND-END-SIGNAL response is received, or if the 3G_MSC Handover/Relocation is to be aborted;</p>
<p>-  when the Signalling System no 7 ISDN User Part is used, the normal symmetric release procedures apply. When a signalling system is used without a symmetric release possibility or a fault condition occurs, the following may apply:</p>
<p>-  when 3G_MSCB receives a clear-forward signal from 3G_MSCA, it shall release the radio resources;</p>
<p>-  in fault situation e.g. machine malfunction or loss of the connection on interface Iu or interface A, 3G_MSCB may send a clear-back signal to 3G_MSCA.</p>
<h1 id="123-handoverrelocation-control-procedures-in-3g_msc-b-functional-unit-3">12.3  Handover/Relocation control procedures in 3G_MSCB (functional unit 3)</h1>
<p>The procedures of functional unit 3 are given in form of SDL diagrams in figure 44. To easily distinguish the interface concerned the messages received or sent from this unit are prefixed with either 'MAP' for a MAP message, 'A' for an AInterface message, 'Iu' for an Iu-Interface message or 'I' for an ISDN/PSTN message. The procedure in functional unit 3 include:</p>
<p>i)  inter 3G_MSC handover/relocation from 3G_MSCA;</p>
<p><code></code>This case is initiated by 3G_MSCA, and includes allocation and establishment of the new radio resources. The procedure is outlined in subclauses 8.1.1 and 8.1.2. for UMTS to GSM handover, clauses 8.2.1 and 8.2.2 for GSM to UMTS handover and subclauses 8.3.1 and 8.3.2 for relocation.</p>
<p>ii) intra-3G_MSC UMTS to GSM handovers within the area controlled by 3G_MSCB;</p>
<p><code></code>This procedure is the same as that of ii) in clause 11.3, except that the Iu-RELOCATION-REQUIRED is received by 3G_MSCB. After successful completion of the intra-3G_MSC handover, 3G_MSC-B shall notify 3G_MSC-A by sending an A-HANDOVER-PERFORMED message.</p>
<p>iii)    intra-3G_MSC GSM to UMTS handovers within the area controlled by 3G_MSCB;</p>
<p><code></code>This procedure is the same as that of ii) in subclause 11.3, except that the A-HANDOVER-REQUIRED is received by 3G_MSCB. After successful completion of the intra-3G_MSC handover, 3G_MSC-B shall notify 3G_MSC-A by sending an A-HANDOVER-PERFORMED message.</p>
<p>iv) intra-3G_MSC SRNS Relocation within the area controlled by 3G_MSCB;</p>
<p><code></code>This procedure is the same as that of ii) in subclause 11.3, except that the Iu-RELOCATION-REQUIRED is received by 3G_MSCB. After successful completion of the intra-3G_MSC SRNS relocation, if security algorithms have been changed, 3G_MSC-B shall notify 3G_MSC-A by sending an A-HANDOVER-PERFORMED or an Iu-LOCATION-REPORT message, depending on the access network protocol used encapsulated on the E-interface (see subclauses 4.4.1 and 6.2.3).</p>
<p>v)  subsequent handover/relocation to another 3G_MSC (3G_MSCA or 3G_MSCB');</p>
<p><code></code>The initiation procedure is essentially the same as that of i) of subclause 11.3. The Handover Command to the BSS or the Relocation Command to the RNS is now generated by 3G_MSCB after the A-HO-REQUEST-ACKNOWLEDGE or Iu-RELOCATION-REQUEST-ACKNOWLEDGE is received from 3G_MSCA (via functional unit 4). The procedure is terminated in 3G_MSCB when 3G_MSCB receives a terminate procedure indication from functional unit 4.</p>
<p>NOTE:   The procedures iii), iv) and, in case of a subsequent handover back to 3G_MSC-A, the procedure v) may be applied also in case of a handover/relocation to an RNC which is controlled by 3G_MSC-B or 3G_MSC-A respectively by using the "Flexible Iu interface for handover/relocation" option.</p>
<p>Timers in 3G_MSCB.</p>
<p>The following procedures are supervised by timers in order to avoid a deadlock when responses are not received or the procedures fail.</p>
<p>The following timers are defined for UMTS to GSM handover:</p>
<p>T401:   this timer supervises the queuing time for a free channel. T401 is set by O&M;</p>
<p>T402:   this timer supervises the time for handover completion for UMTS to GSM handover from RNS to BSS in 3G_MSCB. If T402 expires, the radio path and the connection on interface B' are released. T402 is set by O&M;</p>
<p>T404:   this timer supervises the time between sending of address complete message to 3G_MSCA and receiving the A-HANDOVER-COMPLETE from BSS-B on 3G_MSCB. This timer also supervises the time between issuing the handover command to the UE/MS and receiving the MAP-SEND-END-SIGNAL response from 3G_MSCA, for a subsequent handover from UMTS to GSM. In the case of a UMTS to GSM handover without circuit connection between 3G_MSCA and 3G_MSCB this timer supervises the time between issuing the A-HO-REQUEST-ACKNOWLEDGE to the 3G_MSCA and receiving the A-HANDOVER-COMPLETE from BSS-B on 3G_MSCB. If the timer expires, then any new radio channel is released. T404 is set by O&M;</p>
<p>T410:   this timer is used to supervise the time for establishing a circuit connection from 3G_MSCA to 3G_MSCB. When T410 expires, the allocated channel in 3G_MSCB is released. T410 is set by O&amp;M. This timer is not started when 3G_MSCA explicitly indicates that no handover number is needed;</p>
<p>T411:   this timer is used to control the time between requesting a subsequent UMTS to GSM handover (AHOREQUEST to the 3G_MSCA) and receiving the response from 3G_MSCA (A-HO-REQUEST-ACKNOWLEDGE/A-HO-FAILURE). If T411 expires, the existing connection with the UE/MS is maintained. T411 is set by O&amp;M.</p>
<p>The following timers are defined for GSM to UMTS handover:</p>
<p>T601:   this timer supervises the queuing time for a free radio resource. T601 is set by O&M;</p>
<p>T602:   this timer supervises the time for handover completion for GSM to UMTS handover from BSS to RNS in 3G_MSCB. If T602 expires, the radio path and the connection on interface B' are released. T602 is set by O&M;</p>
<p>T604:   this timer supervises the time between sending of address complete message to 3G_MSCA and receiving the Iu-RELOCATION-COMPLETE from RNS-B on 3G_MSCB. This timer also supervises the time between issuing the handover command to the UE/MS and receiving the MAP-SEND-END-SIGNAL response from 3G_MSCA, for a subsequent handover from GSM to UMTS. In the case of a GSM to UMTS handover without circuit connection between 3G_MSCA and 3G_MSCB this timer supervises the time between issuing the A-HO-REQUEST-ACKNOWLEDGE to the 3G_MSCA and receiving the Iu-RELOCATION-COMPLETE from RNS-B on 3G_MSCB. If the timer expires, then any new radio resource is released. T604 is set by O&M;</p>
<p>T610:   this timer is used to supervise the time for establishing a circuit connection from 3G_MSCA to 3G_MSCB. When T610 expires, the allocated radio resource in 3G_MSCB is released. T610 is set by O&amp;M. This timer is not started when 3G_MSCA explicitly indicates that no handover number is needed;</p>
<p>T611:   this timer is used to control the time between requesting a subsequent GSM to UMTS handover (AHOREQUEST to the 3G_MSCA) and receiving the response from 3G_MSCA (A-HO-REQUEST-ACKNOWLEDGE/A-HO-FAILURE). If T611 expires, the existing connection with the UE/MS is maintained. T611 is set by O&amp;M.</p>
<p>The following timers are defined for SRNS Relocation:</p>
<p>T801:   this timer supervises the queuing time for a free radio resource. T801 is set by O&M;</p>
<p>T802:   this timer supervises the time for relocation completion for relocation between RNSs in 3G_MSCB. If T802 expires, the radio path and the connection on interface B' are released. T802 is set by O&M;</p>
<p>T804:   this timer supervises the time between sending of address complete message to 3G_MSCA and receiving the Iu-RELOCATION-COMPLETE from RNS-B on 3G_MSCB. This timer also supervises the time between issuing the handover command to the UE and receiving the MAP-SEND-END-SIGNAL response from 3G_MSCA, for a subsequent relocation. In the case of a relocation without circuit connection between 3G_MSCA and 3G_MSCB this timer supervises the time between issuing the IuRELOCATION-REQUEST-ACKNOWLEDGE to the 3G_MSCA and receiving the IuRELOCATION-COMPLETE from RNS-B on 3G_MSCB. If the timer expires, then any new radio resource is released. T804 is set by O&M;</p>
<p>T810:   this timer is used to supervise the time for establishing a circuit connection from 3G_MSCA to 3G_MSCB. When T810 expires, the allocated channel in 3G_MSCB is released. T810 is set by O&amp;M. This timer is not started when 3G_MSCA explicitly indicates that no handover number is needed;</p>
<p>T811:   this timer is used to control the time between requesting a subsequent relocation (Iu-RELOCATION-REQUEST to the 3G_MSCA) and receiving the response from 3G_MSCA (Iu-RELOCATION-REQUEST-ACKNOWLEDGE/ Iu-RELOCATION-FAILURE). If T811 expires, the existing connection with the UE is maintained. T811 is set by O&amp;M.</p>
<h1 id="124-map-procedures-in-3g_msc-b-functional-unit-4">12.4  MAP procedures in 3G_MSCB (functional unit 4)</h1>
<p>The MAP procedures for handover/relocation are defined in 3GPP TS 29.002 [12]. They include:</p>
<p>-  procedures for basic handover/relocation;</p>
<p>-  procedures for subsequent handover/relocation;</p>
<p>-  procedures for obtaining the handover number from the VLR.</p>
<p>These procedures are outlined in clause 8.</p>
<h1 id="125-interworking-between-handoverrelocation-control-procedures-and-map-procedures-in-3g_msc-b">12.5  Interworking between Handover/Relocation control procedures and MAP procedures in 3G_MSCB</h1>
<p>The interworking between the Handover/Relocation control procedures and the MAP procedures for handover/relocation is defined in 3GPP TS 29.010 [8]. It includes:</p>
<p>-  interworking at basic handover/relocation completion;</p>
<p>-  interworking at subsequent handover/relocation initiation.</p>
<p>This interworking is not described in the present document.</p>
<h1 id="126-compatibility-with-gsm-phase-1">12.6  Compatibility with GSM Phase 1</h1>
<p>GSM phase 1 is not supported.</p>
<h1 id="127-protocol-interworking">12.7  Protocol interworking</h1>
<p>If the 3G_MSCB accepts an Inter-3G_MSC GSM to UMTS handover procedure according to MAP and BSSMAP protocols while using a RANAP protocol towards RNS-B, 3G_MSCB has to perform the protocol interworking between RANAP on the Iu-Interface and encapsulated BSSMAP on the E-interface.</p>
<p>The same holds if 3G_MSCB initiates a subsequent inter-MSC UMTS to GSM handover while using a RANAP protocol towards RNS-A.</p>
<p>If during the supervision, i.e. while the UE/MS is not in the area of MSC-A or 3G_MSC-A, the protocol used encapsulated on the E-interface and the protocol used between 3G_MSC-B and the serving BSS or RNS are different, then 3G_MSCB has to perform the protocol interworking between BSSAP and RANAP.</p>
<p>NOTE:   The two protocols are different, e.g., after an inter-MSC GSM to UMTS inter-system handover, or after an inter-MSC SRNS relocation to 3G_MSC-B followed by a subsequent intra-3G_MSC-B UMTS to GSM inter-system handover.</p>
<h1 id="128-interactions-between-handoverrelocation-control-procedures-and-other-ranap-procedures">12.8  Interactions between handover/relocation control procedures and other RANAP procedures</h1>
<p>This clause gives an overview of the procedures that shall be followed when handover/relocation control procedures interact with other RANAP procedures on 3G_MSC-B.</p>
<h1 id="1281-interactions-between-handoverrelocation-control-procedures-and-the-security-mode-procedure">12.8.1    Interactions between handover/relocation control procedures and the security mode procedure</h1>
<h1 id="12811-intra-3g_msc-b-handoverrelocation">12.8.1.1  Intra-3G_MSC-B handover/relocation</h1>
<p>A security mode control procedure may be requested by MSC-A/3G_MSC-A after an Inter-MSC GSM to UMTS handover or Inter-MSC SRNS relocation. If RNS-A replies with an Iu-SECURITY-MODE-REJECT containing the cause value 'Relocation Triggered' due to an already initiated Intra-3G_MSC-B UMTS to GSM handover or Intra-3G_MSC-BSRNS relocation, the 3G_MSC-B shall not forward the result of the security mode control procedure to MSC-A/3G_MSC-A, but wait for the outcome of the handover/relocation procedure. If the relocation procedure is completed successfully, the 3G_MSC-B shall reattempt the security mode control procedure towards the new serving radio network. If the handover procedure is completed successfully, the 3G_MSC-B shall reattempt the cipher mode control procedure towards the new serving radio network, if ciphering is to be activated.</p>
<p><img alt="" src="../23009-g00.040.png" /></p>
<p>NOTE:   The message flow is shown in the perspective of 3G_MSC-B. It is assumed that RNS-A has sent the Iu-RELOCATION-REQUIRED before it received the Iu-SECURITY-MODE-COMMAND.</p>
<p><strong>Figure 35a: Collision between a subsequent Intra-3G_MSC-B handover/relocation and a security mode control procedure i): successful handover/relocation</strong></p>
<p>If the handover/relocation procedure is unsuccessful and the UE is still served by RNS-A, the 3G_MSC-B shall reattempt the security mode procedure towards RNS-A.</p>
<p><img alt="" src="../23009-g00.041.png" /></p>
<p>NOTE:   The message flow is shown in the perspective of 3G_MSC-B. It is assumed that RNS-A has sent the Iu-RELOCATION-REQUIRED before it received the Iu-SECURITY-MODE-COMMAND.</p>
<p><strong>Figure 35b: Collision between a subsequent Intra-3G_MSC-B handover/relocation and a security mode control procedure ii): unsuccessful handover/relocation</strong></p>
<h1 id="12812-subsequent-inter-msc-handoverrelocation">12.8.1.2  Subsequent Inter-MSC handover/relocation</h1>
<p>A security mode control procedure may be requested by MSC-A/3G_MSC-A after an Inter-MSC GSM to UMTS handover or Inter-MSC SRNS relocation. If RNS-A replies with an Iu-SECURITY-MODE-REJECT containing the cause value 'Relocation Triggered' due to an already initiated subsequent Inter-MSC handover/relocation, the 3G_MSC-B shall not forward the result of the security mode procedure to MSC-A/3G_MSC-A, but wait for the outcome of the handover/relocation procedure. If the subsequent Inter-MSC relocation procedure is completed successfully, the 3G_MSC-A shall reattempt the security mode control procedure towards the new serving radio network or MSC-B'/3G_MSC-B'. If the subsequent Inter-MSC handover procedure is completed successfully, the MSC-A/3G_MSC-A shall reattempt the cipher mode control procedure towards the new serving radio network or MSC-B'/3G_MSC-B, if ciphering is to be activated.</p>
<p><img alt="" src="../23009-g00.042.png" /></p>
<p>NOTE:   The message flow is shown in the perspective of 3G_MSC-B. It is assumed that RNS-A has sent the Iu-RELOCATION-REQUIRED before it received the Iu-SECURITY-MODE-COMMAND.</p>
<p><strong>Figure 35ba: Collision between a subsequent Inter-MSC handover/relocation and a security mode control procedure i): successful handover/relocation</strong></p>
<p>If the subsequent Inter-MSC handover/relocation procedure is unsuccessful and the UE is still served by 3G_MSC-B, the 3G_MSC-B shall reattempt the security mode procedure towards RNS-A.</p>
<p><img alt="" src="../23009-g00.043.png" /></p>
<p>NOTE:   The message flow is shown in the perspective of 3G_MSC-B. It is assumed that RNS-A has sent the Iu-RELOCATION-REQUIRED before it received the Iu-SECURITY-MODE-COMMAND.</p>
<p><strong>Figure 35bb: Collision between a subsequent Intra-3G_MSC-B handover/relocation and a security mode control procedure ii): unsuccessful handover/relocation</strong></p>
<h1 id="1282-interactions-between-handoverrelocation-control-procedures-and-the-rab-assignment-procedure">12.8.2    Interactions between handover/relocation control procedures and the RAB assignment procedure</h1>
<h1 id="12821-intra-3g_msc-b-handoverrelocation">12.8.2.1  Intra-3G_MSC-B handover/relocation</h1>
<p>A subsequent channel assignment procedure may be requested by MSC-A/3G_MSC-A after an Inter-MSC GSM to UMTS handover or Inter-MSC SRNS relocation without circuit connection (see subclauses 13.2 and 13.4). If RNS-A replies with an Iu-RAB-ASSIGNMENT-RESPONSE containing the cause value 'Relocation Triggered' due to an already initiated Intra-3G_MSC-B UMTS to GSM handover or Intra-3G_MSC-B SRNS relocation, the 3G_MSC-B shall not forward the result of the RAB assignment procedure to MSC-A/3G_MSC-A, but wait for the outcome of the handover/relocation procedure.  If the handover/relocation procedure is completed successfully, the 3G_MSC-B shall construct an A-ASSIGNMENT-COMPLETE or Iu-RAB-ASSIGNMENT-RESPONSE message, dependent on the encapsulated protocol used on the E-interface, and forward this message to MSC-A/3G_MSC-A in the MAP-PREPARE-HANDOVER response.</p>
<p><img alt="" src="../23009-g00.044.png" /></p>
<p>NOTE:   The message flow is shown in the perspective of 3G_MSC-B. It is assumed that RNS-A has sent the Iu-RELOCATION-REQUIRED before it received the Iu-RAB-ASSIGNMENT-REQUEST.</p>
<p><strong>Figure 35c: Collision between a subsequent Intra-3G_MSC-B handover/relocation and a RAB assignment procedure i): successful handover/relocation</strong></p>
<p>If the handover/relocation procedure is unsuccessful and the UE is still served by RNS-A, the 3G_MSC-B shall reattempt the RAB assignment procedure towards RNS-A.</p>
<p><img alt="" src="../23009-g00.045.png" /></p>
<p>NOTE:   The message flow is shown in the perspective of 3G_MSC-B. It is assumed that RNS-A has sent the Iu-RELOCATION-REQUIRED before it received the Iu-RAB-ASSIGNMENT-REQUEST.</p>
<p><strong>Figure 35d: Collision between a subsequent Intra-3G_MSC-B handover/relocation and a RAB assignment procedure ii): unsuccessful handover/relocation</strong></p>
<h1 id="12822-subsequent-inter-msc-handoverrelocation">12.8.2.2  Subsequent Inter-MSC handover/relocation</h1>
<p>A subsequent channel assignment procedure may be requested by MSC-A/3G_MSC-A after an Inter-MSC GSM to UMTS handover or Inter-MSC SRNS relocation without circuit connection (see subclauses 13.2 and 13.4). If RNS-A replies with an Iu-RAB-ASSIGNMENT-RESPONSE containing the cause value 'Relocation Triggered' due to an already initiated subsequent Inter-MSC handover/relocation, the 3G_MSC-B shall not forward the result of the RAB Assignment procedure to MSC-A/3G_MSC-A, but wait for the outcome of the handover/relocation procedure.</p>
<p><img alt="" src="../23009-g00.046.png" /></p>
<p>NOTE:   The message flow is shown in the perspective of 3G_MSC-B. It is assumed that RNS-A has sent the Iu-RELOCATION-REQUIRED before it received the Iu-RAB-ASSIGNMENT-REQUEST.</p>
<p><strong>Figure 35da: Collision between a subsequent Inter-MSC handover/relocation and a RAB assignment procedure i): successful handover/relocation</strong></p>
<p>If the subsequent Inter-MSC handover/relocation procedure is unsuccessful and the UE is still served by 3G_MSC-B, the 3G_MSC-B shall reattempt the subsequent channel assignment procedure towards RNS-A.</p>
<p><img alt="" src="../23009-g00.047.png" /></p>
<p>NOTE:   The message flow is shown in the perspective of 3G_MSC-B. It is assumed that RNS-A has sent the Iu-RELOCATION-REQUIRED before it received the Iu-RAB-ASSIGNMENT-REQUEST.</p>
<p><strong>Figure 35db: Collision between a subsequent Inter-MSC handover/relocation and a RAB assignment procedure ii): unsuccessful handover/relocation</strong></p>
<h1 id="1283-interactions-between-directed-retry-handover-procedures-and-the-rab-assignment-procedure">12.8.3    Interactions between directed retry handover procedures and the RAB assignment procedure</h1>
<h1 id="12831-intra-3g_msc-b-directed-retry-handover">12.8.3.1  Intra-3G_MSC-B directed retry handover</h1>
<p>For a description of the directed retry handover procedure see subclause 14.3.</p>
<p>A subsequent channel assignment procedure may be requested by MSC-A/3G_MSC-A after an Inter-MSC GSM to UMTS handover or Inter-MSC SRNS relocation without circuit connection (see subclauses 13.2 and 13.4). If RNS-A replies with an Iu-RAB-ASSIGNMENT-RESPONSE containing the cause value 'Directed Retry' and the subsequent Iu-RELOCATION-REQUIRED indicates that an Intra-3G_MSC-B directed retry handover is required, the 3G_MSC-B shall not forward the result of the RAB assignment procedure to MSC-A/3G_MSC-A, but wait for the outcome of the directed retry handover procedure. If the directed retry handover procedure is completed successfully, the 3G_MSC-B shall construct an A-ASSIGNMENT-COMPLETE or Iu-RAB-ASSIGNMENT-RESPONSE message, dependent on the encapsulated protocol used on the E-interface, and forward this message to MSC-A/3G_MSC-A in the MAP-PREPARE-HANDOVER response.</p>
<p><img alt="" src="../23009-g00.048.png" /></p>
<p><strong>Figure 35e: Interaction between a RAB assignment procedure and a subsequent Intra-3G_MSC-B directed retry handover i): successful directed retry handover</strong></p>
<p>If the directed retry handover procedure is unsuccessful and the UE is still served by RNS-A, the 3G_MSC-B may optionally take one of a number of actions:</p>
<p>i)  send an Iu-RELOCATION-PREPARATION FAILURE to RNS-A, if an Iu-RELOCATION-COMMAND has not already been sent. Additionally 3G_MSC-B may retry the assignment procedure to RNS-A;</p>
<p>ii) retry the assignment procedure to RNS-A, if the failure message was returned from RNS-A. This option is additional to those for normal handover;</p>
<p>iii)    construct an A-ASSIGNMENT-FAILURE message containing the cause value 'Radio interface failure, reversion to old channel' or Iu-RAB-ASSIGNMENT-RESPONSE message containing the cause value 'Failure In The Radio Interface Procedure', dependent on the encapsulated protocol used on the E-interface, and forward this message to MSC-A/3G_MSC-A.</p>
<h1 id="12832-subsequent-inter-msc-directed-retry-handover">12.8.3.2  Subsequent Inter-MSC directed retry handover</h1>
<p>A subsequent channel assignment procedure may be requested by MSC-A/3G_MSC-A after an Inter-MSC GSM to UMTS handover or SRNS relocation without circuit connection (see subclauses 13.2 and 13.4). If RNS-A replies with an Iu-RAB-ASSIGNMENT-RESPONSE containing the cause value 'Directed Retry' and the subsequent Iu-RELOCATION-REQUIRED indicates that a subsequent Inter-MSC directed retry handover is required, the 3G_MSC-B shall not forward the result of the RAB Assignment procedure to MSC-A/3G_MSC-A, but wait for the outcome of the directed retry handover procedure. 3G_MSC-B shall continue with the directed retry handover procedure as described in subclause 14.3.</p>
<p><img alt="" src="../23009-g00.049.png" /></p>
<p><strong>Figure 35f: Interaction between a RAB assignment procedure and a subsequent Inter-MSC directed retry handover i): successful directed retry handover</strong></p>
<p>If the directed retry handover procedure is unsuccessful and the UE is still served by 3G_MSC-B, the 3G_MSC-B may optionally take one of a number of actions:</p>
<p>i)  send an Iu-RELOCATION-PREPARATION FAILURE to RNS-A, if an Iu-RELOCATION-COMMAND has not already been sen. Additionally 3G_MSC-B may retry the assignment procedure to RNS-A t;</p>
<p>ii) retry the assignment procedure to RNS-A, if the failure message was returned from RNS-A. This option is additional to those for normal handover;</p>
<p>iii)    construct an A-ASSIGNMENT-FAILURE message containing the cause value 'Radio interface failure, reversion to old channel' or Iu-RAB-ASSIGNMENT-RESPONSE message containing the cause value 'Failure In The Radio Interface Procedure', dependent on the encapsulated protocol used on the E-interface, and forward this message to MSC-A/3G_MSC-A.</p>
<h1 id="13-subsequent-channel-assignment-using-a-circuit-connection-between-msc-a-and-msc-b">13    Subsequent channel assignment using a circuit connection between MSCA and MSCB</h1>
<h1 id="131-gsm-handover">13.1  GSM handover</h1>
<p>If a circuit connection has to be set up (for example for a Mobile Originated or Mobile Terminated Call Establishment) after an Inter-MSC handover without circuit connection, MSCA shall request a Handover Number using a MAPPREPARE-HANDOVER request, containing the A-ASSIGNMENT-REQUEST, on the established MAP connection. For speech calls, MSC-A shall also include the Iu Supported Codecs List to be used by MSC-B for subsequent intra-MSC-B intersystem handover to UMTS and intra-MSC-B SRNS relocation. If MSCB indicates to MSCB and to MSCA that at least one of two procedures assignment or Handover Number allocation can not be completed, then MSCA shall terminate the circuit establishment attempt. The existing connection to the MS shall be maintained, if possible.</p>
<p>Upon receipt of the MAP-PREPARE-HANDOVER request MSCB shall perform the requested assignment operation towards the BSS. In addition it shall retrieve a Handover Number from VLR-B. If a failure occurs in the assignment or Handover Number allocation then it shall be reflected in the MAP-PREPARE-HANDOVER response that at least one of these two procedures has not been completed (i.e. either by a MAP-PREPARE-HANDOVER result with the assignment procedure outcome and the Handover Number allocation outcome or by a MAP-PREPARE-HANDOVER error).</p>
<p>If MSC-A supports A interface over IP, then for speech calls MSC-A may include the AoIP-Supported Codecs List (Anchor) in the MAP-PREPARE-HANDOVER request.</p>
<p>If the BSS-B supports A over IP then MSC-B shall include a Codec List (MSC preferred) in the A-ASSIGNMENT-REQUEST message to BSS-B. MSC-B may select the codecs for the Codec List (MSC preferred) from the channel type information and the AoIPSupported Codecs List (Anchor), if this list was provided by 3G_MSC-A in the MAP-PREPARE-HANDOVER request. For a detailed description of the handling of these codec lists by MSC-A and MSC-B see 3GPP TS 23.153 [25]. If the AoIP-Supported Codecs List (Anchor) was not provided or MSC-B does not support the selection of codecs from the AoIP-Supported Codecs List, then MSC-B shall create the Codec List (MSC preferred) using the channel type information received from 3G_MSC-A in the A-ASSIGNMENT-REQUEST message included in the MAP-PREPARE-HANDOVER request.</p>
<p>If MSC-A provided an AoIP-Supported Codecs List (Anchor) in the MAP-PREPARE-HANDOVER request and MSCB selected the codecs for the Codec List (MSC preferred) from the AoIP-Supported Codecs List (Anchor), MSCB may include the AoIP-Selected Codec (Target) and AoIP-Available Codecs List (MAP) in the MAP-PREPARE-HANDOVER response.</p>
<p>When MSCA receives a successful MAP-PREPARE-HANDOVER response it shall establish a circuit connection to MSCB by using the appropriate network supported procedures. In figure 36 this is indicated by the IAM (Initial Address Message) and ACM (Address Complete Message). MSCB shall also send the Answer message if appropriate to the signalling system. Upon receipt of the Answer MSCA shall consider the circuit connection establishment phase complete. If a failure occurs during the cirucit establishment phase then the existing connection to the MS shall be maintained, if possible.</p>
<p><img alt="" src="../23009-g00.050.png" /></p>
<p>NOTE:   Can be sent at any time after the reception of IAM.</p>
<p><strong>Figure 36: Successful circuit-switched call establishment after a Basic Handover without circuit connection</strong></p>
<h1 id="132-umts-to-gsm-handover">13.2  UMTS to GSM handover</h1>
<p>If a circuit connection has to be set up (for example for a Mobile Originated or Mobile Terminated Call Establishment) after an Inter-3G_MSC UMTS to GSM handover without circuit connection, 3G_MSCA shall request a Handover Number using a MAP-PREPARE-HANDOVER request, containing the A-ASSIGNMENT-REQUEST, on the established MAP connection. For speech calls, 3G_MSC-A shall also include the Iu Supported Codecs List to be used by MSC-B for subsequent intra-MSC-B intersystem handover to UMTS and intra-MSC-B SRNS relocation. If MSCB indicates to MSCB and to 3G_MSCA that at least one of two procedures assignment or Handover Number allocation can not be completed, then 3G_MSCA shall terminate the circuit establishment attempt. The existing connection to the UE/MS shall be maintained, if possible.</p>
<p>Upon receipt of the MAP-PREPARE-HANDOVER request MSCB shall perform the requested assignment operation towards the BSS. In addition it shall retrieve a Handover Number from VLR-B. If a failure occurs in the assignment or Handover Number allocation then it shall be reflected in the MAP-PREPARE-HANDOVER response that at least one of these two procedures has not been completed (i.e. either by a MAP-PREPARE-HANDOVER result with the assignment procedure outcome and the Handover Number allocation outcome or by a MAP-PREPARE-HANDOVER error).</p>
<p>If 3G_MSC-A supports A interface over IP, then for speech calls 3G_MSC-A may include the AoIP-Supported Codecs List (Anchor) in the MAP-PREPARE-HANDOVER request.</p>
<p>If the BSS-B supports A over IP, then MSC-B shall include a Codec List (MSC preferred) in the A-ASSIGNMENT-REQUEST message to BSS-B. MSC-B may select the codecs for the Codec List (MSC preferred) from the channel type information and the AoIPSupported Codecs List (Anchor), if this list was provided by 3G_MSC-A in the MAP-PREPARE-HANDOVER request. For a detailed description of the handling of these codec lists by 3G_MSC-A and MSC-B see 3GPP TS 23.153 [25]. If the AoIP-Supported Codecs List (Anchor) was not provided or MSC-B does not support the selection of codecs from the AoIP-Supported Codecs List (Anchor), then MSC-B shall create the Codec List (MSC preferred) using the channel type information received from 3G_MSC-A in the A-ASSIGNMENT-REQUEST message included in the MAP-PREPARE-HANDOVER request.</p>
<p>If MSC-A provided an AoIP-Supported Codecs List (Anchor) in the MAP-PREPARE-HANDOVER request and MSCB selected the codecs for the Codec List (MSC preferred) from the AoIP-Supported Codecs List (Anchor), MSCB may include the AoIP-Selected Codec (Target) and AoIP-Available Codecs List (MAP) in the MAP-PREPARE-HANDOVER response.</p>
<p>When 3G_MSCA receives a successful MAP-PREPARE-HANDOVER response, it shall establish a circuit connection to MSCB by using the appropriate network supported procedures. In figure 37 this is indicated by the IAM (Initial Address Message) and ACM (Address Complete Message). MSCB shall also send the Answer message if appropriate to the signalling system. Upon receipt of the Answer 3G_MSCA shall consider the circuit connection establishment phase complete. If a failure occurs during the circuit establishment phase then the existing connection to the UE/MS shall be maintained, if possible.</p>
<p><img alt="" src="../23009-g00.051.png" /></p>
<p>NOTE 1: Can be sent at any time after the reception of IAM.</p>
<p><strong>Figure 37: Successful circuit-switched call establishment after a Basic UMTS to GSM Handover without circuit connection</strong></p>
<h1 id="133-gsm-to-umts-handover">13.3  GSM to UMTS handover</h1>
<p>If a circuit connection has to be set up (for example for a Mobile Originated or Mobile Terminated Call Establishment) after an Inter-3G_MSC GSM to UMTS handover without circuit connection, MSCA shall request a Handover Number using a MAP-PREPARE-HANDOVER request, containing the A-ASSIGNMENT-REQUEST, on the established MAP connection. If 3G_MSCB indicates to 3G_MSCB and to MSCA that at least one of two procedures assignment or Handover Number allocation can not be completed, then MSCA shall terminate the circuit establishment attempt. The existing connection to the UE/MS shall be maintained, if possible.</p>
<p>If MSC-A supports A interface over IP, then for speech calls MSC-A may include the AoIP-Supported Codecs List (Anchor) in the MAP-PREPARE-HANDOVER request to be used by 3G_MSC-B for subsequent intra-3G_MSC-B intersystem handover to an A over IP capable BSS. For a detailed description of the handling of this codec list by MSCA and 3G_MSC-B see 3GPP TS 23.153 [25].</p>
<p>Upon receipt of the MAP-PREPARE-HANDOVER request 3G_MSCB shall perform the requested assignment operation towards the RNS. In addition it shall retrieve a Handover Number from VLR-B. If a failure occurs in the assignment or Handover Number allocation then it shall be reflected in the MAP-PREPARE-HANDOVER response that at least one of these two procedures has not been completed (i.e. either by a MAP-PREPARE-HANDOVER result with the assignment procedure outcome and the Handover Number allocation outcome or by a MAP-PREPARE-HANDOVER error).</p>
<p>For speech calls, if 3G_MSC-B supports the selection of codec based on the Iu-Supported Codecs List, 3G_MSCB shall select a codec from the Iu Supported Codecs List, generate associated RAB parameters and connect a transcoder. If the Iu Supported Codecs List was not received or 3G_MSC-B does not support the selection of codec based on the Iu-Supported Codecs List, 3G_MSCB shall select the appropriate default speech codec. </p>
<p>For an assignment in UTRAN Iu mode, 3G_MSC-B shall also generate a NAS Synch Indicator for the Iu-RAB-ASSIGNMENT-REQUEST message. If the Iu Supported Codecs List was received by 3G_MSC-B and 3G_MSC-B supports the selection of codec based on the Iu-Supported Codecs List, then the Iu Selected codec shall be indicated in the MAP-PREPARE-HANDOVER response, sent from 3G_MSCB to MSCA.</p>
<p>When MSCA receives a successful MAP-PREPARE-HANDOVER response, it shall establish a circuit connection to 3G_MSCB by using the appropriate network supported procedures. In figure 38 this is indicated by the IAM (Initial Address Message) and ACM (Address Complete Message). 3G_MSCB shall also send the Answer message if appropriate to the signalling system. Upon receipt of the Answer MSCA shall consider the circuit connection establishment phase complete. If a failure occurs during the circuit establishment phase then the existing connection to the UE/MS shall be maintained, if possible.</p>
<p><img alt="" src="../23009-g00.052.png" /></p>
<p>NOTE 1: Can be sent at any time after the reception of IAM.</p>
<p><strong>Figure 38: Successful circuit-switched call establishment
after a Basic GSM to UMTS Handover without circuit connection</strong></p>
<h1 id="134-srns-relocation">13.4  SRNS Relocation</h1>
<h1 id="1341-without-circuit-connection">13.4.1    Without circuit connection</h1>
<p>If a circuit connection has to be set up (for example for a Mobile Originated or Mobile Terminated Call Establishment) after an Inter-3G_MSC relocation without circuit connection, 3G_MSCA shall request a Handover Number using a MAP-PREPARE-HANDOVER request, containing the IU-RAB-ASSIGNMENT-REQUEST, on the established MAP connection.</p>
<p>For speech calls, 3G_MSC-A shall include the Iu Supported Codecs List in the MAP-PREPARE-HANDOVER request. 3G_MSCA shall configure the RANAP RAB parameters according to the appropriate default speech codec.</p>
<p>If 3G_MSC-A supports A interface over IP, then for speech calls 3G_MSC-A may include the AoIP-Supported Codecs List (Anchor) in the MAP-PREPARE-HANDOVER request to be used by 3G_MSC-B for subsequent intra-3G_MSC-B intersystem handover to an A over IP capable BSS. For a detailed description of the handling of this codec list by 3G_MSC-A and 3G_MSC-B see 3GPP TS 23.153 [25].</p>
<p>Alternatively, if 3G_MSC-B is known to support the use of the Iu Supported Codecs List, 3G_MSC-A may configure the RANAP RAB parameters according to the preferred codec and indicate this to 3G_MSC-B by including the RAB configuration indicator in the MAP-PREPARE-HANDOVER request. The decision to use this option is based on internal configuration information in 3G_MSC-A.</p>
<p>For an assignment in UTRAN Iu mode, 3G_MSCA shall also include the NAS Synch Indicator in the Iu-RAB-ASSIGNMENT-REQUEST.</p>
<p>If 3G_MSCB indicates to 3G_MSCB and to 3G_MSCA that at least one of two procedures (RAB) assignment or Handover Number allocation can not be completed, then 3G_MSCA shall terminate the circuit establishment attempt. The existing connection to the UE shall be maintained, if possible.</p>
<p>Upon receipt of the MAP-PREPARE-HANDOVER request, 3G_MSCB shall perform the requested RAB assignment operation towards the RNS. In addition it shall retrieve a Handover Number from VLR-B.</p>
<p>For speech calls, if 3G_MSC-B supports the selection of codec based on the Iu-Supported Codecs List, 3G_MSCB shall select an Iu Selected codec from the Iu Supported Codecs List and connect a transcoder. If the Iu Supported Codecs List was not received or 3G_MSC-B does not support the selection of codec based on the Iu-Supported Codecs List, 3G_MSCB shall select the appropriate default speech codec. </p>
<p>3G_MSC-B shall reconfigure the RANAP RAB parameters according to the Iu Selected codec:</p>
<p>-  if the RAB configuration indicator is included in the MAP-PREPARE-HANDOVER request and the codec selected by 3G_MSC-B is different from the preferred codec; or</p>
<p>-  if the RAB configuration indicator is not included in the MAP-PREPARE-HANDOVER request and the codec selected by 3G_MSC-B is different from the appropriate default speech codec.</p>
<p>Additionally, for an assignment in UTRAN Iu mode, 3G_MSC-B shall include the NAS Synch Indicator for the Iu Selected codec in the Iu-RAB-ASSIGNMENT-REQUEST. If the Iu Supported Codecs List was received by 3G_MSC-B and 3G_MSC-B supports the selection of codec based on the Iu-Supported Codecs List, then the Iu Selected codec shall be indicated in the MAP-PREPARE-HANDOVER response, sent from 3G_MSCB to 3G_MSCA.</p>
<p>If a failure occurs in the RAB assignment or Handover Number allocation then it shall be reflected in the MAP-PREPARE-HANDOVER response that at least one of these two procedures has not been completed (i.e. either by a MAP-PREPARE-HANDOVER result with the RAB assignment procedure outcome and the Handover Number allocation outcome or by a MAP-PREPARE-HANDOVER error).</p>
<p>When 3G_MSCA receives a successful MAP-PREPARE-HANDOVER response, it shall establish a circuit connection to 3G_MSCB by using the appropriate network supported procedures. In figure 39 this is indicated by the IAM (Initial Address Message) and ACM (Address Complete Message). 3G_MSCB shall also send the Answer message if appropriate to the signalling system. Upon receipt of the Answer 3G_MSCA shall consider the circuit connection establishment phase complete. If a failure occurs during the circuit establishment phase then the existing connection to the UE shall be maintained, if possible.</p>
<h1 id="1342-with-circuit-connection-optional-functionality">13.4.2    With circuit connection (Optional functionality)</h1>
<p>If 3G_MSC-A and 3G_MSC-B support the optional supplementary service Multicall (See 3GPP TS 23.135 [17]), 3G_MSC-A and 3G_MSC-B shall have the following functionality additionally to the description in subclause 13.4.1.</p>
<p>A new circuit connection shall be able to set up (for example for a new Mobile Originated or a new Mobile Terminated Call Establishment) after an Inter-3G_MSC relocation with one or several circuit connections. The procedures for the establishment of the additional circuit connection in 3G_MSC-A and 3G_MSC-B are the same as that described in subclause 13.4.1.</p>
<p><img alt="" src="../23009-g00.053.png" /></p>
<p>NOTE 1: Can be sent at any time after the reception of IAM.</p>
<p><strong>Figure 39: Successful circuit-switched call establishment
after a Basic Relocation without circuit connection</strong></p>
<h1 id="14-directed-retry-handover">14    Directed retry handover</h1>
<p>Editor's Note:  [Directed retry in the cases of SRNS relocation is FFS]</p>
<h1 id="141-gsm-handover">14.1  GSM handover</h1>
<p>The directed retry procedure allows the network to select the optimum cell for the Mobile Station. The process of directed retry involves the assignment of a Mobile Station to a radio channel on a cell other than the serving cell. This process is triggered by the assignment procedures, as described in 3GPP TS 48.008 [5], and employs internal or external handover procedures as described in clauses 6 and 7. The successful procedure for a directed retry is as shown in figure 40 and as described below.</p>
<p>If during the assignment phase, as represented by the A-ASSIGNMENT-REQUEST message, a handover becomes necessary, due to either radio conditions or congestion, then the Mobile Station may be handed over to a different cell. When the decision has been made to handover the MS the BSS-A may send an A-ASSIGNMENT-FAILURE message, indicating 'directed retry', before sending the A-HANDOVER-REQUIRED message to MSCA, indicating 'directed retry'. However BSS-A may alternatively send the A-HANDOVER-REQUIRED message, indicating 'directed retry', without sending the A-ASSIGNMENT-FAILURE message. Other cause values may be used instead of "Directed Retry" in the A-HANDOVER-REQUIRED message, this will allow the MSC to take different actions dependent on the received cause. Upon receipt of the A-HANDOVER-REQUIRED message from BSS-A, then MSCA shall initiate the handover as described in clauses 6 and 7. No resources shall be cleared in the MSCA or BSS-A for this connection.</p>
<p>After receipt of the A-HANDOVER-COMPLETE message from BSS-B the assignment procedure shall be considered to be complete and the resources on BSS-A shall be cleared.</p>
<p><img alt="" src="../23009-g00.054.png" /></p>
<p><strong>Figure 40: Example of a Directed Retry Intra-MSC Handover Procedure</strong></p>
<p>If a failure occurs during the handover attempt, for example A-HANDOVER-FAILURE returned from BSS-A or BSS-B, then MSCA will terminate the handover to BSS-B. Under these conditions MSCA may optionally take one of a number of actions:</p>
<p>i)  retry the handover to the same cell;</p>
<p>ii) select the next cell from the list contained in the A-HANDOVER-REQUIRED message and attempt a handover to the new cell;</p>
<p>iii)    send an A-HANDOVER-REQUIRED-REJECT to BSS-A, if an A-HANDOVER-COMMAND has not already been sent. Additionally MSC-A may retry the assignment procedure to BSS-A;</p>
<p>iv) retry the assignment procedure to BSS-A, if the failure message was returned from BSS-A. This option is additional to those for normal handover;</p>
<p>v)  Clear the complete call.</p>
<p>The procedures for Inter-MSC handover are also applicable to the directed retry process. If an Inter-MSC handover is necessary then the assignment process should be considered to have completed successfully upon receipt of the A-HO-COMPLETE included in the MAP-SEND-END-SIGNAL request.</p>
<h1 id="142-gsm-to-umts-handover">14.2  GSM to UMTS handover</h1>
<p>The directed retry procedure allows the network to select the optimum cell for the UE/MS. The process of directed retry involves the assignment of a UE/MS to a radio channel on a cell other than the serving cell. This process is triggered by the assignment procedures, as described in 3GPP TS 48.008 [5], and employs internal or external GSM to UMTS handover procedures as described in subclauses 6.2.2 and 8.2. The successful procedure for a directed retry in case of an intra-3G_MSC GSM to UMTS handover is as shown in figure 40a and as described below.</p>
<p>If during the assignment phase, as represented by the A-ASSIGNMENT-REQUEST message, a GSM to UMTS handover becomes necessary, due to radio conditions, congestion or inability to provide the requested bearer service in GSM, then the UE/MS may be handed over to a UMTS cell. If the requested bearer service cannot be provided in GSM, 3G_MSC-A shall indicate in the A-ASSIGNMENT-REQUEST message that handover to UMTS should be performed. When the decision has been made to handover the UE/MS the BSS-A may send an A-ASSIGNMENT-FAILURE message, indicating 'directed retry', before sending the A-HANDOVER-REQUIRED message to 3G_MSCA, indicating 'directed retry'. However BSS-A may alternatively send the A-HANDOVER-REQUIRED message, indicating 'directed retry', without sending the A-ASSIGNMENT-FAILURE message. Other cause values may be used instead of "Directed Retry" in the A-HANDOVER-REQUIRED message, this will allow the 3G_MSC to take different actions dependent on the received cause. Upon receipt of the A-HANDOVER-REQUIRED message from BSS-A, then 3G_MSCA shall initiate the GSM to UMTS handover as described in subclauses 6.2.2 and 8.2. No resources shall be cleared in the 3G_MSCA or BSS-A for this connection.</p>
<p>After receipt of the Iu-RELOCATION-COMPLETE message from RNS-B the assignment procedure shall be considered to be complete and the resources on BSS-A shall be cleared.</p>
<p><img alt="" src="../23009-g00.055.png" /></p>
<p><strong>Figure 40a: Example of a Directed Retry Intra-3G_MSC GSM to UMTS Handover Procedure</strong></p>
<p>If a failure occurs during the handover attempt, for example A-HANDOVER-FAILURE returned from BSS-A or Iu-RELOCATION FAILURE from RNS-B then 3G_MSCA will terminate the GSM to UMTS handover to RNS-B. Under these conditions 3G_MSCA may optionally take one of a number of actions:</p>
<p>i)  send an A-HANDOVER-REQUIRED-REJECT to BSS-A, if an A-HANDOVER-COMMAND has not already been sent. Additionally 3G_MSC-A may retry the assignment procedure to BSS-A;</p>
<p>ii) retry the assignment procedure to BSS-A, if the failure message was returned from BSS-A. This option is additional to those for normal handover;</p>
<p>iii)    Clear the complete call.</p>
<p>The procedures for Inter-3G_MSC GSM to UMTS handover are also applicable to the directed retry process. If an Inter-3G_MSC GSM to UMTS handover is necessary then the assignment process should be considered to have completed successfully upon receipt of the A-HO-COMPLETE included in the MAP-SEND-END-SIGNAL request.</p>
<h1 id="143-umts-to-gsm-handover">14.3  UMTS to GSM handover</h1>
<p>The directed retry procedure allows the network to select the optimum cell for the UE/MS. The process of directed retry involves the assignment of a UE/MS to a radio channel on a cell other than the serving cell. This process is triggered by the assignment procedures, as described in 3GPP TS 25.413 [1], and employs UMTS to GSM handover procedures as described in subclauses 6.2.1 and 8.1. The successful procedure for a directed retry in case of an intra-3G_MSC UMTS to GSM handover is as shown in figure 40b and as described below.</p>
<p>If during the assignment phase, as represented by the Iu-RAB-ASSIGNMENT-REQUEST message, a UMTS to GSM handover becomes necessary, due to either radio conditions. congestion or network preference, then the UE/MS may be handed over to a GSM cell. If the handover to GSM is required due to network preference, 3G_MSC-A shall indicate in the Iu-RAB-ASSIGNMENT-REQUEST message that handover to GSM should be performed. When the decision has been made to handover the UE/MS the RNS-A shall send an Iu-RAB-ASSIGNMENT-RESPONSE message, indicating 'directed retry', before sending the Iu-RELOCATION-REQUIRED message to 3G_MSCA, indicating 'directed retry'. Other cause values may be used instead of "Directed Retry" in the Iu-RELOCATION-REQUIRED message, this will allow the 3G_MSC to take different actions dependent on the received cause. Upon receipt of the Iu-RELOCATION-REQUIRED message from RNS-A, then 3G_MSCA shall initiate the UMTS to GSM handover as described in subclauses 6.2.1 and 8.1. No resources shall be cleared in the 3G_MSCA or RNS-A for this connection.</p>
<p>After receipt of the A-HANDOVER-COMPLETE message from BSS-B the assignment procedure shall be considered to be complete and the resources on RNS-A shall be cleared.</p>
<p><img alt="" src="../23009-g00.056.png" /></p>
<p><strong>Figure 40b: Example of a Directed Retry Intra-3G_MSC UMTS to GSM Handover Procedure</strong></p>
<p>If a failure occurs during the handover attempt, for example Iu-RELOCATION FAILURE returned from RNS-A or A-HANDOVER-FAILURE from BSS-B then 3G_MSCA will terminate the UMTS to GSM handover to BSS-B. Under these conditions 3G_MSCA may optionally take one of a number of actions:</p>
<p>i)  send an Iu-RELOCATION-PREPARATION FAILURE to RNS-A, if an Iu-RELOCATION-COMMAND has not already been sent. Additionally 3G_MSC-A may retry the assignment procedure to RNS-A;</p>
<p>ii) retry the assignment procedure to RNS-A, if the failure message was returned from RNS-A. This option is additional to those for normal handover;</p>
<p>iii)    Clear the complete call.</p>
<p>The procedures for Inter-3G_MSC UMTS to GSM handover are also applicable to the directed retry process. If an Inter-3G_MSC UMTS to GSM handover is necessary then the assignment process should be considered to have completed successfully upon receipt of the A-HO-COMPLETE included in the MAP-SEND-END-SIGNAL request.</p>
<h1 id="15-sdl-diagrams">15    SDL diagrams</h1>
<p>NOTE 1: The message primitive names used in the SDL diagrams and message flows in the present document do not represent the actual messages specified in the GSM or 3GPP stage 3 technical specifications. The primitive names are only intended to be indicative of their use in the present document.</p>
<p>SDL Annotation.</p>
<p>The following conventions and abbreviations have been used in the SDLs. Text included in '[]' is used to indicate either, the BSSMAP message (as defined in 3GPP TS 49.008 [7]) included in the message, or the transport of a Handover Number.</p>
<p>When traversing the following SDLs it may be possible that resources appear to be released repeatedly, however these operations are only executed once on their first occurrence. Furthermore it maybe that certain messages cannot, in practice, be received in particular states, after specific events have taken place. In general both of the above cases are obvious. This approach has been adopted (in line with other GSM Technical Specifications) in order to reduce the complexity of the SDLs and improve clarity, without reducing the quality of the functional description.</p>
<p>The following abbreviations have been used in the SDLs:</p>
<p><code></code>A-HO-REQUEST   A-HANDOVER-REQUEST</p>
<p><code></code>A-HO-REQUEST-ACK   A-HANDOVER-REQUEST-ACK.</p>
<p><code></code>A-HO-COMPLETE  A-HANDOVER-COMPLETE</p>
<p><code></code>A-HO-DETECT    A-HANDOVER-DETECT</p>
<p><code></code>A-HO-PERFORMED A-HANDOVER-PERFORMED</p>
<p><code></code>A-ASG-REQUEST  A-ASSIGNMENT-REQUEST</p>
<p><code></code>A-ASG-COMPLETE A-ASSIGNMENT-COMPLETE</p>
<p><code></code>A-ASG-FAILURE  A-ASSIGNMENT-FAILURE</p>
<p><code></code>MAP-PAS req    MAP-PROCESS-ACCESS-SIGNALLING req.</p>
<p><code></code>MAP-FAS req    MAP-FORWARD-ACCESS-SIGNALLING req. </p>
<p><code></code>IU-RLC-REQUEST IU-RELOCATION-REQUEST</p>
<p><code></code>IU-RLC-REQUEST-ACK IU-RELOCATION-REQUEST-ACK</p>
<p><code></code>IU-RLC-COMPLETE    IU-RELOCATION-COMPLETE</p>
<p><code></code>IU-RLC-DETECT  IU-RELOCATION-DETECT</p>
<p><code></code>IU-IREL-REQUEST    IU-IU-RELEASE-REQUEST</p>
<p><code></code>IU-RREL-REQUEST    IU-RAB-RELEASE-REQUEST</p>
<p><code></code>IU-RASG-REQUEST    IU-RAB-ASSIGNMENT-REQUEST</p>
<p><code></code>IU-RASG-RESPONSE   IU-RAB-ASSIGNMENT-RESPONSE</p>
<p>NOTE 2: The SDL diagrams have been checked for consistency with the allocation of the A interface circuits by the BSC. The conclusion was that SDLs are expressed in general terms, and offer a sufficient latitude of interpretation to be consistent with the allocation of A interface circuits by the BSC.</p>
<p><strong><img alt="" src="../23009-g00.057.png" /></strong></p>
<p><strong>Figure 41 (Sheet 1 of 26): Handover control procedure in MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 41 (Sheet 2 of 26): Handover control procedure in MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 41 (Sheet 3 of 26): Handover control procedure in MSCA</strong></p>
<p><img alt="" src="../23009-g00.058.png" /></p>
<p><strong>Figure 41 (Sheet 4 of 26): Handover control procedure in MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 41 (Sheet 5 of 26): Handover control procedure in MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 41 (Sheet 6 of 26): Handover control procedure in MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 41 (Sheet 7 of 26): Handover control procedure in MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 41 (Sheet 8 of 26): Handover control procedure in MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 41 (Sheet 9 of 26): Handover control procedure in MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 41 (Sheet 10 of 26): Handover control procedure in MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 41 (Sheet 11 of 26): Handover control procedure in MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 41 (Sheet 12 of 26): Handover control procedure in MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 41 (Sheet 13 of 26): Handover control procedure in MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 41 (Sheet 14 of 26): Handover control procedure in MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 41 (Sheet 15 of 26): Handover control procedure in MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 41 (Sheet 16 of 26): Handover control procedure in MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 41 (Sheet 17 of 26): Handover control procedure in MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 41 (Sheet 18 of 26): Handover control procedure in MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 41 (Sheet 19 of 26): Handover control procedure in MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 41 (Sheet 20 of 26): Handover control procedure in MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 41 (Sheet 21 of 26): Handover control procedure in MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 41 (Sheet 22 of 26): Handover control procedure in MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 41 (Sheet 23 of 26): Handover control procedure in MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 41 (Sheet 24 of 26): Handover control procedure in MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 41 (Sheet 25 of 26): Handover control procedure in MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 41 (Sheet 26 of 26): Handover control procedure in MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 42 (Sheet 1 of 18): Handover control procedure in MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 42 (Sheet 2 of 18): Handover control procedure in MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 42 (Sheet 3 of 18): Handover control procedure in MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 42 (Sheet 4 of 18): Handover control procedure in MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 42 (Sheet 5 of 18): Handover control procedure in MSCB</strong></p>
<p><img alt="" src="../23009-g00.059.png" /></p>
<p><strong>Figure 42 (Sheet 6 of 18): Handover control procedure in MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 42 (Sheet 7 of 18): Handover control procedure in MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 42 (Sheet 8 of 18): Handover control procedure in MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 42 (Sheet 9 of 18): Handover control procedure in MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 42 (Sheet 10 of 18): Handover control procedure in MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 42 (Sheet 11 of 18): Handover control procedure in MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 42 (Sheet 12 of 18): Handover control procedure in MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 42 (Sheet 13 of 18): Handover control procedure in MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 42 (Sheet 14 of 18): Handover control procedure in MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 42 (Sheet 15 of 18): Handover control procedure in MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 42 (Sheet 16 of 18): Handover control procedure in MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 42 (Sheet 17 of 18): Handover control procedure in MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 42 (Sheet 18 of 18): Handover control procedure in MSCB</strong></p>
<p><strong><img alt="" src="../23009-g00.060.png" /></strong></p>
<p><strong>Figure 43 (sheet 1 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 2 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 3 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 4 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 5 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 6 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 7 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 8 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 9 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 10 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 11 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 12 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 13 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 14 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 15 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 16 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 17 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 18 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 19 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 20 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 21 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 22 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 23 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 24 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 25 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 26 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 27 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 28 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 29 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="st1" src="../23009-g00.061.png" /></p>
<p><strong>Figure 43 (sheet 30 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 31 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 32 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 33 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 34 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 35 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 36 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 37 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 38 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 39 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 40 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 41 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 42 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 43 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 44 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 45 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 46 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 47 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 48 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 49 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 50 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 51 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 52 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 53 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 54 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 55 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 56 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 57 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 58 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 59 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 60 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 61 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 62 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 63 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 64 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 65 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 66 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 67 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 68 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 69 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 70 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 71 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 72 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 73 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="st5" src="../23009-g00.061.png" /></p>
<p><strong>Figure 43 (sheet 74 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 75 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 76 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 77 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 43 (sheet 78 of 78): Handover control procedure in 3G_MSCA</strong></p>
<p><strong><img alt="" src="../23009-g00.057.png" /></strong></p>
<p><strong>Figure 44 (sheet 1 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.062.png" /></p>
<p><strong>Figure 44 (sheet 2 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 3 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 4 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 5 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.062.png" /></p>
<p><strong>Figure 44 (sheet 6 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 7 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.062.png" /></p>
<p><strong>Figure 44 (sheet 8 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 9 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 10 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 11 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 12 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 13 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 14 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 15 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 16 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 17 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 18 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 19 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 20 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 21 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 22 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 23 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.062.png" /></p>
<p><strong>Figure 44 (sheet 24 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 25 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 26 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 27 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 28 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 29 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 30 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 31 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.062.png" /></p>
<p><strong>Figure 44 (sheet 32 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 33 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 34 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 35 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 36 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 37 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 38 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 39 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 40 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 41 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 42 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 43 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.062.png" /></p>
<p><strong>Figure 44 (sheet 44 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.063.png" /></p>
<p><strong>Figure 44 (sheet 45 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 46 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 47 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 48 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 49 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 50 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 51 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 52 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 53 of 54): Handover control procedure in 3G_MSCB</strong></p>
<p><img alt="" src="../23009-g00.057.png" /></p>
<p><strong>Figure 44 (sheet 54 of 54): Handover control procedure in 3G_MSCB</strong>
Annex A (informative):
Change history
======================</p>
<table>
<thead>
<tr>
<th align="center"><strong>Change history</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><strong>Date</strong></td>
</tr>
<tr>
<td align="center">Apr 1999</td>
</tr>
<tr>
<td align="center">CN#03</td>
</tr>
<tr>
<td align="center">CN#06</td>
</tr>
<tr>
<td align="center">CN#7</td>
</tr>
<tr>
<td align="center">CN#7</td>
</tr>
<tr>
<td align="center">CN#7</td>
</tr>
<tr>
<td align="center">CN#7</td>
</tr>
<tr>
<td align="center">CN#7</td>
</tr>
<tr>
<td align="center">CN#7</td>
</tr>
<tr>
<td align="center">15/05/00</td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
</tr>
<tr>
<td align="center">2017-03</td>
</tr>
<tr>
<td align="center">2018-06</td>
</tr>
<tr>
<td align="center">2020-07</td>
</tr>
</tbody>
</table>
<p><strong><em>3GPP</em></strong></p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../hello/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Hello Again
              </div>
            </div>
          </a>
        
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.fd16492e.min.js"></script>
      <script src="../assets/javascripts/bundle.7836ba4d.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>